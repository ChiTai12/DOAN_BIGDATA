var V0=Object.defineProperty;var q0=(t,e,n)=>e in t?V0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var re=(t,e,n)=>q0(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function tp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var np={exports:{}},pa={},sp={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vi=Symbol.for("react.element"),K0=Symbol.for("react.portal"),Y0=Symbol.for("react.fragment"),X0=Symbol.for("react.strict_mode"),Q0=Symbol.for("react.profiler"),G0=Symbol.for("react.provider"),J0=Symbol.for("react.context"),Z0=Symbol.for("react.forward_ref"),ey=Symbol.for("react.suspense"),ty=Symbol.for("react.memo"),ny=Symbol.for("react.lazy"),ld=Symbol.iterator;function sy(t){return t===null||typeof t!="object"?null:(t=ld&&t[ld]||t["@@iterator"],typeof t=="function"?t:null)}var rp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ip=Object.assign,op={};function sr(t,e,n){this.props=t,this.context=e,this.refs=op,this.updater=n||rp}sr.prototype.isReactComponent={};sr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};sr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ap(){}ap.prototype=sr.prototype;function Wu(t,e,n){this.props=t,this.context=e,this.refs=op,this.updater=n||rp}var Vu=Wu.prototype=new ap;Vu.constructor=Wu;ip(Vu,sr.prototype);Vu.isPureReactComponent=!0;var ud=Array.isArray,lp=Object.prototype.hasOwnProperty,qu={current:null},up={key:!0,ref:!0,__self:!0,__source:!0};function cp(t,e,n){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)lp.call(e,s)&&!up.hasOwnProperty(s)&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:vi,type:t,key:i,ref:o,props:r,_owner:qu.current}}function ry(t,e){return{$$typeof:vi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ku(t){return typeof t=="object"&&t!==null&&t.$$typeof===vi}function iy(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var cd=/\/+/g;function Ua(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iy(""+t.key):e.toString(36)}function ho(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case vi:case K0:o=!0}}if(o)return o=t,r=r(o),t=s===""?"."+Ua(o,0):s,ud(r)?(n="",t!=null&&(n=t.replace(cd,"$&/")+"/"),ho(r,e,n,"",function(u){return u})):r!=null&&(Ku(r)&&(r=ry(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(cd,"$&/")+"/")+t)),e.push(r)),1;if(o=0,s=s===""?".":s+":",ud(t))for(var a=0;a<t.length;a++){i=t[a];var l=s+Ua(i,a);o+=ho(i,e,n,l,r)}else if(l=sy(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=s+Ua(i,a++),o+=ho(i,e,n,l,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ti(t,e,n){if(t==null)return t;var s=[],r=0;return ho(t,s,"","",function(i){return e.call(n,i,r++)}),s}function oy(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tt={current:null},po={transition:null},ay={ReactCurrentDispatcher:tt,ReactCurrentBatchConfig:po,ReactCurrentOwner:qu};function dp(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:Ti,forEach:function(t,e,n){Ti(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ti(t,function(){e++}),e},toArray:function(t){return Ti(t,function(e){return e})||[]},only:function(t){if(!Ku(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=sr;oe.Fragment=Y0;oe.Profiler=Q0;oe.PureComponent=Wu;oe.StrictMode=X0;oe.Suspense=ey;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ay;oe.act=dp;oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=ip({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=qu.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)lp.call(e,l)&&!up.hasOwnProperty(l)&&(s[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];s.children=a}return{$$typeof:vi,type:t.type,key:r,ref:i,props:s,_owner:o}};oe.createContext=function(t){return t={$$typeof:J0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:G0,_context:t},t.Consumer=t};oe.createElement=cp;oe.createFactory=function(t){var e=cp.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:Z0,render:t}};oe.isValidElement=Ku;oe.lazy=function(t){return{$$typeof:ny,_payload:{_status:-1,_result:t},_init:oy}};oe.memo=function(t,e){return{$$typeof:ty,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=po.transition;po.transition={};try{t()}finally{po.transition=e}};oe.unstable_act=dp;oe.useCallback=function(t,e){return tt.current.useCallback(t,e)};oe.useContext=function(t){return tt.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return tt.current.useDeferredValue(t)};oe.useEffect=function(t,e){return tt.current.useEffect(t,e)};oe.useId=function(){return tt.current.useId()};oe.useImperativeHandle=function(t,e,n){return tt.current.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return tt.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return tt.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return tt.current.useMemo(t,e)};oe.useReducer=function(t,e,n){return tt.current.useReducer(t,e,n)};oe.useRef=function(t){return tt.current.useRef(t)};oe.useState=function(t){return tt.current.useState(t)};oe.useSyncExternalStore=function(t,e,n){return tt.current.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return tt.current.useTransition()};oe.version="18.3.1";sp.exports=oe;var S=sp.exports;const yt=tp(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ly=S,uy=Symbol.for("react.element"),cy=Symbol.for("react.fragment"),dy=Object.prototype.hasOwnProperty,fy=ly.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hy={key:!0,ref:!0,__self:!0,__source:!0};function fp(t,e,n){var s,r={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)dy.call(e,s)&&!hy.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:uy,type:t,key:i,ref:o,props:r,_owner:fy.current}}pa.Fragment=cy;pa.jsx=fp;pa.jsxs=fp;np.exports=pa;var c=np.exports,Nl={},hp={exports:{}},vt={},pp={exports:{}},mp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,M){var U=P.length;P.push(M);e:for(;0<U;){var X=U-1>>>1,K=P[X];if(0<r(K,M))P[X]=M,P[U]=K,U=X;else break e}}function n(P){return P.length===0?null:P[0]}function s(P){if(P.length===0)return null;var M=P[0],U=P.pop();if(U!==M){P[0]=U;e:for(var X=0,K=P.length,se=K>>>1;X<se;){var de=2*(X+1)-1,H=P[de],A=de+1,q=P[A];if(0>r(H,U))A<K&&0>r(q,H)?(P[X]=q,P[A]=U,X=A):(P[X]=H,P[de]=U,X=de);else if(A<K&&0>r(q,U))P[X]=q,P[A]=U,X=A;else break e}}return M}function r(P,M){var U=P.sortIndex-M.sortIndex;return U!==0?U:P.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,f=null,h=3,g=!1,p=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(P){for(var M=n(u);M!==null;){if(M.callback===null)s(u);else if(M.startTime<=P)s(u),M.sortIndex=M.expirationTime,e(l,M);else break;M=n(u)}}function w(P){if(m=!1,x(P),!p)if(n(l)!==null)p=!0,ee(b);else{var M=n(u);M!==null&&he(w,M.startTime-P)}}function b(P,M){p=!1,m&&(m=!1,D(C),C=-1),g=!0;var U=h;try{for(x(M),f=n(l);f!==null&&(!(f.expirationTime>M)||P&&!T());){var X=f.callback;if(typeof X=="function"){f.callback=null,h=f.priorityLevel;var K=X(f.expirationTime<=M);M=t.unstable_now(),typeof K=="function"?f.callback=K:f===n(l)&&s(l),x(M)}else s(l);f=n(l)}if(f!==null)var se=!0;else{var de=n(u);de!==null&&he(w,de.startTime-M),se=!1}return se}finally{f=null,h=U,g=!1}}var E=!1,k=null,C=-1,_=5,F=-1;function T(){return!(t.unstable_now()-F<_)}function I(){if(k!==null){var P=t.unstable_now();F=P;var M=!0;try{M=k(!0,P)}finally{M?V():(E=!1,k=null)}}else E=!1}var V;if(typeof v=="function")V=function(){v(I)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,J=ne.port2;ne.port1.onmessage=I,V=function(){J.postMessage(null)}}else V=function(){y(I,0)};function ee(P){k=P,E||(E=!0,V())}function he(P,M){C=y(function(){P(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){p||g||(p=!0,ee(b))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(P){switch(h){case 1:case 2:case 3:var M=3;break;default:M=h}var U=h;h=M;try{return P()}finally{h=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,M){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var U=h;h=P;try{return M()}finally{h=U}},t.unstable_scheduleCallback=function(P,M,U){var X=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?X+U:X):U=X,P){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=U+K,P={id:d++,callback:M,priorityLevel:P,startTime:U,expirationTime:K,sortIndex:-1},U>X?(P.sortIndex=U,e(u,P),n(l)===null&&P===n(u)&&(m?(D(C),C=-1):m=!0,he(w,U-X))):(P.sortIndex=K,e(l,P),p||g||(p=!0,ee(b))),P},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(P){var M=h;return function(){var U=h;h=M;try{return P.apply(this,arguments)}finally{h=U}}}})(mp);pp.exports=mp;var py=pp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var my=S,xt=py;function L(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gp=new Set,Gr={};function xs(t,e){Ws(t,e),Ws(t+"Capture",e)}function Ws(t,e){for(Gr[t]=e,t=0;t<e.length;t++)gp.add(e[t])}var hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jl=Object.prototype.hasOwnProperty,gy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dd={},fd={};function yy(t){return jl.call(fd,t)?!0:jl.call(dd,t)?!1:gy.test(t)?fd[t]=!0:(dd[t]=!0,!1)}function Dy(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xy(t,e,n,s){if(e===null||typeof e>"u"||Dy(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nt(t,e,n,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ve[t]=new nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ve[e]=new nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ve[t]=new nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ve[t]=new nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ve[t]=new nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ve[t]=new nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ve[t]=new nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ve[t]=new nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ve[t]=new nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yu=/[\-:]([a-z])/g;function Xu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yu,Xu);Ve[e]=new nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yu,Xu);Ve[e]=new nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yu,Xu);Ve[e]=new nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ve[t]=new nt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ve.xlinkHref=new nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ve[t]=new nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Qu(t,e,n,s){var r=Ve.hasOwnProperty(e)?Ve[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xy(e,n,r,s)&&(n=null),s||r===null?yy(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var Dn=my.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bi=Symbol.for("react.element"),ks=Symbol.for("react.portal"),_s=Symbol.for("react.fragment"),Gu=Symbol.for("react.strict_mode"),Al=Symbol.for("react.profiler"),yp=Symbol.for("react.provider"),Dp=Symbol.for("react.context"),Ju=Symbol.for("react.forward_ref"),Tl=Symbol.for("react.suspense"),Bl=Symbol.for("react.suspense_list"),Zu=Symbol.for("react.memo"),bn=Symbol.for("react.lazy"),xp=Symbol.for("react.offscreen"),hd=Symbol.iterator;function cr(t){return t===null||typeof t!="object"?null:(t=hd&&t[hd]||t["@@iterator"],typeof t=="function"?t:null)}var Se=Object.assign,Ha;function _r(t){if(Ha===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ha=e&&e[1]||""}return`
`+Ha+t}var $a=!1;function Wa(t,e){if(!t||$a)return"";$a=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){s=u}t.call(e.prototype)}else{try{throw Error()}catch(u){s=u}t()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,a=i.length-1;1<=o&&0<=a&&r[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==i[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{$a=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?_r(t):""}function vy(t){switch(t.tag){case 5:return _r(t.type);case 16:return _r("Lazy");case 13:return _r("Suspense");case 19:return _r("SuspenseList");case 0:case 2:case 15:return t=Wa(t.type,!1),t;case 11:return t=Wa(t.type.render,!1),t;case 1:return t=Wa(t.type,!0),t;default:return""}}function Pl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _s:return"Fragment";case ks:return"Portal";case Al:return"Profiler";case Gu:return"StrictMode";case Tl:return"Suspense";case Bl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Dp:return(t.displayName||"Context")+".Consumer";case yp:return(t._context.displayName||"Context")+".Provider";case Ju:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zu:return e=t.displayName||null,e!==null?e:Pl(t.type)||"Memo";case bn:e=t._payload,t=t._init;try{return Pl(t(e))}catch{}}return null}function wy(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pl(e);case 8:return e===Gu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Hn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function by(t){var e=vp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Pi(t){t._valueTracker||(t._valueTracker=by(t))}function wp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=vp(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Lo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ll(t,e){var n=e.checked;return Se({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function pd(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=Hn(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function bp(t,e){e=e.checked,e!=null&&Qu(t,"checked",e,!1)}function Ol(t,e){bp(t,e);var n=Hn(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ml(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ml(t,e.type,Hn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function md(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ml(t,e,n){(e!=="number"||Lo(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Sr=Array.isArray;function Ms(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Hn(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Rl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return Se({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function gd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(L(92));if(Sr(n)){if(1<n.length)throw Error(L(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Hn(n)}}function Cp(t,e){var n=Hn(e.value),s=Hn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function yd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ep(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Il(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ep(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Li,kp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Li=Li||document.createElement("div"),Li.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Li.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Jr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Or={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cy=["Webkit","ms","Moz","O"];Object.keys(Or).forEach(function(t){Cy.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Or[e]=Or[t]})});function _p(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Or.hasOwnProperty(t)&&Or[t]?(""+e).trim():e+"px"}function Sp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=_p(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var Ey=Se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zl(t,e){if(e){if(Ey[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function Ul(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hl=null;function ec(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $l=null,Rs=null,Is=null;function Dd(t){if(t=Ci(t)){if(typeof $l!="function")throw Error(L(280));var e=t.stateNode;e&&(e=xa(e),$l(t.stateNode,t.type,e))}}function Fp(t){Rs?Is?Is.push(t):Is=[t]:Rs=t}function Np(){if(Rs){var t=Rs,e=Is;if(Is=Rs=null,Dd(t),e)for(t=0;t<e.length;t++)Dd(e[t])}}function jp(t,e){return t(e)}function Ap(){}var Va=!1;function Tp(t,e,n){if(Va)return t(e,n);Va=!0;try{return jp(t,e,n)}finally{Va=!1,(Rs!==null||Is!==null)&&(Ap(),Np())}}function Zr(t,e){var n=t.stateNode;if(n===null)return null;var s=xa(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(L(231,e,typeof n));return n}var Wl=!1;if(hn)try{var dr={};Object.defineProperty(dr,"passive",{get:function(){Wl=!0}}),window.addEventListener("test",dr,dr),window.removeEventListener("test",dr,dr)}catch{Wl=!1}function ky(t,e,n,s,r,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Mr=!1,Oo=null,Mo=!1,Vl=null,_y={onError:function(t){Mr=!0,Oo=t}};function Sy(t,e,n,s,r,i,o,a,l){Mr=!1,Oo=null,ky.apply(_y,arguments)}function Fy(t,e,n,s,r,i,o,a,l){if(Sy.apply(this,arguments),Mr){if(Mr){var u=Oo;Mr=!1,Oo=null}else throw Error(L(198));Mo||(Mo=!0,Vl=u)}}function vs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Bp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xd(t){if(vs(t)!==t)throw Error(L(188))}function Ny(t){var e=t.alternate;if(!e){if(e=vs(t),e===null)throw Error(L(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return xd(r),t;if(i===s)return xd(r),e;i=i.sibling}throw Error(L(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,s=i;break}if(a===s){o=!0,s=r,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,s=r;break}if(a===s){o=!0,s=i,n=r;break}a=a.sibling}if(!o)throw Error(L(189))}}if(n.alternate!==s)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?t:e}function Pp(t){return t=Ny(t),t!==null?Lp(t):null}function Lp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Lp(t);if(e!==null)return e;t=t.sibling}return null}var Op=xt.unstable_scheduleCallback,vd=xt.unstable_cancelCallback,jy=xt.unstable_shouldYield,Ay=xt.unstable_requestPaint,je=xt.unstable_now,Ty=xt.unstable_getCurrentPriorityLevel,tc=xt.unstable_ImmediatePriority,Mp=xt.unstable_UserBlockingPriority,Ro=xt.unstable_NormalPriority,By=xt.unstable_LowPriority,Rp=xt.unstable_IdlePriority,ma=null,Gt=null;function Py(t){if(Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(ma,t,void 0,(t.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:My,Ly=Math.log,Oy=Math.LN2;function My(t){return t>>>=0,t===0?32:31-(Ly(t)/Oy|0)|0}var Oi=64,Mi=4194304;function Fr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Io(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?s=Fr(a):(i&=o,i!==0&&(s=Fr(i)))}else o=n&~r,o!==0?s=Fr(o):i!==0&&(s=Fr(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-zt(e),r=1<<n,s|=t[n],e&=~r;return s}function Ry(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Iy(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-zt(i),a=1<<o,l=r[o];l===-1?(!(a&n)||a&s)&&(r[o]=Ry(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function ql(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ip(){var t=Oi;return Oi<<=1,!(Oi&4194240)&&(Oi=64),t}function qa(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function wi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zt(e),t[e]=n}function zy(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-zt(n),i=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~i}}function nc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-zt(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var me=0;function zp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Up,sc,Hp,$p,Wp,Kl=!1,Ri=[],jn=null,An=null,Tn=null,ei=new Map,ti=new Map,En=[],Uy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wd(t,e){switch(t){case"focusin":case"focusout":jn=null;break;case"dragenter":case"dragleave":An=null;break;case"mouseover":case"mouseout":Tn=null;break;case"pointerover":case"pointerout":ei.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ti.delete(e.pointerId)}}function fr(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=Ci(e),e!==null&&sc(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Hy(t,e,n,s,r){switch(e){case"focusin":return jn=fr(jn,t,e,n,s,r),!0;case"dragenter":return An=fr(An,t,e,n,s,r),!0;case"mouseover":return Tn=fr(Tn,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return ei.set(i,fr(ei.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,ti.set(i,fr(ti.get(i)||null,t,e,n,s,r)),!0}return!1}function Vp(t){var e=ns(t.target);if(e!==null){var n=vs(e);if(n!==null){if(e=n.tag,e===13){if(e=Bp(n),e!==null){t.blockedOn=e,Wp(t.priority,function(){Hp(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function mo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Yl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Hl=s,n.target.dispatchEvent(s),Hl=null}else return e=Ci(n),e!==null&&sc(e),t.blockedOn=n,!1;e.shift()}return!0}function bd(t,e,n){mo(t)&&n.delete(e)}function $y(){Kl=!1,jn!==null&&mo(jn)&&(jn=null),An!==null&&mo(An)&&(An=null),Tn!==null&&mo(Tn)&&(Tn=null),ei.forEach(bd),ti.forEach(bd)}function hr(t,e){t.blockedOn===e&&(t.blockedOn=null,Kl||(Kl=!0,xt.unstable_scheduleCallback(xt.unstable_NormalPriority,$y)))}function ni(t){function e(r){return hr(r,t)}if(0<Ri.length){hr(Ri[0],t);for(var n=1;n<Ri.length;n++){var s=Ri[n];s.blockedOn===t&&(s.blockedOn=null)}}for(jn!==null&&hr(jn,t),An!==null&&hr(An,t),Tn!==null&&hr(Tn,t),ei.forEach(e),ti.forEach(e),n=0;n<En.length;n++)s=En[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<En.length&&(n=En[0],n.blockedOn===null);)Vp(n),n.blockedOn===null&&En.shift()}var zs=Dn.ReactCurrentBatchConfig,zo=!0;function Wy(t,e,n,s){var r=me,i=zs.transition;zs.transition=null;try{me=1,rc(t,e,n,s)}finally{me=r,zs.transition=i}}function Vy(t,e,n,s){var r=me,i=zs.transition;zs.transition=null;try{me=4,rc(t,e,n,s)}finally{me=r,zs.transition=i}}function rc(t,e,n,s){if(zo){var r=Yl(t,e,n,s);if(r===null)nl(t,e,s,Uo,n),wd(t,s);else if(Hy(r,t,e,n,s))s.stopPropagation();else if(wd(t,s),e&4&&-1<Uy.indexOf(t)){for(;r!==null;){var i=Ci(r);if(i!==null&&Up(i),i=Yl(t,e,n,s),i===null&&nl(t,e,s,Uo,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else nl(t,e,s,null,n)}}var Uo=null;function Yl(t,e,n,s){if(Uo=null,t=ec(s),t=ns(t),t!==null)if(e=vs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Bp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Uo=t,null}function qp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ty()){case tc:return 1;case Mp:return 4;case Ro:case By:return 16;case Rp:return 536870912;default:return 16}default:return 16}}var _n=null,ic=null,go=null;function Kp(){if(go)return go;var t,e=ic,n=e.length,s,r="value"in _n?_n.value:_n.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===r[i-s];s++);return go=r.slice(t,1<s?1-s:void 0)}function yo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ii(){return!0}function Cd(){return!1}function wt(t){function e(n,s,r,i,o){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ii:Cd,this.isPropagationStopped=Cd,this}return Se(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ii)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ii)},persist:function(){},isPersistent:Ii}),e}var rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oc=wt(rr),bi=Se({},rr,{view:0,detail:0}),qy=wt(bi),Ka,Ya,pr,ga=Se({},bi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ac,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pr&&(pr&&t.type==="mousemove"?(Ka=t.screenX-pr.screenX,Ya=t.screenY-pr.screenY):Ya=Ka=0,pr=t),Ka)},movementY:function(t){return"movementY"in t?t.movementY:Ya}}),Ed=wt(ga),Ky=Se({},ga,{dataTransfer:0}),Yy=wt(Ky),Xy=Se({},bi,{relatedTarget:0}),Xa=wt(Xy),Qy=Se({},rr,{animationName:0,elapsedTime:0,pseudoElement:0}),Gy=wt(Qy),Jy=Se({},rr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Zy=wt(Jy),eD=Se({},rr,{data:0}),kd=wt(eD),tD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=sD[t])?!!e[t]:!1}function ac(){return rD}var iD=Se({},bi,{key:function(t){if(t.key){var e=tD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=yo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?nD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ac,charCode:function(t){return t.type==="keypress"?yo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),oD=wt(iD),aD=Se({},ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_d=wt(aD),lD=Se({},bi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ac}),uD=wt(lD),cD=Se({},rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),dD=wt(cD),fD=Se({},ga,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),hD=wt(fD),pD=[9,13,27,32],lc=hn&&"CompositionEvent"in window,Rr=null;hn&&"documentMode"in document&&(Rr=document.documentMode);var mD=hn&&"TextEvent"in window&&!Rr,Yp=hn&&(!lc||Rr&&8<Rr&&11>=Rr),Sd=" ",Fd=!1;function Xp(t,e){switch(t){case"keyup":return pD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ss=!1;function gD(t,e){switch(t){case"compositionend":return Qp(e);case"keypress":return e.which!==32?null:(Fd=!0,Sd);case"textInput":return t=e.data,t===Sd&&Fd?null:t;default:return null}}function yD(t,e){if(Ss)return t==="compositionend"||!lc&&Xp(t,e)?(t=Kp(),go=ic=_n=null,Ss=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Yp&&e.locale!=="ko"?null:e.data;default:return null}}var DD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!DD[t.type]:e==="textarea"}function Gp(t,e,n,s){Fp(s),e=Ho(e,"onChange"),0<e.length&&(n=new oc("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var Ir=null,si=null;function xD(t){lm(t,0)}function ya(t){var e=js(t);if(wp(e))return t}function vD(t,e){if(t==="change")return e}var Jp=!1;if(hn){var Qa;if(hn){var Ga="oninput"in document;if(!Ga){var jd=document.createElement("div");jd.setAttribute("oninput","return;"),Ga=typeof jd.oninput=="function"}Qa=Ga}else Qa=!1;Jp=Qa&&(!document.documentMode||9<document.documentMode)}function Ad(){Ir&&(Ir.detachEvent("onpropertychange",Zp),si=Ir=null)}function Zp(t){if(t.propertyName==="value"&&ya(si)){var e=[];Gp(e,si,t,ec(t)),Tp(xD,e)}}function wD(t,e,n){t==="focusin"?(Ad(),Ir=e,si=n,Ir.attachEvent("onpropertychange",Zp)):t==="focusout"&&Ad()}function bD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ya(si)}function CD(t,e){if(t==="click")return ya(e)}function ED(t,e){if(t==="input"||t==="change")return ya(e)}function kD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ht=typeof Object.is=="function"?Object.is:kD;function ri(t,e){if(Ht(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!jl.call(e,r)||!Ht(t[r],e[r]))return!1}return!0}function Td(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Bd(t,e){var n=Td(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Td(n)}}function em(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?em(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tm(){for(var t=window,e=Lo();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Lo(t.document)}return e}function uc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _D(t){var e=tm(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&em(n.ownerDocument.documentElement,n)){if(s!==null&&uc(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!t.extend&&i>s&&(r=s,s=i,i=r),r=Bd(n,i);var o=Bd(n,s);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var SD=hn&&"documentMode"in document&&11>=document.documentMode,Fs=null,Xl=null,zr=null,Ql=!1;function Pd(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ql||Fs==null||Fs!==Lo(s)||(s=Fs,"selectionStart"in s&&uc(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),zr&&ri(zr,s)||(zr=s,s=Ho(Xl,"onSelect"),0<s.length&&(e=new oc("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Fs)))}function zi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ns={animationend:zi("Animation","AnimationEnd"),animationiteration:zi("Animation","AnimationIteration"),animationstart:zi("Animation","AnimationStart"),transitionend:zi("Transition","TransitionEnd")},Ja={},nm={};hn&&(nm=document.createElement("div").style,"AnimationEvent"in window||(delete Ns.animationend.animation,delete Ns.animationiteration.animation,delete Ns.animationstart.animation),"TransitionEvent"in window||delete Ns.transitionend.transition);function Da(t){if(Ja[t])return Ja[t];if(!Ns[t])return t;var e=Ns[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in nm)return Ja[t]=e[n];return t}var sm=Da("animationend"),rm=Da("animationiteration"),im=Da("animationstart"),om=Da("transitionend"),am=new Map,Ld="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vn(t,e){am.set(t,e),xs(e,[t])}for(var Za=0;Za<Ld.length;Za++){var el=Ld[Za],FD=el.toLowerCase(),ND=el[0].toUpperCase()+el.slice(1);Vn(FD,"on"+ND)}Vn(sm,"onAnimationEnd");Vn(rm,"onAnimationIteration");Vn(im,"onAnimationStart");Vn("dblclick","onDoubleClick");Vn("focusin","onFocus");Vn("focusout","onBlur");Vn(om,"onTransitionEnd");Ws("onMouseEnter",["mouseout","mouseover"]);Ws("onMouseLeave",["mouseout","mouseover"]);Ws("onPointerEnter",["pointerout","pointerover"]);Ws("onPointerLeave",["pointerout","pointerover"]);xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xs("onBeforeInput",["compositionend","keypress","textInput","paste"]);xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nr));function Od(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,Fy(s,e,void 0,t),t.currentTarget=null}function lm(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&r.isPropagationStopped())break e;Od(r,a,u),i=l}else for(o=0;o<s.length;o++){if(a=s[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&r.isPropagationStopped())break e;Od(r,a,u),i=l}}}if(Mo)throw t=Vl,Mo=!1,Vl=null,t}function we(t,e){var n=e[tu];n===void 0&&(n=e[tu]=new Set);var s=t+"__bubble";n.has(s)||(um(e,t,2,!1),n.add(s))}function tl(t,e,n){var s=0;e&&(s|=4),um(n,t,s,e)}var Ui="_reactListening"+Math.random().toString(36).slice(2);function ii(t){if(!t[Ui]){t[Ui]=!0,gp.forEach(function(n){n!=="selectionchange"&&(jD.has(n)||tl(n,!1,t),tl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ui]||(e[Ui]=!0,tl("selectionchange",!1,e))}}function um(t,e,n,s){switch(qp(e)){case 1:var r=Wy;break;case 4:r=Vy;break;default:r=rc}n=r.bind(null,e,n,t),r=void 0,!Wl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function nl(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=ns(a),o===null)return;if(l=o.tag,l===5||l===6){s=i=o;continue e}a=a.parentNode}}s=s.return}Tp(function(){var u=i,d=ec(n),f=[];e:{var h=am.get(t);if(h!==void 0){var g=oc,p=t;switch(t){case"keypress":if(yo(n)===0)break e;case"keydown":case"keyup":g=oD;break;case"focusin":p="focus",g=Xa;break;case"focusout":p="blur",g=Xa;break;case"beforeblur":case"afterblur":g=Xa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Ed;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Yy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=uD;break;case sm:case rm:case im:g=Gy;break;case om:g=dD;break;case"scroll":g=qy;break;case"wheel":g=hD;break;case"copy":case"cut":case"paste":g=Zy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=_d}var m=(e&4)!==0,y=!m&&t==="scroll",D=m?h!==null?h+"Capture":null:h;m=[];for(var v=u,x;v!==null;){x=v;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,D!==null&&(w=Zr(v,D),w!=null&&m.push(oi(v,w,x)))),y)break;v=v.return}0<m.length&&(h=new g(h,p,null,n,d),f.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",h&&n!==Hl&&(p=n.relatedTarget||n.fromElement)&&(ns(p)||p[pn]))break e;if((g||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,g?(p=n.relatedTarget||n.toElement,g=u,p=p?ns(p):null,p!==null&&(y=vs(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(g=null,p=u),g!==p)){if(m=Ed,w="onMouseLeave",D="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=_d,w="onPointerLeave",D="onPointerEnter",v="pointer"),y=g==null?h:js(g),x=p==null?h:js(p),h=new m(w,v+"leave",g,n,d),h.target=y,h.relatedTarget=x,w=null,ns(d)===u&&(m=new m(D,v+"enter",p,n,d),m.target=x,m.relatedTarget=y,w=m),y=w,g&&p)t:{for(m=g,D=p,v=0,x=m;x;x=Cs(x))v++;for(x=0,w=D;w;w=Cs(w))x++;for(;0<v-x;)m=Cs(m),v--;for(;0<x-v;)D=Cs(D),x--;for(;v--;){if(m===D||D!==null&&m===D.alternate)break t;m=Cs(m),D=Cs(D)}m=null}else m=null;g!==null&&Md(f,h,g,m,!1),p!==null&&y!==null&&Md(f,y,p,m,!0)}}e:{if(h=u?js(u):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var b=vD;else if(Nd(h))if(Jp)b=ED;else{b=bD;var E=wD}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(b=CD);if(b&&(b=b(t,u))){Gp(f,b,n,d);break e}E&&E(t,h,u),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&Ml(h,"number",h.value)}switch(E=u?js(u):window,t){case"focusin":(Nd(E)||E.contentEditable==="true")&&(Fs=E,Xl=u,zr=null);break;case"focusout":zr=Xl=Fs=null;break;case"mousedown":Ql=!0;break;case"contextmenu":case"mouseup":case"dragend":Ql=!1,Pd(f,n,d);break;case"selectionchange":if(SD)break;case"keydown":case"keyup":Pd(f,n,d)}var k;if(lc)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Ss?Xp(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Yp&&n.locale!=="ko"&&(Ss||C!=="onCompositionStart"?C==="onCompositionEnd"&&Ss&&(k=Kp()):(_n=d,ic="value"in _n?_n.value:_n.textContent,Ss=!0)),E=Ho(u,C),0<E.length&&(C=new kd(C,t,null,n,d),f.push({event:C,listeners:E}),k?C.data=k:(k=Qp(n),k!==null&&(C.data=k)))),(k=mD?gD(t,n):yD(t,n))&&(u=Ho(u,"onBeforeInput"),0<u.length&&(d=new kd("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=k))}lm(f,e)})}function oi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ho(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Zr(t,n),i!=null&&s.unshift(oi(t,i,r)),i=Zr(t,e),i!=null&&s.push(oi(t,i,r))),t=t.return}return s}function Cs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Md(t,e,n,s,r){for(var i=e._reactName,o=[];n!==null&&n!==s;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===s)break;a.tag===5&&u!==null&&(a=u,r?(l=Zr(n,i),l!=null&&o.unshift(oi(n,l,a))):r||(l=Zr(n,i),l!=null&&o.push(oi(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var AD=/\r\n?/g,TD=/\u0000|\uFFFD/g;function Rd(t){return(typeof t=="string"?t:""+t).replace(AD,`
`).replace(TD,"")}function Hi(t,e,n){if(e=Rd(e),Rd(t)!==e&&n)throw Error(L(425))}function $o(){}var Gl=null,Jl=null;function Zl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var eu=typeof setTimeout=="function"?setTimeout:void 0,BD=typeof clearTimeout=="function"?clearTimeout:void 0,Id=typeof Promise=="function"?Promise:void 0,PD=typeof queueMicrotask=="function"?queueMicrotask:typeof Id<"u"?function(t){return Id.resolve(null).then(t).catch(LD)}:eu;function LD(t){setTimeout(function(){throw t})}function sl(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),ni(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);ni(e)}function Bn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function zd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ir=Math.random().toString(36).slice(2),Qt="__reactFiber$"+ir,ai="__reactProps$"+ir,pn="__reactContainer$"+ir,tu="__reactEvents$"+ir,OD="__reactListeners$"+ir,MD="__reactHandles$"+ir;function ns(t){var e=t[Qt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pn]||n[Qt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=zd(t);t!==null;){if(n=t[Qt])return n;t=zd(t)}return e}t=n,n=t.parentNode}return null}function Ci(t){return t=t[Qt]||t[pn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function js(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(L(33))}function xa(t){return t[ai]||null}var nu=[],As=-1;function qn(t){return{current:t}}function Ce(t){0>As||(t.current=nu[As],nu[As]=null,As--)}function xe(t,e){As++,nu[As]=t.current,t.current=e}var $n={},Je=qn($n),lt=qn(!1),fs=$n;function Vs(t,e){var n=t.type.contextTypes;if(!n)return $n;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function ut(t){return t=t.childContextTypes,t!=null}function Wo(){Ce(lt),Ce(Je)}function Ud(t,e,n){if(Je.current!==$n)throw Error(L(168));xe(Je,e),xe(lt,n)}function cm(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(L(108,wy(t)||"Unknown",r));return Se({},n,s)}function Vo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||$n,fs=Je.current,xe(Je,t),xe(lt,lt.current),!0}function Hd(t,e,n){var s=t.stateNode;if(!s)throw Error(L(169));n?(t=cm(t,e,fs),s.__reactInternalMemoizedMergedChildContext=t,Ce(lt),Ce(Je),xe(Je,t)):Ce(lt),xe(lt,n)}var ln=null,va=!1,rl=!1;function dm(t){ln===null?ln=[t]:ln.push(t)}function RD(t){va=!0,dm(t)}function Kn(){if(!rl&&ln!==null){rl=!0;var t=0,e=me;try{var n=ln;for(me=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}ln=null,va=!1}catch(r){throw ln!==null&&(ln=ln.slice(t+1)),Op(tc,Kn),r}finally{me=e,rl=!1}}return null}var Ts=[],Bs=0,qo=null,Ko=0,Ct=[],Et=0,hs=null,cn=1,dn="";function Jn(t,e){Ts[Bs++]=Ko,Ts[Bs++]=qo,qo=t,Ko=e}function fm(t,e,n){Ct[Et++]=cn,Ct[Et++]=dn,Ct[Et++]=hs,hs=t;var s=cn;t=dn;var r=32-zt(s)-1;s&=~(1<<r),n+=1;var i=32-zt(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,cn=1<<32-zt(e)+r|n<<r|s,dn=i+t}else cn=1<<i|n<<r|s,dn=t}function cc(t){t.return!==null&&(Jn(t,1),fm(t,1,0))}function dc(t){for(;t===qo;)qo=Ts[--Bs],Ts[Bs]=null,Ko=Ts[--Bs],Ts[Bs]=null;for(;t===hs;)hs=Ct[--Et],Ct[Et]=null,dn=Ct[--Et],Ct[Et]=null,cn=Ct[--Et],Ct[Et]=null}var Dt=null,gt=null,Ee=!1,Rt=null;function hm(t,e){var n=_t(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function $d(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dt=t,gt=Bn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dt=t,gt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=hs!==null?{id:cn,overflow:dn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=_t(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dt=t,gt=null,!0):!1;default:return!1}}function su(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ru(t){if(Ee){var e=gt;if(e){var n=e;if(!$d(t,e)){if(su(t))throw Error(L(418));e=Bn(n.nextSibling);var s=Dt;e&&$d(t,e)?hm(s,n):(t.flags=t.flags&-4097|2,Ee=!1,Dt=t)}}else{if(su(t))throw Error(L(418));t.flags=t.flags&-4097|2,Ee=!1,Dt=t}}}function Wd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dt=t}function $i(t){if(t!==Dt)return!1;if(!Ee)return Wd(t),Ee=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Zl(t.type,t.memoizedProps)),e&&(e=gt)){if(su(t))throw pm(),Error(L(418));for(;e;)hm(t,e),e=Bn(e.nextSibling)}if(Wd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){gt=Bn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}gt=null}}else gt=Dt?Bn(t.stateNode.nextSibling):null;return!0}function pm(){for(var t=gt;t;)t=Bn(t.nextSibling)}function qs(){gt=Dt=null,Ee=!1}function fc(t){Rt===null?Rt=[t]:Rt.push(t)}var ID=Dn.ReactCurrentBatchConfig;function mr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var s=n.stateNode}if(!s)throw Error(L(147,t));var r=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=r.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,t))}return t}function Wi(t,e){throw t=Object.prototype.toString.call(e),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Vd(t){var e=t._init;return e(t._payload)}function mm(t){function e(D,v){if(t){var x=D.deletions;x===null?(D.deletions=[v],D.flags|=16):x.push(v)}}function n(D,v){if(!t)return null;for(;v!==null;)e(D,v),v=v.sibling;return null}function s(D,v){for(D=new Map;v!==null;)v.key!==null?D.set(v.key,v):D.set(v.index,v),v=v.sibling;return D}function r(D,v){return D=Mn(D,v),D.index=0,D.sibling=null,D}function i(D,v,x){return D.index=x,t?(x=D.alternate,x!==null?(x=x.index,x<v?(D.flags|=2,v):x):(D.flags|=2,v)):(D.flags|=1048576,v)}function o(D){return t&&D.alternate===null&&(D.flags|=2),D}function a(D,v,x,w){return v===null||v.tag!==6?(v=dl(x,D.mode,w),v.return=D,v):(v=r(v,x),v.return=D,v)}function l(D,v,x,w){var b=x.type;return b===_s?d(D,v,x.props.children,w,x.key):v!==null&&(v.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===bn&&Vd(b)===v.type)?(w=r(v,x.props),w.ref=mr(D,v,x),w.return=D,w):(w=Eo(x.type,x.key,x.props,null,D.mode,w),w.ref=mr(D,v,x),w.return=D,w)}function u(D,v,x,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=fl(x,D.mode,w),v.return=D,v):(v=r(v,x.children||[]),v.return=D,v)}function d(D,v,x,w,b){return v===null||v.tag!==7?(v=us(x,D.mode,w,b),v.return=D,v):(v=r(v,x),v.return=D,v)}function f(D,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=dl(""+v,D.mode,x),v.return=D,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Bi:return x=Eo(v.type,v.key,v.props,null,D.mode,x),x.ref=mr(D,null,v),x.return=D,x;case ks:return v=fl(v,D.mode,x),v.return=D,v;case bn:var w=v._init;return f(D,w(v._payload),x)}if(Sr(v)||cr(v))return v=us(v,D.mode,x,null),v.return=D,v;Wi(D,v)}return null}function h(D,v,x,w){var b=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return b!==null?null:a(D,v,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Bi:return x.key===b?l(D,v,x,w):null;case ks:return x.key===b?u(D,v,x,w):null;case bn:return b=x._init,h(D,v,b(x._payload),w)}if(Sr(x)||cr(x))return b!==null?null:d(D,v,x,w,null);Wi(D,x)}return null}function g(D,v,x,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return D=D.get(x)||null,a(v,D,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Bi:return D=D.get(w.key===null?x:w.key)||null,l(v,D,w,b);case ks:return D=D.get(w.key===null?x:w.key)||null,u(v,D,w,b);case bn:var E=w._init;return g(D,v,x,E(w._payload),b)}if(Sr(w)||cr(w))return D=D.get(x)||null,d(v,D,w,b,null);Wi(v,w)}return null}function p(D,v,x,w){for(var b=null,E=null,k=v,C=v=0,_=null;k!==null&&C<x.length;C++){k.index>C?(_=k,k=null):_=k.sibling;var F=h(D,k,x[C],w);if(F===null){k===null&&(k=_);break}t&&k&&F.alternate===null&&e(D,k),v=i(F,v,C),E===null?b=F:E.sibling=F,E=F,k=_}if(C===x.length)return n(D,k),Ee&&Jn(D,C),b;if(k===null){for(;C<x.length;C++)k=f(D,x[C],w),k!==null&&(v=i(k,v,C),E===null?b=k:E.sibling=k,E=k);return Ee&&Jn(D,C),b}for(k=s(D,k);C<x.length;C++)_=g(k,D,C,x[C],w),_!==null&&(t&&_.alternate!==null&&k.delete(_.key===null?C:_.key),v=i(_,v,C),E===null?b=_:E.sibling=_,E=_);return t&&k.forEach(function(T){return e(D,T)}),Ee&&Jn(D,C),b}function m(D,v,x,w){var b=cr(x);if(typeof b!="function")throw Error(L(150));if(x=b.call(x),x==null)throw Error(L(151));for(var E=b=null,k=v,C=v=0,_=null,F=x.next();k!==null&&!F.done;C++,F=x.next()){k.index>C?(_=k,k=null):_=k.sibling;var T=h(D,k,F.value,w);if(T===null){k===null&&(k=_);break}t&&k&&T.alternate===null&&e(D,k),v=i(T,v,C),E===null?b=T:E.sibling=T,E=T,k=_}if(F.done)return n(D,k),Ee&&Jn(D,C),b;if(k===null){for(;!F.done;C++,F=x.next())F=f(D,F.value,w),F!==null&&(v=i(F,v,C),E===null?b=F:E.sibling=F,E=F);return Ee&&Jn(D,C),b}for(k=s(D,k);!F.done;C++,F=x.next())F=g(k,D,C,F.value,w),F!==null&&(t&&F.alternate!==null&&k.delete(F.key===null?C:F.key),v=i(F,v,C),E===null?b=F:E.sibling=F,E=F);return t&&k.forEach(function(I){return e(D,I)}),Ee&&Jn(D,C),b}function y(D,v,x,w){if(typeof x=="object"&&x!==null&&x.type===_s&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Bi:e:{for(var b=x.key,E=v;E!==null;){if(E.key===b){if(b=x.type,b===_s){if(E.tag===7){n(D,E.sibling),v=r(E,x.props.children),v.return=D,D=v;break e}}else if(E.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===bn&&Vd(b)===E.type){n(D,E.sibling),v=r(E,x.props),v.ref=mr(D,E,x),v.return=D,D=v;break e}n(D,E);break}else e(D,E);E=E.sibling}x.type===_s?(v=us(x.props.children,D.mode,w,x.key),v.return=D,D=v):(w=Eo(x.type,x.key,x.props,null,D.mode,w),w.ref=mr(D,v,x),w.return=D,D=w)}return o(D);case ks:e:{for(E=x.key;v!==null;){if(v.key===E)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(D,v.sibling),v=r(v,x.children||[]),v.return=D,D=v;break e}else{n(D,v);break}else e(D,v);v=v.sibling}v=fl(x,D.mode,w),v.return=D,D=v}return o(D);case bn:return E=x._init,y(D,v,E(x._payload),w)}if(Sr(x))return p(D,v,x,w);if(cr(x))return m(D,v,x,w);Wi(D,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(D,v.sibling),v=r(v,x),v.return=D,D=v):(n(D,v),v=dl(x,D.mode,w),v.return=D,D=v),o(D)):n(D,v)}return y}var Ks=mm(!0),gm=mm(!1),Yo=qn(null),Xo=null,Ps=null,hc=null;function pc(){hc=Ps=Xo=null}function mc(t){var e=Yo.current;Ce(Yo),t._currentValue=e}function iu(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Us(t,e){Xo=t,hc=Ps=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(at=!0),t.firstContext=null)}function jt(t){var e=t._currentValue;if(hc!==t)if(t={context:t,memoizedValue:e,next:null},Ps===null){if(Xo===null)throw Error(L(308));Ps=t,Xo.dependencies={lanes:0,firstContext:t}}else Ps=Ps.next=t;return e}var ss=null;function gc(t){ss===null?ss=[t]:ss.push(t)}function ym(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,gc(e)):(n.next=r.next,r.next=n),e.interleaved=n,mn(t,s)}function mn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Cn=!1;function yc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function fn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Pn(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,ce&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,mn(t,n)}return r=s.interleaved,r===null?(e.next=e,gc(s)):(e.next=r.next,r.next=e),s.interleaved=e,mn(t,n)}function Do(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,nc(t,n)}}function qd(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Qo(t,e,n,s){var r=t.updateQueue;Cn=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(i!==null){var f=r.baseState;o=0,d=u=l=null,a=i;do{var h=a.lane,g=a.eventTime;if((s&h)===h){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(h=e,g=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(g,f,h);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(g,f,h):p,h==null)break e;f=Se({},f,h);break e;case 2:Cn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[a]:h.push(a))}else g={eventTime:g,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=g,l=f):d=d.next=g,o|=h;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);if(d===null&&(l=f),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);ms|=o,t.lanes=o,t.memoizedState=f}}function Kd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(L(191,r));r.call(s)}}}var Ei={},Jt=qn(Ei),li=qn(Ei),ui=qn(Ei);function rs(t){if(t===Ei)throw Error(L(174));return t}function Dc(t,e){switch(xe(ui,e),xe(li,t),xe(Jt,Ei),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Il(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Il(e,t)}Ce(Jt),xe(Jt,e)}function Ys(){Ce(Jt),Ce(li),Ce(ui)}function xm(t){rs(ui.current);var e=rs(Jt.current),n=Il(e,t.type);e!==n&&(xe(li,t),xe(Jt,n))}function xc(t){li.current===t&&(Ce(Jt),Ce(li))}var ke=qn(0);function Go(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var il=[];function vc(){for(var t=0;t<il.length;t++)il[t]._workInProgressVersionPrimary=null;il.length=0}var xo=Dn.ReactCurrentDispatcher,ol=Dn.ReactCurrentBatchConfig,ps=0,_e=null,Le=null,Ie=null,Jo=!1,Ur=!1,ci=0,zD=0;function qe(){throw Error(L(321))}function wc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ht(t[n],e[n]))return!1;return!0}function bc(t,e,n,s,r,i){if(ps=i,_e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xo.current=t===null||t.memoizedState===null?WD:VD,t=n(s,r),Ur){i=0;do{if(Ur=!1,ci=0,25<=i)throw Error(L(301));i+=1,Ie=Le=null,e.updateQueue=null,xo.current=qD,t=n(s,r)}while(Ur)}if(xo.current=Zo,e=Le!==null&&Le.next!==null,ps=0,Ie=Le=_e=null,Jo=!1,e)throw Error(L(300));return t}function Cc(){var t=ci!==0;return ci=0,t}function Yt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ie===null?_e.memoizedState=Ie=t:Ie=Ie.next=t,Ie}function At(){if(Le===null){var t=_e.alternate;t=t!==null?t.memoizedState:null}else t=Le.next;var e=Ie===null?_e.memoizedState:Ie.next;if(e!==null)Ie=e,Le=t;else{if(t===null)throw Error(L(310));Le=t,t={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},Ie===null?_e.memoizedState=Ie=t:Ie=Ie.next=t}return Ie}function di(t,e){return typeof e=="function"?e(t):e}function al(t){var e=At(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var s=Le,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var a=o=null,l=null,u=i;do{var d=u.lane;if((ps&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:t(s,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=s):l=l.next=f,_e.lanes|=d,ms|=d}u=u.next}while(u!==null&&u!==i);l===null?o=s:l.next=a,Ht(s,e.memoizedState)||(at=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=l,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do i=r.lane,_e.lanes|=i,ms|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ll(t){var e=At(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);Ht(i,e.memoizedState)||(at=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function vm(){}function wm(t,e){var n=_e,s=At(),r=e(),i=!Ht(s.memoizedState,r);if(i&&(s.memoizedState=r,at=!0),s=s.queue,Ec(Em.bind(null,n,s,t),[t]),s.getSnapshot!==e||i||Ie!==null&&Ie.memoizedState.tag&1){if(n.flags|=2048,fi(9,Cm.bind(null,n,s,r,e),void 0,null),Ue===null)throw Error(L(349));ps&30||bm(n,e,r)}return r}function bm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Cm(t,e,n,s){e.value=n,e.getSnapshot=s,km(e)&&_m(t)}function Em(t,e,n){return n(function(){km(e)&&_m(t)})}function km(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ht(t,n)}catch{return!0}}function _m(t){var e=mn(t,1);e!==null&&Ut(e,t,1,-1)}function Yd(t){var e=Yt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:t},e.queue=t,t=t.dispatch=$D.bind(null,_e,t),[e.memoizedState,t]}function fi(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function Sm(){return At().memoizedState}function vo(t,e,n,s){var r=Yt();_e.flags|=t,r.memoizedState=fi(1|e,n,void 0,s===void 0?null:s)}function wa(t,e,n,s){var r=At();s=s===void 0?null:s;var i=void 0;if(Le!==null){var o=Le.memoizedState;if(i=o.destroy,s!==null&&wc(s,o.deps)){r.memoizedState=fi(e,n,i,s);return}}_e.flags|=t,r.memoizedState=fi(1|e,n,i,s)}function Xd(t,e){return vo(8390656,8,t,e)}function Ec(t,e){return wa(2048,8,t,e)}function Fm(t,e){return wa(4,2,t,e)}function Nm(t,e){return wa(4,4,t,e)}function jm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Am(t,e,n){return n=n!=null?n.concat([t]):null,wa(4,4,jm.bind(null,e,t),n)}function kc(){}function Tm(t,e){var n=At();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&wc(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function Bm(t,e){var n=At();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&wc(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function Pm(t,e,n){return ps&21?(Ht(n,e)||(n=Ip(),_e.lanes|=n,ms|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,at=!0),t.memoizedState=n)}function UD(t,e){var n=me;me=n!==0&&4>n?n:4,t(!0);var s=ol.transition;ol.transition={};try{t(!1),e()}finally{me=n,ol.transition=s}}function Lm(){return At().memoizedState}function HD(t,e,n){var s=On(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Om(t))Mm(e,n);else if(n=ym(t,e,n,s),n!==null){var r=et();Ut(n,t,s,r),Rm(n,e,s)}}function $D(t,e,n){var s=On(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Om(t))Mm(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(r.hasEagerState=!0,r.eagerState=a,Ht(a,o)){var l=e.interleaved;l===null?(r.next=r,gc(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=ym(t,e,r,s),n!==null&&(r=et(),Ut(n,t,s,r),Rm(n,e,s))}}function Om(t){var e=t.alternate;return t===_e||e!==null&&e===_e}function Mm(t,e){Ur=Jo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Rm(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,nc(t,n)}}var Zo={readContext:jt,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useInsertionEffect:qe,useLayoutEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useMutableSource:qe,useSyncExternalStore:qe,useId:qe,unstable_isNewReconciler:!1},WD={readContext:jt,useCallback:function(t,e){return Yt().memoizedState=[t,e===void 0?null:e],t},useContext:jt,useEffect:Xd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,vo(4194308,4,jm.bind(null,e,t),n)},useLayoutEffect:function(t,e){return vo(4194308,4,t,e)},useInsertionEffect:function(t,e){return vo(4,2,t,e)},useMemo:function(t,e){var n=Yt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=Yt();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=HD.bind(null,_e,t),[s.memoizedState,t]},useRef:function(t){var e=Yt();return t={current:t},e.memoizedState=t},useState:Yd,useDebugValue:kc,useDeferredValue:function(t){return Yt().memoizedState=t},useTransition:function(){var t=Yd(!1),e=t[0];return t=UD.bind(null,t[1]),Yt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=_e,r=Yt();if(Ee){if(n===void 0)throw Error(L(407));n=n()}else{if(n=e(),Ue===null)throw Error(L(349));ps&30||bm(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,Xd(Em.bind(null,s,i,t),[t]),s.flags|=2048,fi(9,Cm.bind(null,s,i,n,e),void 0,null),n},useId:function(){var t=Yt(),e=Ue.identifierPrefix;if(Ee){var n=dn,s=cn;n=(s&~(1<<32-zt(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=ci++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=zD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},VD={readContext:jt,useCallback:Tm,useContext:jt,useEffect:Ec,useImperativeHandle:Am,useInsertionEffect:Fm,useLayoutEffect:Nm,useMemo:Bm,useReducer:al,useRef:Sm,useState:function(){return al(di)},useDebugValue:kc,useDeferredValue:function(t){var e=At();return Pm(e,Le.memoizedState,t)},useTransition:function(){var t=al(di)[0],e=At().memoizedState;return[t,e]},useMutableSource:vm,useSyncExternalStore:wm,useId:Lm,unstable_isNewReconciler:!1},qD={readContext:jt,useCallback:Tm,useContext:jt,useEffect:Ec,useImperativeHandle:Am,useInsertionEffect:Fm,useLayoutEffect:Nm,useMemo:Bm,useReducer:ll,useRef:Sm,useState:function(){return ll(di)},useDebugValue:kc,useDeferredValue:function(t){var e=At();return Le===null?e.memoizedState=t:Pm(e,Le.memoizedState,t)},useTransition:function(){var t=ll(di)[0],e=At().memoizedState;return[t,e]},useMutableSource:vm,useSyncExternalStore:wm,useId:Lm,unstable_isNewReconciler:!1};function Lt(t,e){if(t&&t.defaultProps){e=Se({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ou(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:Se({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ba={isMounted:function(t){return(t=t._reactInternals)?vs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=et(),r=On(t),i=fn(s,r);i.payload=e,n!=null&&(i.callback=n),e=Pn(t,i,r),e!==null&&(Ut(e,t,r,s),Do(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=et(),r=On(t),i=fn(s,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Pn(t,i,r),e!==null&&(Ut(e,t,r,s),Do(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=et(),s=On(t),r=fn(n,s);r.tag=2,e!=null&&(r.callback=e),e=Pn(t,r,s),e!==null&&(Ut(e,t,s,n),Do(e,t,s))}};function Qd(t,e,n,s,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!ri(n,s)||!ri(r,i):!0}function Im(t,e,n){var s=!1,r=$n,i=e.contextType;return typeof i=="object"&&i!==null?i=jt(i):(r=ut(e)?fs:Je.current,s=e.contextTypes,i=(s=s!=null)?Vs(t,r):$n),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ba,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function Gd(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&ba.enqueueReplaceState(e,e.state,null)}function au(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},yc(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=jt(i):(i=ut(e)?fs:Je.current,r.context=Vs(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ou(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&ba.enqueueReplaceState(r,r.state,null),Qo(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Xs(t,e){try{var n="",s=e;do n+=vy(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function ul(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function lu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var KD=typeof WeakMap=="function"?WeakMap:Map;function zm(t,e,n){n=fn(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){ta||(ta=!0,Du=s),lu(t,e)},n}function Um(t,e,n){n=fn(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){lu(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){lu(t,e),typeof s!="function"&&(Ln===null?Ln=new Set([this]):Ln.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Jd(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new KD;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=ax.bind(null,t,e,n),e.then(t,t))}function Zd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ef(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=fn(-1,1),e.tag=2,Pn(n,e,1))),n.lanes|=1),t)}var YD=Dn.ReactCurrentOwner,at=!1;function Ze(t,e,n,s){e.child=t===null?gm(e,null,n,s):Ks(e,t.child,n,s)}function tf(t,e,n,s,r){n=n.render;var i=e.ref;return Us(e,r),s=bc(t,e,n,s,i,r),n=Cc(),t!==null&&!at?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,gn(t,e,r)):(Ee&&n&&cc(e),e.flags|=1,Ze(t,e,s,r),e.child)}function nf(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!Bc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Hm(t,e,i,s,r)):(t=Eo(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ri,n(o,s)&&t.ref===e.ref)return gn(t,e,r)}return e.flags|=1,t=Mn(i,s),t.ref=e.ref,t.return=e,e.child=t}function Hm(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(ri(i,s)&&t.ref===e.ref)if(at=!1,e.pendingProps=s=i,(t.lanes&r)!==0)t.flags&131072&&(at=!0);else return e.lanes=t.lanes,gn(t,e,r)}return uu(t,e,n,s,r)}function $m(t,e,n){var s=e.pendingProps,r=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(Os,mt),mt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xe(Os,mt),mt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,xe(Os,mt),mt|=s}else i!==null?(s=i.baseLanes|n,e.memoizedState=null):s=n,xe(Os,mt),mt|=s;return Ze(t,e,r,n),e.child}function Wm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function uu(t,e,n,s,r){var i=ut(n)?fs:Je.current;return i=Vs(e,i),Us(e,r),n=bc(t,e,n,s,i,r),s=Cc(),t!==null&&!at?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,gn(t,e,r)):(Ee&&s&&cc(e),e.flags|=1,Ze(t,e,n,r),e.child)}function sf(t,e,n,s,r){if(ut(n)){var i=!0;Vo(e)}else i=!1;if(Us(e,r),e.stateNode===null)wo(t,e),Im(e,n,s),au(e,n,s,r),s=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=jt(u):(u=ut(n)?fs:Je.current,u=Vs(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||l!==u)&&Gd(e,o,s,u),Cn=!1;var h=e.memoizedState;o.state=h,Qo(e,s,o,r),l=e.memoizedState,a!==s||h!==l||lt.current||Cn?(typeof d=="function"&&(ou(e,n,d,s),l=e.memoizedState),(a=Cn||Qd(e,n,a,s,h,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),o.props=s,o.state=l,o.context=u,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,Dm(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Lt(e.type,a),o.props=u,f=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=jt(l):(l=ut(n)?fs:Je.current,l=Vs(e,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||h!==l)&&Gd(e,o,s,l),Cn=!1,h=e.memoizedState,o.state=h,Qo(e,s,o,r);var p=e.memoizedState;a!==f||h!==p||lt.current||Cn?(typeof g=="function"&&(ou(e,n,g,s),p=e.memoizedState),(u=Cn||Qd(e,n,u,s,h,p,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=p),o.props=s,o.state=p,o.context=l,s=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),s=!1)}return cu(t,e,n,s,i,r)}function cu(t,e,n,s,r,i){Wm(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&Hd(e,n,!1),gn(t,e,i);s=e.stateNode,YD.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=Ks(e,t.child,null,i),e.child=Ks(e,null,a,i)):Ze(t,e,a,i),e.memoizedState=s.state,r&&Hd(e,n,!0),e.child}function Vm(t){var e=t.stateNode;e.pendingContext?Ud(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ud(t,e.context,!1),Dc(t,e.containerInfo)}function rf(t,e,n,s,r){return qs(),fc(r),e.flags|=256,Ze(t,e,n,s),e.child}var du={dehydrated:null,treeContext:null,retryLane:0};function fu(t){return{baseLanes:t,cachePool:null,transitions:null}}function qm(t,e,n){var s=e.pendingProps,r=ke.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),xe(ke,r&1),t===null)return ru(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ka(o,s,0,null),t=us(t,s,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=fu(n),e.memoizedState=du,t):_c(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return XD(t,e,o,s,a,r,n);if(i){i=s.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=l,e.deletions=null):(s=Mn(r,l),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?i=Mn(a,i):(i=us(i,o,n,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o=o===null?fu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=du,s}return i=t.child,t=i.sibling,s=Mn(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function _c(t,e){return e=ka({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vi(t,e,n,s){return s!==null&&fc(s),Ks(e,t.child,null,n),t=_c(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function XD(t,e,n,s,r,i,o){if(n)return e.flags&256?(e.flags&=-257,s=ul(Error(L(422))),Vi(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=ka({mode:"visible",children:s.children},r,0,null),i=us(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&Ks(e,t.child,null,o),e.child.memoizedState=fu(o),e.memoizedState=du,i);if(!(e.mode&1))return Vi(t,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,i=Error(L(419)),s=ul(i,s,void 0),Vi(t,e,o,s)}if(a=(o&t.childLanes)!==0,at||a){if(s=Ue,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,mn(t,r),Ut(s,t,r,-1))}return Tc(),s=ul(Error(L(421))),Vi(t,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=lx.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,gt=Bn(r.nextSibling),Dt=e,Ee=!0,Rt=null,t!==null&&(Ct[Et++]=cn,Ct[Et++]=dn,Ct[Et++]=hs,cn=t.id,dn=t.overflow,hs=e),e=_c(e,s.children),e.flags|=4096,e)}function of(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),iu(t.return,e,n)}function cl(t,e,n,s,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function Km(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(Ze(t,e,s.children,n),s=ke.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&of(t,n,e);else if(t.tag===19)of(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(xe(ke,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Go(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),cl(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Go(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}cl(e,!0,n,null,i);break;case"together":cl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function wo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ms|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(L(153));if(e.child!==null){for(t=e.child,n=Mn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Mn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function QD(t,e,n){switch(e.tag){case 3:Vm(e),qs();break;case 5:xm(e);break;case 1:ut(e.type)&&Vo(e);break;case 4:Dc(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;xe(Yo,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(xe(ke,ke.current&1),e.flags|=128,null):n&e.child.childLanes?qm(t,e,n):(xe(ke,ke.current&1),t=gn(t,e,n),t!==null?t.sibling:null);xe(ke,ke.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return Km(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),xe(ke,ke.current),s)break;return null;case 22:case 23:return e.lanes=0,$m(t,e,n)}return gn(t,e,n)}var Ym,hu,Xm,Qm;Ym=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hu=function(){};Xm=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,rs(Jt.current);var i=null;switch(n){case"input":r=Ll(t,r),s=Ll(t,s),i=[];break;case"select":r=Se({},r,{value:void 0}),s=Se({},s,{value:void 0}),i=[];break;case"textarea":r=Rl(t,r),s=Rl(t,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=$o)}zl(n,s);var o;n=null;for(u in r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Gr.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var l=s[u];if(a=r!=null?r[u]:void 0,s.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Gr.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&we("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Qm=function(t,e,n,s){n!==s&&(e.flags|=4)};function gr(t,e){if(!Ee)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Ke(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function GD(t,e,n){var s=e.pendingProps;switch(dc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(e),null;case 1:return ut(e.type)&&Wo(),Ke(e),null;case 3:return s=e.stateNode,Ys(),Ce(lt),Ce(Je),vc(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&($i(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rt!==null&&(wu(Rt),Rt=null))),hu(t,e),Ke(e),null;case 5:xc(e);var r=rs(ui.current);if(n=e.type,t!==null&&e.stateNode!=null)Xm(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(L(166));return Ke(e),null}if(t=rs(Jt.current),$i(e)){s=e.stateNode,n=e.type;var i=e.memoizedProps;switch(s[Qt]=e,s[ai]=i,t=(e.mode&1)!==0,n){case"dialog":we("cancel",s),we("close",s);break;case"iframe":case"object":case"embed":we("load",s);break;case"video":case"audio":for(r=0;r<Nr.length;r++)we(Nr[r],s);break;case"source":we("error",s);break;case"img":case"image":case"link":we("error",s),we("load",s);break;case"details":we("toggle",s);break;case"input":pd(s,i),we("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},we("invalid",s);break;case"textarea":gd(s,i),we("invalid",s)}zl(n,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?s.textContent!==a&&(i.suppressHydrationWarning!==!0&&Hi(s.textContent,a,t),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Hi(s.textContent,a,t),r=["children",""+a]):Gr.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&we("scroll",s)}switch(n){case"input":Pi(s),md(s,i,!0);break;case"textarea":Pi(s),yd(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=$o)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ep(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[Qt]=e,t[ai]=s,Ym(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ul(n,s),n){case"dialog":we("cancel",t),we("close",t),r=s;break;case"iframe":case"object":case"embed":we("load",t),r=s;break;case"video":case"audio":for(r=0;r<Nr.length;r++)we(Nr[r],t);r=s;break;case"source":we("error",t),r=s;break;case"img":case"image":case"link":we("error",t),we("load",t),r=s;break;case"details":we("toggle",t),r=s;break;case"input":pd(t,s),r=Ll(t,s),we("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=Se({},s,{value:void 0}),we("invalid",t);break;case"textarea":gd(t,s),r=Rl(t,s),we("invalid",t);break;default:r=s}zl(n,r),a=r;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Sp(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&kp(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Jr(t,l):typeof l=="number"&&Jr(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Gr.hasOwnProperty(i)?l!=null&&i==="onScroll"&&we("scroll",t):l!=null&&Qu(t,i,l,o))}switch(n){case"input":Pi(t),md(t,s,!1);break;case"textarea":Pi(t),yd(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Hn(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?Ms(t,!!s.multiple,i,!1):s.defaultValue!=null&&Ms(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=$o)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ke(e),null;case 6:if(t&&e.stateNode!=null)Qm(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(L(166));if(n=rs(ui.current),rs(Jt.current),$i(e)){if(s=e.stateNode,n=e.memoizedProps,s[Qt]=e,(i=s.nodeValue!==n)&&(t=Dt,t!==null))switch(t.tag){case 3:Hi(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hi(s.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Qt]=e,e.stateNode=s}return Ke(e),null;case 13:if(Ce(ke),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ee&&gt!==null&&e.mode&1&&!(e.flags&128))pm(),qs(),e.flags|=98560,i=!1;else if(i=$i(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(L(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(L(317));i[Qt]=e}else qs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ke(e),i=!1}else Rt!==null&&(wu(Rt),Rt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||ke.current&1?Oe===0&&(Oe=3):Tc())),e.updateQueue!==null&&(e.flags|=4),Ke(e),null);case 4:return Ys(),hu(t,e),t===null&&ii(e.stateNode.containerInfo),Ke(e),null;case 10:return mc(e.type._context),Ke(e),null;case 17:return ut(e.type)&&Wo(),Ke(e),null;case 19:if(Ce(ke),i=e.memoizedState,i===null)return Ke(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)gr(i,!1);else{if(Oe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Go(t),o!==null){for(e.flags|=128,gr(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)i=n,t=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return xe(ke,ke.current&1|2),e.child}t=t.sibling}i.tail!==null&&je()>Qs&&(e.flags|=128,s=!0,gr(i,!1),e.lanes=4194304)}else{if(!s)if(t=Go(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),gr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ee)return Ke(e),null}else 2*je()-i.renderingStartTime>Qs&&n!==1073741824&&(e.flags|=128,s=!0,gr(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=je(),e.sibling=null,n=ke.current,xe(ke,s?n&1|2:n&1),e):(Ke(e),null);case 22:case 23:return Ac(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?mt&1073741824&&(Ke(e),e.subtreeFlags&6&&(e.flags|=8192)):Ke(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function JD(t,e){switch(dc(e),e.tag){case 1:return ut(e.type)&&Wo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ys(),Ce(lt),Ce(Je),vc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return xc(e),null;case 13:if(Ce(ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(L(340));qs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ce(ke),null;case 4:return Ys(),null;case 10:return mc(e.type._context),null;case 22:case 23:return Ac(),null;case 24:return null;default:return null}}var qi=!1,Xe=!1,ZD=typeof WeakSet=="function"?WeakSet:Set,W=null;function Ls(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Ne(t,e,s)}else n.current=null}function pu(t,e,n){try{n()}catch(s){Ne(t,e,s)}}var af=!1;function ex(t,e){if(Gl=zo,t=tm(),uc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,f=t,h=null;t:for(;;){for(var g;f!==n||r!==0&&f.nodeType!==3||(a=o+r),f!==i||s!==0&&f.nodeType!==3||(l=o+s),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)h=f,f=g;for(;;){if(f===t)break t;if(h===n&&++u===r&&(a=o),h===i&&++d===s&&(l=o),(g=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jl={focusedElem:t,selectionRange:n},zo=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,y=p.memoizedState,D=e.stateNode,v=D.getSnapshotBeforeUpdate(e.elementType===e.type?m:Lt(e.type,m),y);D.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(w){Ne(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return p=af,af=!1,p}function Hr(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&pu(e,n,i)}r=r.next}while(r!==s)}}function Ca(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function mu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Gm(t){var e=t.alternate;e!==null&&(t.alternate=null,Gm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qt],delete e[ai],delete e[tu],delete e[OD],delete e[MD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Jm(t){return t.tag===5||t.tag===3||t.tag===4}function lf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Jm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gu(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=$o));else if(s!==4&&(t=t.child,t!==null))for(gu(t,e,n),t=t.sibling;t!==null;)gu(t,e,n),t=t.sibling}function yu(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(yu(t,e,n),t=t.sibling;t!==null;)yu(t,e,n),t=t.sibling}var $e=null,Ot=!1;function xn(t,e,n){for(n=n.child;n!==null;)Zm(t,e,n),n=n.sibling}function Zm(t,e,n){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(ma,n)}catch{}switch(n.tag){case 5:Xe||Ls(n,e);case 6:var s=$e,r=Ot;$e=null,xn(t,e,n),$e=s,Ot=r,$e!==null&&(Ot?(t=$e,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$e.removeChild(n.stateNode));break;case 18:$e!==null&&(Ot?(t=$e,n=n.stateNode,t.nodeType===8?sl(t.parentNode,n):t.nodeType===1&&sl(t,n),ni(t)):sl($e,n.stateNode));break;case 4:s=$e,r=Ot,$e=n.stateNode.containerInfo,Ot=!0,xn(t,e,n),$e=s,Ot=r;break;case 0:case 11:case 14:case 15:if(!Xe&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&pu(n,e,o),r=r.next}while(r!==s)}xn(t,e,n);break;case 1:if(!Xe&&(Ls(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(a){Ne(n,e,a)}xn(t,e,n);break;case 21:xn(t,e,n);break;case 22:n.mode&1?(Xe=(s=Xe)||n.memoizedState!==null,xn(t,e,n),Xe=s):xn(t,e,n);break;default:xn(t,e,n)}}function uf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ZD),e.forEach(function(s){var r=ux.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function Pt(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:$e=a.stateNode,Ot=!1;break e;case 3:$e=a.stateNode.containerInfo,Ot=!0;break e;case 4:$e=a.stateNode.containerInfo,Ot=!0;break e}a=a.return}if($e===null)throw Error(L(160));Zm(i,o,r),$e=null,Ot=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){Ne(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)eg(e,t),e=e.sibling}function eg(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Pt(e,t),Wt(t),s&4){try{Hr(3,t,t.return),Ca(3,t)}catch(m){Ne(t,t.return,m)}try{Hr(5,t,t.return)}catch(m){Ne(t,t.return,m)}}break;case 1:Pt(e,t),Wt(t),s&512&&n!==null&&Ls(n,n.return);break;case 5:if(Pt(e,t),Wt(t),s&512&&n!==null&&Ls(n,n.return),t.flags&32){var r=t.stateNode;try{Jr(r,"")}catch(m){Ne(t,t.return,m)}}if(s&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&bp(r,i),Ul(a,o);var u=Ul(a,i);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?Sp(r,f):d==="dangerouslySetInnerHTML"?kp(r,f):d==="children"?Jr(r,f):Qu(r,d,f,u)}switch(a){case"input":Ol(r,i);break;case"textarea":Cp(r,i);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Ms(r,!!i.multiple,g,!1):h!==!!i.multiple&&(i.defaultValue!=null?Ms(r,!!i.multiple,i.defaultValue,!0):Ms(r,!!i.multiple,i.multiple?[]:"",!1))}r[ai]=i}catch(m){Ne(t,t.return,m)}}break;case 6:if(Pt(e,t),Wt(t),s&4){if(t.stateNode===null)throw Error(L(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(m){Ne(t,t.return,m)}}break;case 3:if(Pt(e,t),Wt(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{ni(e.containerInfo)}catch(m){Ne(t,t.return,m)}break;case 4:Pt(e,t),Wt(t);break;case 13:Pt(e,t),Wt(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(Nc=je())),s&4&&uf(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Xe=(u=Xe)||d,Pt(e,t),Xe=u):Pt(e,t),Wt(t),s&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(W=t,d=t.child;d!==null;){for(f=W=d;W!==null;){switch(h=W,g=h.child,h.tag){case 0:case 11:case 14:case 15:Hr(4,h,h.return);break;case 1:Ls(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){s=h,n=h.return;try{e=s,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Ne(s,n,m)}}break;case 5:Ls(h,h.return);break;case 22:if(h.memoizedState!==null){df(f);continue}}g!==null?(g.return=h,W=g):df(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{r=f.stateNode,u?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=_p("display",o))}catch(m){Ne(t,t.return,m)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(m){Ne(t,t.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Pt(e,t),Wt(t),s&4&&uf(t);break;case 21:break;default:Pt(e,t),Wt(t)}}function Wt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Jm(n)){var s=n;break e}n=n.return}throw Error(L(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(Jr(r,""),s.flags&=-33);var i=lf(t);yu(t,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,a=lf(t);gu(t,a,o);break;default:throw Error(L(161))}}catch(l){Ne(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function tx(t,e,n){W=t,tg(t)}function tg(t,e,n){for(var s=(t.mode&1)!==0;W!==null;){var r=W,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||qi;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Xe;a=qi;var u=Xe;if(qi=o,(Xe=l)&&!u)for(W=r;W!==null;)o=W,l=o.child,o.tag===22&&o.memoizedState!==null?ff(r):l!==null?(l.return=o,W=l):ff(r);for(;i!==null;)W=i,tg(i),i=i.sibling;W=r,qi=a,Xe=u}cf(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,W=i):cf(t)}}function cf(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Xe||Ca(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Xe)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Lt(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Kd(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Kd(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&ni(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}Xe||e.flags&512&&mu(e)}catch(h){Ne(e,e.return,h)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function df(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function ff(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ca(4,e)}catch(l){Ne(e,n,l)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(l){Ne(e,r,l)}}var i=e.return;try{mu(e)}catch(l){Ne(e,i,l)}break;case 5:var o=e.return;try{mu(e)}catch(l){Ne(e,o,l)}}}catch(l){Ne(e,e.return,l)}if(e===t){W=null;break}var a=e.sibling;if(a!==null){a.return=e.return,W=a;break}W=e.return}}var nx=Math.ceil,ea=Dn.ReactCurrentDispatcher,Sc=Dn.ReactCurrentOwner,Nt=Dn.ReactCurrentBatchConfig,ce=0,Ue=null,Te=null,We=0,mt=0,Os=qn(0),Oe=0,hi=null,ms=0,Ea=0,Fc=0,$r=null,it=null,Nc=0,Qs=1/0,an=null,ta=!1,Du=null,Ln=null,Ki=!1,Sn=null,na=0,Wr=0,xu=null,bo=-1,Co=0;function et(){return ce&6?je():bo!==-1?bo:bo=je()}function On(t){return t.mode&1?ce&2&&We!==0?We&-We:ID.transition!==null?(Co===0&&(Co=Ip()),Co):(t=me,t!==0||(t=window.event,t=t===void 0?16:qp(t.type)),t):1}function Ut(t,e,n,s){if(50<Wr)throw Wr=0,xu=null,Error(L(185));wi(t,n,s),(!(ce&2)||t!==Ue)&&(t===Ue&&(!(ce&2)&&(Ea|=n),Oe===4&&kn(t,We)),ct(t,s),n===1&&ce===0&&!(e.mode&1)&&(Qs=je()+500,va&&Kn()))}function ct(t,e){var n=t.callbackNode;Iy(t,e);var s=Io(t,t===Ue?We:0);if(s===0)n!==null&&vd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&vd(n),e===1)t.tag===0?RD(hf.bind(null,t)):dm(hf.bind(null,t)),PD(function(){!(ce&6)&&Kn()}),n=null;else{switch(zp(s)){case 1:n=tc;break;case 4:n=Mp;break;case 16:n=Ro;break;case 536870912:n=Rp;break;default:n=Ro}n=ug(n,ng.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ng(t,e){if(bo=-1,Co=0,ce&6)throw Error(L(327));var n=t.callbackNode;if(Hs()&&t.callbackNode!==n)return null;var s=Io(t,t===Ue?We:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=sa(t,s);else{e=s;var r=ce;ce|=2;var i=rg();(Ue!==t||We!==e)&&(an=null,Qs=je()+500,ls(t,e));do try{ix();break}catch(a){sg(t,a)}while(!0);pc(),ea.current=i,ce=r,Te!==null?e=0:(Ue=null,We=0,e=Oe)}if(e!==0){if(e===2&&(r=ql(t),r!==0&&(s=r,e=vu(t,r))),e===1)throw n=hi,ls(t,0),kn(t,s),ct(t,je()),n;if(e===6)kn(t,s);else{if(r=t.current.alternate,!(s&30)&&!sx(r)&&(e=sa(t,s),e===2&&(i=ql(t),i!==0&&(s=i,e=vu(t,i))),e===1))throw n=hi,ls(t,0),kn(t,s),ct(t,je()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(L(345));case 2:Zn(t,it,an);break;case 3:if(kn(t,s),(s&130023424)===s&&(e=Nc+500-je(),10<e)){if(Io(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){et(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=eu(Zn.bind(null,t,it,an),e);break}Zn(t,it,an);break;case 4:if(kn(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var o=31-zt(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=je()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*nx(s/1960))-s,10<s){t.timeoutHandle=eu(Zn.bind(null,t,it,an),s);break}Zn(t,it,an);break;case 5:Zn(t,it,an);break;default:throw Error(L(329))}}}return ct(t,je()),t.callbackNode===n?ng.bind(null,t):null}function vu(t,e){var n=$r;return t.current.memoizedState.isDehydrated&&(ls(t,e).flags|=256),t=sa(t,e),t!==2&&(e=it,it=n,e!==null&&wu(e)),t}function wu(t){it===null?it=t:it.push.apply(it,t)}function sx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!Ht(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function kn(t,e){for(e&=~Fc,e&=~Ea,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zt(e),s=1<<n;t[n]=-1,e&=~s}}function hf(t){if(ce&6)throw Error(L(327));Hs();var e=Io(t,0);if(!(e&1))return ct(t,je()),null;var n=sa(t,e);if(t.tag!==0&&n===2){var s=ql(t);s!==0&&(e=s,n=vu(t,s))}if(n===1)throw n=hi,ls(t,0),kn(t,e),ct(t,je()),n;if(n===6)throw Error(L(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zn(t,it,an),ct(t,je()),null}function jc(t,e){var n=ce;ce|=1;try{return t(e)}finally{ce=n,ce===0&&(Qs=je()+500,va&&Kn())}}function gs(t){Sn!==null&&Sn.tag===0&&!(ce&6)&&Hs();var e=ce;ce|=1;var n=Nt.transition,s=me;try{if(Nt.transition=null,me=1,t)return t()}finally{me=s,Nt.transition=n,ce=e,!(ce&6)&&Kn()}}function Ac(){mt=Os.current,Ce(Os)}function ls(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,BD(n)),Te!==null)for(n=Te.return;n!==null;){var s=n;switch(dc(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Wo();break;case 3:Ys(),Ce(lt),Ce(Je),vc();break;case 5:xc(s);break;case 4:Ys();break;case 13:Ce(ke);break;case 19:Ce(ke);break;case 10:mc(s.type._context);break;case 22:case 23:Ac()}n=n.return}if(Ue=t,Te=t=Mn(t.current,null),We=mt=e,Oe=0,hi=null,Fc=Ea=ms=0,it=$r=null,ss!==null){for(e=0;e<ss.length;e++)if(n=ss[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}n.pending=s}ss=null}return t}function sg(t,e){do{var n=Te;try{if(pc(),xo.current=Zo,Jo){for(var s=_e.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Jo=!1}if(ps=0,Ie=Le=_e=null,Ur=!1,ci=0,Sc.current=null,n===null||n.return===null){Oe=1,hi=e,Te=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=We,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Zd(o);if(g!==null){g.flags&=-257,ef(g,o,a,i,e),g.mode&1&&Jd(i,u,e),e=g,l=u;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){Jd(i,u,e),Tc();break e}l=Error(L(426))}}else if(Ee&&a.mode&1){var y=Zd(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),ef(y,o,a,i,e),fc(Xs(l,a));break e}}i=l=Xs(l,a),Oe!==4&&(Oe=2),$r===null?$r=[i]:$r.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var D=zm(i,l,e);qd(i,D);break e;case 1:a=l;var v=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ln===null||!Ln.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=Um(i,a,e);qd(i,w);break e}}i=i.return}while(i!==null)}og(n)}catch(b){e=b,Te===n&&n!==null&&(Te=n=n.return);continue}break}while(!0)}function rg(){var t=ea.current;return ea.current=Zo,t===null?Zo:t}function Tc(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),Ue===null||!(ms&268435455)&&!(Ea&268435455)||kn(Ue,We)}function sa(t,e){var n=ce;ce|=2;var s=rg();(Ue!==t||We!==e)&&(an=null,ls(t,e));do try{rx();break}catch(r){sg(t,r)}while(!0);if(pc(),ce=n,ea.current=s,Te!==null)throw Error(L(261));return Ue=null,We=0,Oe}function rx(){for(;Te!==null;)ig(Te)}function ix(){for(;Te!==null&&!jy();)ig(Te)}function ig(t){var e=lg(t.alternate,t,mt);t.memoizedProps=t.pendingProps,e===null?og(t):Te=e,Sc.current=null}function og(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=JD(n,e),n!==null){n.flags&=32767,Te=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Oe=6,Te=null;return}}else if(n=GD(n,e,mt),n!==null){Te=n;return}if(e=e.sibling,e!==null){Te=e;return}Te=e=t}while(e!==null);Oe===0&&(Oe=5)}function Zn(t,e,n){var s=me,r=Nt.transition;try{Nt.transition=null,me=1,ox(t,e,n,s)}finally{Nt.transition=r,me=s}return null}function ox(t,e,n,s){do Hs();while(Sn!==null);if(ce&6)throw Error(L(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(L(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(zy(t,i),t===Ue&&(Te=Ue=null,We=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ki||(Ki=!0,ug(Ro,function(){return Hs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Nt.transition,Nt.transition=null;var o=me;me=1;var a=ce;ce|=4,Sc.current=null,ex(t,n),eg(n,t),_D(Jl),zo=!!Gl,Jl=Gl=null,t.current=n,tx(n),Ay(),ce=a,me=o,Nt.transition=i}else t.current=n;if(Ki&&(Ki=!1,Sn=t,na=r),i=t.pendingLanes,i===0&&(Ln=null),Py(n.stateNode),ct(t,je()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(ta)throw ta=!1,t=Du,Du=null,t;return na&1&&t.tag!==0&&Hs(),i=t.pendingLanes,i&1?t===xu?Wr++:(Wr=0,xu=t):Wr=0,Kn(),null}function Hs(){if(Sn!==null){var t=zp(na),e=Nt.transition,n=me;try{if(Nt.transition=null,me=16>t?16:t,Sn===null)var s=!1;else{if(t=Sn,Sn=null,na=0,ce&6)throw Error(L(331));var r=ce;for(ce|=4,W=t.current;W!==null;){var i=W,o=i.child;if(W.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(W=u;W!==null;){var d=W;switch(d.tag){case 0:case 11:case 15:Hr(8,d,i)}var f=d.child;if(f!==null)f.return=d,W=f;else for(;W!==null;){d=W;var h=d.sibling,g=d.return;if(Gm(d),d===u){W=null;break}if(h!==null){h.return=g,W=h;break}W=g}}}var p=i.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}W=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,W=o;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Hr(9,i,i.return)}var D=i.sibling;if(D!==null){D.return=i.return,W=D;break e}W=i.return}}var v=t.current;for(W=v;W!==null;){o=W;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,W=x;else e:for(o=v;W!==null;){if(a=W,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ca(9,a)}}catch(b){Ne(a,a.return,b)}if(a===o){W=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,W=w;break e}W=a.return}}if(ce=r,Kn(),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(ma,t)}catch{}s=!0}return s}finally{me=n,Nt.transition=e}}return!1}function pf(t,e,n){e=Xs(n,e),e=zm(t,e,1),t=Pn(t,e,1),e=et(),t!==null&&(wi(t,1,e),ct(t,e))}function Ne(t,e,n){if(t.tag===3)pf(t,t,n);else for(;e!==null;){if(e.tag===3){pf(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ln===null||!Ln.has(s))){t=Xs(n,t),t=Um(e,t,1),e=Pn(e,t,1),t=et(),e!==null&&(wi(e,1,t),ct(e,t));break}}e=e.return}}function ax(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=et(),t.pingedLanes|=t.suspendedLanes&n,Ue===t&&(We&n)===n&&(Oe===4||Oe===3&&(We&130023424)===We&&500>je()-Nc?ls(t,0):Fc|=n),ct(t,e)}function ag(t,e){e===0&&(t.mode&1?(e=Mi,Mi<<=1,!(Mi&130023424)&&(Mi=4194304)):e=1);var n=et();t=mn(t,e),t!==null&&(wi(t,e,n),ct(t,n))}function lx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ag(t,n)}function ux(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(L(314))}s!==null&&s.delete(e),ag(t,n)}var lg;lg=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||lt.current)at=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return at=!1,QD(t,e,n);at=!!(t.flags&131072)}else at=!1,Ee&&e.flags&1048576&&fm(e,Ko,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;wo(t,e),t=e.pendingProps;var r=Vs(e,Je.current);Us(e,n),r=bc(null,e,s,t,r,n);var i=Cc();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ut(s)?(i=!0,Vo(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,yc(e),r.updater=ba,e.stateNode=r,r._reactInternals=e,au(e,s,t,n),e=cu(null,e,s,!0,i,n)):(e.tag=0,Ee&&i&&cc(e),Ze(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch(wo(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=dx(s),t=Lt(s,t),r){case 0:e=uu(null,e,s,t,n);break e;case 1:e=sf(null,e,s,t,n);break e;case 11:e=tf(null,e,s,t,n);break e;case 14:e=nf(null,e,s,Lt(s.type,t),n);break e}throw Error(L(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Lt(s,r),uu(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Lt(s,r),sf(t,e,s,r,n);case 3:e:{if(Vm(e),t===null)throw Error(L(387));s=e.pendingProps,i=e.memoizedState,r=i.element,Dm(t,e),Qo(e,s,null,n);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Xs(Error(L(423)),e),e=rf(t,e,s,n,r);break e}else if(s!==r){r=Xs(Error(L(424)),e),e=rf(t,e,s,n,r);break e}else for(gt=Bn(e.stateNode.containerInfo.firstChild),Dt=e,Ee=!0,Rt=null,n=gm(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qs(),s===r){e=gn(t,e,n);break e}Ze(t,e,s,n)}e=e.child}return e;case 5:return xm(e),t===null&&ru(e),s=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,Zl(s,r)?o=null:i!==null&&Zl(s,i)&&(e.flags|=32),Wm(t,e),Ze(t,e,o,n),e.child;case 6:return t===null&&ru(e),null;case 13:return qm(t,e,n);case 4:return Dc(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Ks(e,null,s,n):Ze(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Lt(s,r),tf(t,e,s,r,n);case 7:return Ze(t,e,e.pendingProps,n),e.child;case 8:return Ze(t,e,e.pendingProps.children,n),e.child;case 12:return Ze(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,xe(Yo,s._currentValue),s._currentValue=o,i!==null)if(Ht(i.value,o)){if(i.children===r.children&&!lt.current){e=gn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===s){if(i.tag===1){l=fn(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),iu(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(L(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),iu(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ze(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,Us(e,n),r=jt(r),s=s(r),e.flags|=1,Ze(t,e,s,n),e.child;case 14:return s=e.type,r=Lt(s,e.pendingProps),r=Lt(s.type,r),nf(t,e,s,r,n);case 15:return Hm(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Lt(s,r),wo(t,e),e.tag=1,ut(s)?(t=!0,Vo(e)):t=!1,Us(e,n),Im(e,s,r),au(e,s,r,n),cu(null,e,s,!0,t,n);case 19:return Km(t,e,n);case 22:return $m(t,e,n)}throw Error(L(156,e.tag))};function ug(t,e){return Op(t,e)}function cx(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _t(t,e,n,s){return new cx(t,e,n,s)}function Bc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dx(t){if(typeof t=="function")return Bc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ju)return 11;if(t===Zu)return 14}return 2}function Mn(t,e){var n=t.alternate;return n===null?(n=_t(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Eo(t,e,n,s,r,i){var o=2;if(s=t,typeof t=="function")Bc(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case _s:return us(n.children,r,i,e);case Gu:o=8,r|=8;break;case Al:return t=_t(12,n,e,r|2),t.elementType=Al,t.lanes=i,t;case Tl:return t=_t(13,n,e,r),t.elementType=Tl,t.lanes=i,t;case Bl:return t=_t(19,n,e,r),t.elementType=Bl,t.lanes=i,t;case xp:return ka(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yp:o=10;break e;case Dp:o=9;break e;case Ju:o=11;break e;case Zu:o=14;break e;case bn:o=16,s=null;break e}throw Error(L(130,t==null?t:typeof t,""))}return e=_t(o,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function us(t,e,n,s){return t=_t(7,t,s,e),t.lanes=n,t}function ka(t,e,n,s){return t=_t(22,t,s,e),t.elementType=xp,t.lanes=n,t.stateNode={isHidden:!1},t}function dl(t,e,n){return t=_t(6,t,null,e),t.lanes=n,t}function fl(t,e,n){return e=_t(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function fx(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qa(0),this.expirationTimes=qa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qa(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Pc(t,e,n,s,r,i,o,a,l){return t=new fx(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=_t(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},yc(i),t}function hx(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ks,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function cg(t){if(!t)return $n;t=t._reactInternals;e:{if(vs(t)!==t||t.tag!==1)throw Error(L(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ut(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(t.tag===1){var n=t.type;if(ut(n))return cm(t,n,e)}return e}function dg(t,e,n,s,r,i,o,a,l){return t=Pc(n,s,!0,t,r,i,o,a,l),t.context=cg(null),n=t.current,s=et(),r=On(n),i=fn(s,r),i.callback=e??null,Pn(n,i,r),t.current.lanes=r,wi(t,r,s),ct(t,s),t}function _a(t,e,n,s){var r=e.current,i=et(),o=On(r);return n=cg(n),e.context===null?e.context=n:e.pendingContext=n,e=fn(i,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=Pn(r,e,o),t!==null&&(Ut(t,r,o,i),Do(t,r,o)),o}function ra(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function mf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Lc(t,e){mf(t,e),(t=t.alternate)&&mf(t,e)}function px(){return null}var fg=typeof reportError=="function"?reportError:function(t){console.error(t)};function Oc(t){this._internalRoot=t}Sa.prototype.render=Oc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(L(409));_a(t,e,null,null)};Sa.prototype.unmount=Oc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;gs(function(){_a(null,t,null,null)}),e[pn]=null}};function Sa(t){this._internalRoot=t}Sa.prototype.unstable_scheduleHydration=function(t){if(t){var e=$p();t={blockedOn:null,target:t,priority:e};for(var n=0;n<En.length&&e!==0&&e<En[n].priority;n++);En.splice(n,0,t),n===0&&Vp(t)}};function Mc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gf(){}function mx(t,e,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var u=ra(o);i.call(u)}}var o=dg(e,s,t,0,null,!1,!1,"",gf);return t._reactRootContainer=o,t[pn]=o.current,ii(t.nodeType===8?t.parentNode:t),gs(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var u=ra(l);a.call(u)}}var l=Pc(t,0,!1,null,null,!1,!1,"",gf);return t._reactRootContainer=l,t[pn]=l.current,ii(t.nodeType===8?t.parentNode:t),gs(function(){_a(e,l,n,s)}),l}function Na(t,e,n,s,r){var i=n._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var a=r;r=function(){var l=ra(o);a.call(l)}}_a(e,o,t,r)}else o=mx(n,e,t,r,s);return ra(o)}Up=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fr(e.pendingLanes);n!==0&&(nc(e,n|1),ct(e,je()),!(ce&6)&&(Qs=je()+500,Kn()))}break;case 13:gs(function(){var s=mn(t,1);if(s!==null){var r=et();Ut(s,t,1,r)}}),Lc(t,1)}};sc=function(t){if(t.tag===13){var e=mn(t,134217728);if(e!==null){var n=et();Ut(e,t,134217728,n)}Lc(t,134217728)}};Hp=function(t){if(t.tag===13){var e=On(t),n=mn(t,e);if(n!==null){var s=et();Ut(n,t,e,s)}Lc(t,e)}};$p=function(){return me};Wp=function(t,e){var n=me;try{return me=t,e()}finally{me=n}};$l=function(t,e,n){switch(e){case"input":if(Ol(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=xa(s);if(!r)throw Error(L(90));wp(s),Ol(s,r)}}}break;case"textarea":Cp(t,n);break;case"select":e=n.value,e!=null&&Ms(t,!!n.multiple,e,!1)}};jp=jc;Ap=gs;var gx={usingClientEntryPoint:!1,Events:[Ci,js,xa,Fp,Np,jc]},yr={findFiberByHostInstance:ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yx={bundleType:yr.bundleType,version:yr.version,rendererPackageName:yr.rendererPackageName,rendererConfig:yr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Pp(t),t===null?null:t.stateNode},findFiberByHostInstance:yr.findFiberByHostInstance||px,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yi.isDisabled&&Yi.supportsFiber)try{ma=Yi.inject(yx),Gt=Yi}catch{}}vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gx;vt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mc(e))throw Error(L(200));return hx(t,e,null,n)};vt.createRoot=function(t,e){if(!Mc(t))throw Error(L(299));var n=!1,s="",r=fg;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Pc(t,1,!1,null,null,n,!1,s,r),t[pn]=e.current,ii(t.nodeType===8?t.parentNode:t),new Oc(e)};vt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=Pp(e),t=t===null?null:t.stateNode,t};vt.flushSync=function(t){return gs(t)};vt.hydrate=function(t,e,n){if(!Fa(e))throw Error(L(200));return Na(null,t,e,!0,n)};vt.hydrateRoot=function(t,e,n){if(!Mc(t))throw Error(L(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",o=fg;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=dg(e,null,t,1,n??null,r,!1,i,o),t[pn]=e.current,ii(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Sa(e)};vt.render=function(t,e,n){if(!Fa(e))throw Error(L(200));return Na(null,t,e,!1,n)};vt.unmountComponentAtNode=function(t){if(!Fa(t))throw Error(L(40));return t._reactRootContainer?(gs(function(){Na(null,null,t,!1,function(){t._reactRootContainer=null,t[pn]=null})}),!0):!1};vt.unstable_batchedUpdates=jc;vt.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!Fa(n))throw Error(L(200));if(t==null||t._reactInternals===void 0)throw Error(L(38));return Na(t,e,n,!1,s)};vt.version="18.3.1-next-f1338f8080-20240426";function hg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hg)}catch(t){console.error(t)}}hg(),hp.exports=vt;var pg=hp.exports,mg,yf=pg;mg=Nl.createRoot=yf.createRoot,Nl.hydrateRoot=yf.hydrateRoot;function gg(t,e){return function(){return t.apply(e,arguments)}}const{toString:Dx}=Object.prototype,{getPrototypeOf:Rc}=Object,{iterator:ja,toStringTag:yg}=Symbol,Aa=(t=>e=>{const n=Dx.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),$t=t=>(t=t.toLowerCase(),e=>Aa(e)===t),Ta=t=>e=>typeof e===t,{isArray:or}=Array,Gs=Ta("undefined");function ki(t){return t!==null&&!Gs(t)&&t.constructor!==null&&!Gs(t.constructor)&&dt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Dg=$t("ArrayBuffer");function xx(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Dg(t.buffer),e}const vx=Ta("string"),dt=Ta("function"),xg=Ta("number"),_i=t=>t!==null&&typeof t=="object",wx=t=>t===!0||t===!1,ko=t=>{if(Aa(t)!=="object")return!1;const e=Rc(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(yg in t)&&!(ja in t)},bx=t=>{if(!_i(t)||ki(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Cx=$t("Date"),Ex=$t("File"),kx=$t("Blob"),_x=$t("FileList"),Sx=t=>_i(t)&&dt(t.pipe),Fx=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||dt(t.append)&&((e=Aa(t))==="formdata"||e==="object"&&dt(t.toString)&&t.toString()==="[object FormData]"))},Nx=$t("URLSearchParams"),[jx,Ax,Tx,Bx]=["ReadableStream","Request","Response","Headers"].map($t),Px=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Si(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let s,r;if(typeof t!="object"&&(t=[t]),or(t))for(s=0,r=t.length;s<r;s++)e.call(null,t[s],s,t);else{if(ki(t))return;const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(s=0;s<o;s++)a=i[s],e.call(null,t[a],a,t)}}function vg(t,e){if(ki(t))return null;e=e.toLowerCase();const n=Object.keys(t);let s=n.length,r;for(;s-- >0;)if(r=n[s],e===r.toLowerCase())return r;return null}const is=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,wg=t=>!Gs(t)&&t!==is;function bu(){const{caseless:t,skipUndefined:e}=wg(this)&&this||{},n={},s=(r,i)=>{const o=t&&vg(n,i)||i;ko(n[o])&&ko(r)?n[o]=bu(n[o],r):ko(r)?n[o]=bu({},r):or(r)?n[o]=r.slice():(!e||!Gs(r))&&(n[o]=r)};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Si(arguments[r],s);return n}const Lx=(t,e,n,{allOwnKeys:s}={})=>(Si(e,(r,i)=>{n&&dt(r)?t[i]=gg(r,n):t[i]=r},{allOwnKeys:s}),t),Ox=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Mx=(t,e,n,s)=>{t.prototype=Object.create(e.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Rx=(t,e,n,s)=>{let r,i,o;const a={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),i=r.length;i-- >0;)o=r[i],(!s||s(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Rc(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Ix=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const s=t.indexOf(e,n);return s!==-1&&s===n},zx=t=>{if(!t)return null;if(or(t))return t;let e=t.length;if(!xg(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Ux=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Rc(Uint8Array)),Hx=(t,e)=>{const s=(t&&t[ja]).call(t);let r;for(;(r=s.next())&&!r.done;){const i=r.value;e.call(t,i[0],i[1])}},$x=(t,e)=>{let n;const s=[];for(;(n=t.exec(e))!==null;)s.push(n);return s},Wx=$t("HTMLFormElement"),Vx=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,r){return s.toUpperCase()+r}),Df=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),qx=$t("RegExp"),bg=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),s={};Si(n,(r,i)=>{let o;(o=e(r,i,t))!==!1&&(s[i]=o||r)}),Object.defineProperties(t,s)},Kx=t=>{bg(t,(e,n)=>{if(dt(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=t[n];if(dt(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Yx=(t,e)=>{const n={},s=r=>{r.forEach(i=>{n[i]=!0})};return or(t)?s(t):s(String(t).split(e)),n},Xx=()=>{},Qx=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Gx(t){return!!(t&&dt(t.append)&&t[yg]==="FormData"&&t[ja])}const Jx=t=>{const e=new Array(10),n=(s,r)=>{if(_i(s)){if(e.indexOf(s)>=0)return;if(ki(s))return s;if(!("toJSON"in s)){e[r]=s;const i=or(s)?[]:{};return Si(s,(o,a)=>{const l=n(o,r+1);!Gs(l)&&(i[a]=l)}),e[r]=void 0,i}}return s};return n(t,0)},Zx=$t("AsyncFunction"),ev=t=>t&&(_i(t)||dt(t))&&dt(t.then)&&dt(t.catch),Cg=((t,e)=>t?setImmediate:e?((n,s)=>(is.addEventListener("message",({source:r,data:i})=>{r===is&&i===n&&s.length&&s.shift()()},!1),r=>{s.push(r),is.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",dt(is.postMessage)),tv=typeof queueMicrotask<"u"?queueMicrotask.bind(is):typeof process<"u"&&process.nextTick||Cg,nv=t=>t!=null&&dt(t[ja]),N={isArray:or,isArrayBuffer:Dg,isBuffer:ki,isFormData:Fx,isArrayBufferView:xx,isString:vx,isNumber:xg,isBoolean:wx,isObject:_i,isPlainObject:ko,isEmptyObject:bx,isReadableStream:jx,isRequest:Ax,isResponse:Tx,isHeaders:Bx,isUndefined:Gs,isDate:Cx,isFile:Ex,isBlob:kx,isRegExp:qx,isFunction:dt,isStream:Sx,isURLSearchParams:Nx,isTypedArray:Ux,isFileList:_x,forEach:Si,merge:bu,extend:Lx,trim:Px,stripBOM:Ox,inherits:Mx,toFlatObject:Rx,kindOf:Aa,kindOfTest:$t,endsWith:Ix,toArray:zx,forEachEntry:Hx,matchAll:$x,isHTMLForm:Wx,hasOwnProperty:Df,hasOwnProp:Df,reduceDescriptors:bg,freezeMethods:Kx,toObjectSet:Yx,toCamelCase:Vx,noop:Xx,toFiniteNumber:Qx,findKey:vg,global:is,isContextDefined:wg,isSpecCompliantForm:Gx,toJSONObject:Jx,isAsyncFn:Zx,isThenable:ev,setImmediate:Cg,asap:tv,isIterable:nv};function te(t,e,n,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}N.inherits(te,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:N.toJSONObject(this.config),code:this.code,status:this.status}}});const Eg=te.prototype,kg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{kg[t]={value:t}});Object.defineProperties(te,kg);Object.defineProperty(Eg,"isAxiosError",{value:!0});te.from=(t,e,n,s,r,i)=>{const o=Object.create(Eg);N.toFlatObject(t,o,function(d){return d!==Error.prototype},u=>u!=="isAxiosError");const a=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return te.call(o,a,l,n,s,r),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",i&&Object.assign(o,i),o};const sv=null;function Cu(t){return N.isPlainObject(t)||N.isArray(t)}function _g(t){return N.endsWith(t,"[]")?t.slice(0,-2):t}function xf(t,e,n){return t?t.concat(e).map(function(r,i){return r=_g(r),!n&&i?"["+r+"]":r}).join(n?".":""):e}function rv(t){return N.isArray(t)&&!t.some(Cu)}const iv=N.toFlatObject(N,{},null,function(e){return/^is[A-Z]/.test(e)});function Ba(t,e,n){if(!N.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=N.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,y){return!N.isUndefined(y[m])});const s=n.metaTokens,r=n.visitor||d,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&N.isSpecCompliantForm(e);if(!N.isFunction(r))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(N.isDate(p))return p.toISOString();if(N.isBoolean(p))return p.toString();if(!l&&N.isBlob(p))throw new te("Blob is not supported. Use a Buffer instead.");return N.isArrayBuffer(p)||N.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function d(p,m,y){let D=p;if(p&&!y&&typeof p=="object"){if(N.endsWith(m,"{}"))m=s?m:m.slice(0,-2),p=JSON.stringify(p);else if(N.isArray(p)&&rv(p)||(N.isFileList(p)||N.endsWith(m,"[]"))&&(D=N.toArray(p)))return m=_g(m),D.forEach(function(x,w){!(N.isUndefined(x)||x===null)&&e.append(o===!0?xf([m],w,i):o===null?m:m+"[]",u(x))}),!1}return Cu(p)?!0:(e.append(xf(y,m,i),u(p)),!1)}const f=[],h=Object.assign(iv,{defaultVisitor:d,convertValue:u,isVisitable:Cu});function g(p,m){if(!N.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(p),N.forEach(p,function(D,v){(!(N.isUndefined(D)||D===null)&&r.call(e,D,N.isString(v)?v.trim():v,m,h))===!0&&g(D,m?m.concat(v):[v])}),f.pop()}}if(!N.isObject(t))throw new TypeError("data must be an object");return g(t),e}function vf(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function Ic(t,e){this._pairs=[],t&&Ba(t,this,e)}const Sg=Ic.prototype;Sg.append=function(e,n){this._pairs.push([e,n])};Sg.toString=function(e){const n=e?function(s){return e.call(this,s,vf)}:vf;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function ov(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Fg(t,e,n){if(!e)return t;const s=n&&n.encode||ov;N.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let i;if(r?i=r(e,n):i=N.isURLSearchParams(e)?e.toString():new Ic(e,n).toString(s),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class wf{constructor(){this.handlers=[]}use(e,n,s){return this.handlers.push({fulfilled:e,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){N.forEach(this.handlers,function(s){s!==null&&e(s)})}}const Ng={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},av=typeof URLSearchParams<"u"?URLSearchParams:Ic,lv=typeof FormData<"u"?FormData:null,uv=typeof Blob<"u"?Blob:null,cv={isBrowser:!0,classes:{URLSearchParams:av,FormData:lv,Blob:uv},protocols:["http","https","file","blob","url","data"]},zc=typeof window<"u"&&typeof document<"u",Eu=typeof navigator=="object"&&navigator||void 0,dv=zc&&(!Eu||["ReactNative","NativeScript","NS"].indexOf(Eu.product)<0),fv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",hv=zc&&window.location.href||"http://localhost",pv=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:zc,hasStandardBrowserEnv:dv,hasStandardBrowserWebWorkerEnv:fv,navigator:Eu,origin:hv},Symbol.toStringTag,{value:"Module"})),Qe={...pv,...cv};function mv(t,e){return Ba(t,new Qe.classes.URLSearchParams,{visitor:function(n,s,r,i){return Qe.isNode&&N.isBuffer(n)?(this.append(s,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function gv(t){return N.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function yv(t){const e={},n=Object.keys(t);let s;const r=n.length;let i;for(s=0;s<r;s++)i=n[s],e[i]=t[i];return e}function jg(t){function e(n,s,r,i){let o=n[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&N.isArray(r)?r.length:o,l?(N.hasOwnProp(r,o)?r[o]=[r[o],s]:r[o]=s,!a):((!r[o]||!N.isObject(r[o]))&&(r[o]=[]),e(n,s,r[o],i)&&N.isArray(r[o])&&(r[o]=yv(r[o])),!a)}if(N.isFormData(t)&&N.isFunction(t.entries)){const n={};return N.forEachEntry(t,(s,r)=>{e(gv(s),r,n,0)}),n}return null}function Dv(t,e,n){if(N.isString(t))try{return(e||JSON.parse)(t),N.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(t)}const Fi={transitional:Ng,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const s=n.getContentType()||"",r=s.indexOf("application/json")>-1,i=N.isObject(e);if(i&&N.isHTMLForm(e)&&(e=new FormData(e)),N.isFormData(e))return r?JSON.stringify(jg(e)):e;if(N.isArrayBuffer(e)||N.isBuffer(e)||N.isStream(e)||N.isFile(e)||N.isBlob(e)||N.isReadableStream(e))return e;if(N.isArrayBufferView(e))return e.buffer;if(N.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return mv(e,this.formSerializer).toString();if((a=N.isFileList(e))||s.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Ba(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||r?(n.setContentType("application/json",!1),Dv(e)):e}],transformResponse:[function(e){const n=this.transitional||Fi.transitional,s=n&&n.forcedJSONParsing,r=this.responseType==="json";if(N.isResponse(e)||N.isReadableStream(e))return e;if(e&&N.isString(e)&&(s&&!this.responseType||r)){const o=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?te.from(a,te.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Qe.classes.FormData,Blob:Qe.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};N.forEach(["delete","get","head","post","put","patch"],t=>{Fi.headers[t]={}});const xv=N.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),vv=t=>{const e={};let n,s,r;return t&&t.split(`
`).forEach(function(o){r=o.indexOf(":"),n=o.substring(0,r).trim().toLowerCase(),s=o.substring(r+1).trim(),!(!n||e[n]&&xv[n])&&(n==="set-cookie"?e[n]?e[n].push(s):e[n]=[s]:e[n]=e[n]?e[n]+", "+s:s)}),e},bf=Symbol("internals");function Dr(t){return t&&String(t).trim().toLowerCase()}function _o(t){return t===!1||t==null?t:N.isArray(t)?t.map(_o):String(t)}function wv(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(t);)e[s[1]]=s[2];return e}const bv=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function hl(t,e,n,s,r){if(N.isFunction(s))return s.call(this,e,n);if(r&&(e=n),!!N.isString(e)){if(N.isString(s))return e.indexOf(s)!==-1;if(N.isRegExp(s))return s.test(e)}}function Cv(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,s)=>n.toUpperCase()+s)}function Ev(t,e){const n=N.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+n,{value:function(r,i,o){return this[s].call(this,e,r,i,o)},configurable:!0})})}let ft=class{constructor(e){e&&this.set(e)}set(e,n,s){const r=this;function i(a,l,u){const d=Dr(l);if(!d)throw new Error("header name must be a non-empty string");const f=N.findKey(r,d);(!f||r[f]===void 0||u===!0||u===void 0&&r[f]!==!1)&&(r[f||l]=_o(a))}const o=(a,l)=>N.forEach(a,(u,d)=>i(u,d,l));if(N.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(N.isString(e)&&(e=e.trim())&&!bv(e))o(vv(e),n);else if(N.isObject(e)&&N.isIterable(e)){let a={},l,u;for(const d of e){if(!N.isArray(d))throw TypeError("Object iterator must return a key-value pair");a[u=d[0]]=(l=a[u])?N.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}o(a,n)}else e!=null&&i(n,e,s);return this}get(e,n){if(e=Dr(e),e){const s=N.findKey(this,e);if(s){const r=this[s];if(!n)return r;if(n===!0)return wv(r);if(N.isFunction(n))return n.call(this,r,s);if(N.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Dr(e),e){const s=N.findKey(this,e);return!!(s&&this[s]!==void 0&&(!n||hl(this,this[s],s,n)))}return!1}delete(e,n){const s=this;let r=!1;function i(o){if(o=Dr(o),o){const a=N.findKey(s,o);a&&(!n||hl(s,s[a],a,n))&&(delete s[a],r=!0)}}return N.isArray(e)?e.forEach(i):i(e),r}clear(e){const n=Object.keys(this);let s=n.length,r=!1;for(;s--;){const i=n[s];(!e||hl(this,this[i],i,e,!0))&&(delete this[i],r=!0)}return r}normalize(e){const n=this,s={};return N.forEach(this,(r,i)=>{const o=N.findKey(s,i);if(o){n[o]=_o(r),delete n[i];return}const a=e?Cv(i):String(i).trim();a!==i&&delete n[i],n[a]=_o(r),s[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return N.forEach(this,(s,r)=>{s!=null&&s!==!1&&(n[r]=e&&N.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const s=new this(e);return n.forEach(r=>s.set(r)),s}static accessor(e){const s=(this[bf]=this[bf]={accessors:{}}).accessors,r=this.prototype;function i(o){const a=Dr(o);s[a]||(Ev(r,o),s[a]=!0)}return N.isArray(e)?e.forEach(i):i(e),this}};ft.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);N.reduceDescriptors(ft.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(s){this[n]=s}}});N.freezeMethods(ft);function pl(t,e){const n=this||Fi,s=e||n,r=ft.from(s.headers);let i=s.data;return N.forEach(t,function(a){i=a.call(n,i,r.normalize(),e?e.status:void 0)}),r.normalize(),i}function Ag(t){return!!(t&&t.__CANCEL__)}function ar(t,e,n){te.call(this,t??"canceled",te.ERR_CANCELED,e,n),this.name="CanceledError"}N.inherits(ar,te,{__CANCEL__:!0});function Tg(t,e,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?t(n):e(new te("Request failed with status code "+n.status,[te.ERR_BAD_REQUEST,te.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function kv(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function _v(t,e){t=t||10;const n=new Array(t),s=new Array(t);let r=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),d=s[i];o||(o=u),n[r]=l,s[r]=u;let f=i,h=0;for(;f!==r;)h+=n[f++],f=f%t;if(r=(r+1)%t,r===i&&(i=(i+1)%t),u-o<e)return;const g=d&&u-d;return g?Math.round(h*1e3/g):void 0}}function Sv(t,e){let n=0,s=1e3/e,r,i;const o=(u,d=Date.now())=>{n=d,r=null,i&&(clearTimeout(i),i=null),t(...u)};return[(...u)=>{const d=Date.now(),f=d-n;f>=s?o(u,d):(r=u,i||(i=setTimeout(()=>{i=null,o(r)},s-f)))},()=>r&&o(r)]}const ia=(t,e,n=3)=>{let s=0;const r=_v(50,250);return Sv(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,l=o-s,u=r(l),d=o<=a;s=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&d?(a-o)/u:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(f)},n)},Cf=(t,e)=>{const n=t!=null;return[s=>e[0]({lengthComputable:n,total:t,loaded:s}),e[1]]},Ef=t=>(...e)=>N.asap(()=>t(...e)),Fv=Qe.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Qe.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Qe.origin),Qe.navigator&&/(msie|trident)/i.test(Qe.navigator.userAgent)):()=>!0,Nv=Qe.hasStandardBrowserEnv?{write(t,e,n,s,r,i){const o=[t+"="+encodeURIComponent(e)];N.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),N.isString(s)&&o.push("path="+s),N.isString(r)&&o.push("domain="+r),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function jv(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Av(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Bg(t,e,n){let s=!jv(e);return t&&(s||n==!1)?Av(t,e):e}const kf=t=>t instanceof ft?{...t}:t;function ys(t,e){e=e||{};const n={};function s(u,d,f,h){return N.isPlainObject(u)&&N.isPlainObject(d)?N.merge.call({caseless:h},u,d):N.isPlainObject(d)?N.merge({},d):N.isArray(d)?d.slice():d}function r(u,d,f,h){if(N.isUndefined(d)){if(!N.isUndefined(u))return s(void 0,u,f,h)}else return s(u,d,f,h)}function i(u,d){if(!N.isUndefined(d))return s(void 0,d)}function o(u,d){if(N.isUndefined(d)){if(!N.isUndefined(u))return s(void 0,u)}else return s(void 0,d)}function a(u,d,f){if(f in e)return s(u,d);if(f in t)return s(void 0,u)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,d,f)=>r(kf(u),kf(d),f,!0)};return N.forEach(Object.keys({...t,...e}),function(d){const f=l[d]||r,h=f(t[d],e[d],d);N.isUndefined(h)&&f!==a||(n[d]=h)}),n}const Pg=t=>{const e=ys({},t);let{data:n,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:a}=e;if(e.headers=o=ft.from(o),e.url=Fg(Bg(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),N.isFormData(n)){if(Qe.hasStandardBrowserEnv||Qe.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(N.isFunction(n.getHeaders)){const l=n.getHeaders(),u=["content-type","content-length"];Object.entries(l).forEach(([d,f])=>{u.includes(d.toLowerCase())&&o.set(d,f)})}}if(Qe.hasStandardBrowserEnv&&(s&&N.isFunction(s)&&(s=s(e)),s||s!==!1&&Fv(e.url))){const l=r&&i&&Nv.read(i);l&&o.set(r,l)}return e},Tv=typeof XMLHttpRequest<"u",Bv=Tv&&function(t){return new Promise(function(n,s){const r=Pg(t);let i=r.data;const o=ft.from(r.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=r,d,f,h,g,p;function m(){g&&g(),p&&p(),r.cancelToken&&r.cancelToken.unsubscribe(d),r.signal&&r.signal.removeEventListener("abort",d)}let y=new XMLHttpRequest;y.open(r.method.toUpperCase(),r.url,!0),y.timeout=r.timeout;function D(){if(!y)return;const x=ft.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),b={data:!a||a==="text"||a==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:x,config:t,request:y};Tg(function(k){n(k),m()},function(k){s(k),m()},b),y=null}"onloadend"in y?y.onloadend=D:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(D)},y.onabort=function(){y&&(s(new te("Request aborted",te.ECONNABORTED,t,y)),y=null)},y.onerror=function(w){const b=w&&w.message?w.message:"Network Error",E=new te(b,te.ERR_NETWORK,t,y);E.event=w||null,s(E),y=null},y.ontimeout=function(){let w=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const b=r.transitional||Ng;r.timeoutErrorMessage&&(w=r.timeoutErrorMessage),s(new te(w,b.clarifyTimeoutError?te.ETIMEDOUT:te.ECONNABORTED,t,y)),y=null},i===void 0&&o.setContentType(null),"setRequestHeader"in y&&N.forEach(o.toJSON(),function(w,b){y.setRequestHeader(b,w)}),N.isUndefined(r.withCredentials)||(y.withCredentials=!!r.withCredentials),a&&a!=="json"&&(y.responseType=r.responseType),u&&([h,p]=ia(u,!0),y.addEventListener("progress",h)),l&&y.upload&&([f,g]=ia(l),y.upload.addEventListener("progress",f),y.upload.addEventListener("loadend",g)),(r.cancelToken||r.signal)&&(d=x=>{y&&(s(!x||x.type?new ar(null,t,y):x),y.abort(),y=null)},r.cancelToken&&r.cancelToken.subscribe(d),r.signal&&(r.signal.aborted?d():r.signal.addEventListener("abort",d)));const v=kv(r.url);if(v&&Qe.protocols.indexOf(v)===-1){s(new te("Unsupported protocol "+v+":",te.ERR_BAD_REQUEST,t));return}y.send(i||null)})},Pv=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let s=new AbortController,r;const i=function(u){if(!r){r=!0,a();const d=u instanceof Error?u:this.reason;s.abort(d instanceof te?d:new ar(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,i(new te(`timeout ${e} of ms exceeded`,te.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),t=null)};t.forEach(u=>u.addEventListener("abort",i));const{signal:l}=s;return l.unsubscribe=()=>N.asap(a),l}},Lv=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let s=0,r;for(;s<n;)r=s+e,yield t.slice(s,r),s=r},Ov=async function*(t,e){for await(const n of Mv(t))yield*Lv(n,e)},Mv=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:s}=await e.read();if(n)break;yield s}}finally{await e.cancel()}},_f=(t,e,n,s)=>{const r=Ov(t,e);let i=0,o,a=l=>{o||(o=!0,s&&s(l))};return new ReadableStream({async pull(l){try{const{done:u,value:d}=await r.next();if(u){a(),l.close();return}let f=d.byteLength;if(n){let h=i+=f;n(h)}l.enqueue(new Uint8Array(d))}catch(u){throw a(u),u}},cancel(l){return a(l),r.return()}},{highWaterMark:2})},Sf=64*1024,{isFunction:Xi}=N,Rv=(({Request:t,Response:e})=>({Request:t,Response:e}))(N.global),{ReadableStream:Ff,TextEncoder:Nf}=N.global,jf=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Iv=t=>{t=N.merge.call({skipUndefined:!0},Rv,t);const{fetch:e,Request:n,Response:s}=t,r=e?Xi(e):typeof fetch=="function",i=Xi(n),o=Xi(s);if(!r)return!1;const a=r&&Xi(Ff),l=r&&(typeof Nf=="function"?(p=>m=>p.encode(m))(new Nf):async p=>new Uint8Array(await new n(p).arrayBuffer())),u=i&&a&&jf(()=>{let p=!1;const m=new n(Qe.origin,{body:new Ff,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!m}),d=o&&a&&jf(()=>N.isReadableStream(new s("").body)),f={stream:d&&(p=>p.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!f[p]&&(f[p]=(m,y)=>{let D=m&&m[p];if(D)return D.call(m);throw new te(`Response type '${p}' is not supported`,te.ERR_NOT_SUPPORT,y)})});const h=async p=>{if(p==null)return 0;if(N.isBlob(p))return p.size;if(N.isSpecCompliantForm(p))return(await new n(Qe.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(N.isArrayBufferView(p)||N.isArrayBuffer(p))return p.byteLength;if(N.isURLSearchParams(p)&&(p=p+""),N.isString(p))return(await l(p)).byteLength},g=async(p,m)=>{const y=N.toFiniteNumber(p.getContentLength());return y??h(m)};return async p=>{let{url:m,method:y,data:D,signal:v,cancelToken:x,timeout:w,onDownloadProgress:b,onUploadProgress:E,responseType:k,headers:C,withCredentials:_="same-origin",fetchOptions:F}=Pg(p),T=e||fetch;k=k?(k+"").toLowerCase():"text";let I=Pv([v,x&&x.toAbortSignal()],w),V=null;const ne=I&&I.unsubscribe&&(()=>{I.unsubscribe()});let J;try{if(E&&u&&y!=="get"&&y!=="head"&&(J=await g(C,D))!==0){let X=new n(m,{method:"POST",body:D,duplex:"half"}),K;if(N.isFormData(D)&&(K=X.headers.get("content-type"))&&C.setContentType(K),X.body){const[se,de]=Cf(J,ia(Ef(E)));D=_f(X.body,Sf,se,de)}}N.isString(_)||(_=_?"include":"omit");const ee=i&&"credentials"in n.prototype,he={...F,signal:I,method:y.toUpperCase(),headers:C.normalize().toJSON(),body:D,duplex:"half",credentials:ee?_:void 0};V=i&&new n(m,he);let P=await(i?T(V,F):T(m,he));const M=d&&(k==="stream"||k==="response");if(d&&(b||M&&ne)){const X={};["status","statusText","headers"].forEach(H=>{X[H]=P[H]});const K=N.toFiniteNumber(P.headers.get("content-length")),[se,de]=b&&Cf(K,ia(Ef(b),!0))||[];P=new s(_f(P.body,Sf,se,()=>{de&&de(),ne&&ne()}),X)}k=k||"text";let U=await f[N.findKey(f,k)||"text"](P,p);return!M&&ne&&ne(),await new Promise((X,K)=>{Tg(X,K,{data:U,headers:ft.from(P.headers),status:P.status,statusText:P.statusText,config:p,request:V})})}catch(ee){throw ne&&ne(),ee&&ee.name==="TypeError"&&/Load failed|fetch/i.test(ee.message)?Object.assign(new te("Network Error",te.ERR_NETWORK,p,V),{cause:ee.cause||ee}):te.from(ee,ee&&ee.code,p,V)}}},zv=new Map,Lg=t=>{let e=t?t.env:{};const{fetch:n,Request:s,Response:r}=e,i=[s,r,n];let o=i.length,a=o,l,u,d=zv;for(;a--;)l=i[a],u=d.get(l),u===void 0&&d.set(l,u=a?new Map:Iv(e)),d=u;return u};Lg();const ku={http:sv,xhr:Bv,fetch:{get:Lg}};N.forEach(ku,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Af=t=>`- ${t}`,Uv=t=>N.isFunction(t)||t===null||t===!1,Og={getAdapter:(t,e)=>{t=N.isArray(t)?t:[t];const{length:n}=t;let s,r;const i={};for(let o=0;o<n;o++){s=t[o];let a;if(r=s,!Uv(s)&&(r=ku[(a=String(s)).toLowerCase()],r===void 0))throw new te(`Unknown adapter '${a}'`);if(r&&(N.isFunction(r)||(r=r.get(e))))break;i[a||"#"+o]=r}if(!r){const o=Object.entries(i).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=n?o.length>1?`since :
`+o.map(Af).join(`
`):" "+Af(o[0]):"as no adapter specified";throw new te("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:ku};function ml(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ar(null,t)}function Tf(t){return ml(t),t.headers=ft.from(t.headers),t.data=pl.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Og.getAdapter(t.adapter||Fi.adapter,t)(t).then(function(s){return ml(t),s.data=pl.call(t,t.transformResponse,s),s.headers=ft.from(s.headers),s},function(s){return Ag(s)||(ml(t),s&&s.response&&(s.response.data=pl.call(t,t.transformResponse,s.response),s.response.headers=ft.from(s.response.headers))),Promise.reject(s)})}const Mg="1.12.2",Pa={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Pa[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});const Bf={};Pa.transitional=function(e,n,s){function r(i,o){return"[Axios v"+Mg+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,a)=>{if(e===!1)throw new te(r(o," has been removed"+(n?" in "+n:"")),te.ERR_DEPRECATED);return n&&!Bf[o]&&(Bf[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};Pa.spelling=function(e){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function Hv(t,e,n){if(typeof t!="object")throw new te("options must be an object",te.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let r=s.length;for(;r-- >0;){const i=s[r],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new te("option "+i+" must be "+l,te.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new te("Unknown option "+i,te.ERR_BAD_OPTION)}}const So={assertOptions:Hv,validators:Pa},Vt=So.validators;let cs=class{constructor(e){this.defaults=e||{},this.interceptors={request:new wf,response:new wf}}async request(e,n){try{return await this._request(e,n)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=ys(this.defaults,n);const{transitional:s,paramsSerializer:r,headers:i}=n;s!==void 0&&So.assertOptions(s,{silentJSONParsing:Vt.transitional(Vt.boolean),forcedJSONParsing:Vt.transitional(Vt.boolean),clarifyTimeoutError:Vt.transitional(Vt.boolean)},!1),r!=null&&(N.isFunction(r)?n.paramsSerializer={serialize:r}:So.assertOptions(r,{encode:Vt.function,serialize:Vt.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),So.assertOptions(n,{baseUrl:Vt.spelling("baseURL"),withXsrfToken:Vt.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&N.merge(i.common,i[n.method]);i&&N.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),n.headers=ft.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const u=[];this.interceptors.response.forEach(function(m){u.push(m.fulfilled,m.rejected)});let d,f=0,h;if(!l){const p=[Tf.bind(this),void 0];for(p.unshift(...a),p.push(...u),h=p.length,d=Promise.resolve(n);f<h;)d=d.then(p[f++],p[f++]);return d}h=a.length;let g=n;for(;f<h;){const p=a[f++],m=a[f++];try{g=p(g)}catch(y){m.call(this,y);break}}try{d=Tf.call(this,g)}catch(p){return Promise.reject(p)}for(f=0,h=u.length;f<h;)d=d.then(u[f++],u[f++]);return d}getUri(e){e=ys(this.defaults,e);const n=Bg(e.baseURL,e.url,e.allowAbsoluteUrls);return Fg(n,e.params,e.paramsSerializer)}};N.forEach(["delete","get","head","options"],function(e){cs.prototype[e]=function(n,s){return this.request(ys(s||{},{method:e,url:n,data:(s||{}).data}))}});N.forEach(["post","put","patch"],function(e){function n(s){return function(i,o,a){return this.request(ys(a||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}cs.prototype[e]=n(),cs.prototype[e+"Form"]=n(!0)});let $v=class Rg{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const s=this;this.promise.then(r=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](r);s._listeners=null}),this.promise.then=r=>{let i;const o=new Promise(a=>{s.subscribe(a),i=a}).then(r);return o.cancel=function(){s.unsubscribe(i)},o},e(function(i,o,a){s.reason||(s.reason=new ar(i,o,a),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=s=>{e.abort(s)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Rg(function(r){e=r}),cancel:e}}};function Wv(t){return function(n){return t.apply(null,n)}}function Vv(t){return N.isObject(t)&&t.isAxiosError===!0}const _u={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(_u).forEach(([t,e])=>{_u[e]=t});function Ig(t){const e=new cs(t),n=gg(cs.prototype.request,e);return N.extend(n,cs.prototype,e,{allOwnKeys:!0}),N.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return Ig(ys(t,r))},n}const Fe=Ig(Fi);Fe.Axios=cs;Fe.CanceledError=ar;Fe.CancelToken=$v;Fe.isCancel=Ag;Fe.VERSION=Mg;Fe.toFormData=Ba;Fe.AxiosError=te;Fe.Cancel=Fe.CanceledError;Fe.all=function(e){return Promise.all(e)};Fe.spread=Wv;Fe.isAxiosError=Vv;Fe.mergeConfig=ys;Fe.AxiosHeaders=ft;Fe.formToJSON=t=>jg(N.isHTMLForm(t)?new FormData(t):t);Fe.getAdapter=Og.getAdapter;Fe.HttpStatusCode=_u;Fe.default=Fe;const{Axios:qE,AxiosError:KE,CanceledError:YE,isCancel:XE,CancelToken:QE,VERSION:GE,all:JE,Cancel:ZE,isAxiosError:ek,spread:tk,toFormData:nk,AxiosHeaders:sk,HttpStatusCode:rk,formToJSON:ik,getAdapter:ok,mergeConfig:ak}=Fe,Js="http://localhost:5000",Ni="http://localhost:5000",ye=Fe.create({baseURL:Js});ye.interceptors.request.use(t=>{const e=localStorage.getItem("token");return e&&(t.headers.Authorization=`Bearer ${e}`),t});ye.interceptors.response.use(t=>t,t=>{var e;if(((e=t.response)==null?void 0:e.status)===401){localStorage.removeItem("token");try{sessionStorage.getItem("auth_reloaded")?console.warn("401 received but reload already attempted this session"):(sessionStorage.setItem("auth_reloaded","1"),setTimeout(()=>window.location.reload(),50))}catch{try{window.location.reload()}catch(s){console.error("Failed to reload after 401",s)}}}return Promise.reject(t)});const qv=t=>ye.put("/users/update",t),Kv=t=>ye.put("/users/change-password",t),Yv=t=>ye.post("/users/upload-avatar",t),tn=Object.create(null);tn.open="0";tn.close="1";tn.ping="2";tn.pong="3";tn.message="4";tn.upgrade="5";tn.noop="6";const Fo=Object.create(null);Object.keys(tn).forEach(t=>{Fo[tn[t]]=t});const Su={type:"error",data:"parser error"},zg=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Ug=typeof ArrayBuffer=="function",Hg=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Uc=({type:t,data:e},n,s)=>zg&&e instanceof Blob?n?s(e):Pf(e,s):Ug&&(e instanceof ArrayBuffer||Hg(e))?n?s(e):Pf(new Blob([e]),s):s(tn[t]+(e||"")),Pf=(t,e)=>{const n=new FileReader;return n.onload=function(){const s=n.result.split(",")[1];e("b"+(s||""))},n.readAsDataURL(t)};function Lf(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let gl;function Xv(t,e){if(zg&&t.data instanceof Blob)return t.data.arrayBuffer().then(Lf).then(e);if(Ug&&(t.data instanceof ArrayBuffer||Hg(t.data)))return e(Lf(t.data));Uc(t,!1,n=>{gl||(gl=new TextEncoder),e(gl.encode(n))})}const Of="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",jr=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Of.length;t++)jr[Of.charCodeAt(t)]=t;const Qv=t=>{let e=t.length*.75,n=t.length,s,r=0,i,o,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const u=new ArrayBuffer(e),d=new Uint8Array(u);for(s=0;s<n;s+=4)i=jr[t.charCodeAt(s)],o=jr[t.charCodeAt(s+1)],a=jr[t.charCodeAt(s+2)],l=jr[t.charCodeAt(s+3)],d[r++]=i<<2|o>>4,d[r++]=(o&15)<<4|a>>2,d[r++]=(a&3)<<6|l&63;return u},Gv=typeof ArrayBuffer=="function",Hc=(t,e)=>{if(typeof t!="string")return{type:"message",data:$g(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:Jv(t.substring(1),e)}:Fo[n]?t.length>1?{type:Fo[n],data:t.substring(1)}:{type:Fo[n]}:Su},Jv=(t,e)=>{if(Gv){const n=Qv(t);return $g(n,e)}else return{base64:!0,data:t}},$g=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},Wg="",Zv=(t,e)=>{const n=t.length,s=new Array(n);let r=0;t.forEach((i,o)=>{Uc(i,!1,a=>{s[o]=a,++r===n&&e(s.join(Wg))})})},ew=(t,e)=>{const n=t.split(Wg),s=[];for(let r=0;r<n.length;r++){const i=Hc(n[r],e);if(s.push(i),i.type==="error")break}return s};function tw(){return new TransformStream({transform(t,e){Xv(t,n=>{const s=n.length;let r;if(s<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,s);else if(s<65536){r=new Uint8Array(3);const i=new DataView(r.buffer);i.setUint8(0,126),i.setUint16(1,s)}else{r=new Uint8Array(9);const i=new DataView(r.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(s))}t.data&&typeof t.data!="string"&&(r[0]|=128),e.enqueue(r),e.enqueue(n)})}})}let yl;function Qi(t){return t.reduce((e,n)=>e+n.length,0)}function Gi(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let s=0;for(let r=0;r<e;r++)n[r]=t[0][s++],s===t[0].length&&(t.shift(),s=0);return t.length&&s<t[0].length&&(t[0]=t[0].slice(s)),n}function nw(t,e){yl||(yl=new TextDecoder);const n=[];let s=0,r=-1,i=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(s===0){if(Qi(n)<1)break;const l=Gi(n,1);i=(l[0]&128)===128,r=l[0]&127,r<126?s=3:r===126?s=1:s=2}else if(s===1){if(Qi(n)<2)break;const l=Gi(n,2);r=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),s=3}else if(s===2){if(Qi(n)<8)break;const l=Gi(n,8),u=new DataView(l.buffer,l.byteOffset,l.length),d=u.getUint32(0);if(d>Math.pow(2,21)-1){a.enqueue(Su);break}r=d*Math.pow(2,32)+u.getUint32(4),s=3}else{if(Qi(n)<r)break;const l=Gi(n,r);a.enqueue(Hc(i?l:yl.decode(l),e)),s=0}if(r===0||r>t){a.enqueue(Su);break}}}})}const Vg=4;function Be(t){if(t)return sw(t)}function sw(t){for(var e in Be.prototype)t[e]=Be.prototype[e];return t}Be.prototype.on=Be.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Be.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Be.prototype.off=Be.prototype.removeListener=Be.prototype.removeAllListeners=Be.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var s,r=0;r<n.length;r++)if(s=n[r],s===e||s.fn===e){n.splice(r,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Be.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(n){n=n.slice(0);for(var s=0,r=n.length;s<r;++s)n[s].apply(this,e)}return this};Be.prototype.emitReserved=Be.prototype.emit;Be.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Be.prototype.hasListeners=function(t){return!!this.listeners(t).length};const La=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),kt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),rw="arraybuffer";function qg(t,...e){return e.reduce((n,s)=>(t.hasOwnProperty(s)&&(n[s]=t[s]),n),{})}const iw=kt.setTimeout,ow=kt.clearTimeout;function Oa(t,e){e.useNativeTimers?(t.setTimeoutFn=iw.bind(kt),t.clearTimeoutFn=ow.bind(kt)):(t.setTimeoutFn=kt.setTimeout.bind(kt),t.clearTimeoutFn=kt.clearTimeout.bind(kt))}const aw=1.33;function lw(t){return typeof t=="string"?uw(t):Math.ceil((t.byteLength||t.size)*aw)}function uw(t){let e=0,n=0;for(let s=0,r=t.length;s<r;s++)e=t.charCodeAt(s),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(s++,n+=4);return n}function Kg(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function cw(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function dw(t){let e={},n=t.split("&");for(let s=0,r=n.length;s<r;s++){let i=n[s].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class fw extends Error{constructor(e,n,s){super(e),this.description=n,this.context=s,this.type="TransportError"}}class $c extends Be{constructor(e){super(),this.writable=!1,Oa(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,s){return super.emitReserved("error",new fw(e,n,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=Hc(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=cw(e);return n.length?"?"+n:""}}class hw extends $c{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||n()})),this.writable||(s++,this.once("drain",function(){--s||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};ew(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Zv(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Kg()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let Yg=!1;try{Yg=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const pw=Yg;function mw(){}class gw extends hw{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let s=location.port;s||(s=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port}}doWrite(e,n){const s=this.request({method:"POST",data:e});s.on("success",n),s.on("error",(r,i)=>{this.onError("xhr post error",r,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,s)=>{this.onError("xhr poll error",n,s)}),this.pollXhr=e}}class Zt extends Be{constructor(e,n,s){super(),this.createRequest=e,Oa(this,s),this._opts=s,this._method=s.method||"GET",this._uri=n,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var e;const n=qg(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(n);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let r in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(r)&&s.setRequestHeader(r,this._opts.extraHeaders[r])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var r;s.readyState===3&&((r=this._opts.cookieJar)===null||r===void 0||r.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(r){this.setTimeoutFn(()=>{this._onError(r)},0);return}typeof document<"u"&&(this._index=Zt.requestsCount++,Zt.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=mw,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Zt.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Zt.requestsCount=0;Zt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Mf);else if(typeof addEventListener=="function"){const t="onpagehide"in kt?"pagehide":"unload";addEventListener(t,Mf,!1)}}function Mf(){for(let t in Zt.requests)Zt.requests.hasOwnProperty(t)&&Zt.requests[t].abort()}const yw=function(){const t=Xg({xdomain:!1});return t&&t.responseType!==null}();class Dw extends gw{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=yw&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Zt(Xg,this.uri(),e)}}function Xg(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||pw))return new XMLHttpRequest}catch{}if(!e)try{return new kt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Qg=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class xw extends $c{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,s=Qg?{}:qg(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,s)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const s=e[n],r=n===e.length-1;Uc(s,this.supportsBinary,i=>{try{this.doWrite(s,i)}catch{}r&&La(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Kg()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const Dl=kt.WebSocket||kt.MozWebSocket;class vw extends xw{createSocket(e,n,s){return Qg?new Dl(e,n,s):n?new Dl(e,n):new Dl(e)}doWrite(e,n){this.ws.send(n)}}class ww extends $c{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=nw(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(n).getReader(),r=tw();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const i=()=>{s.read().then(({done:a,value:l})=>{a||(this.onPacket(l),i())}).catch(a=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const s=e[n],r=n===e.length-1;this._writer.write(s).then(()=>{r&&La(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const bw={websocket:vw,webtransport:ww,polling:Dw},Cw=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Ew=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Fu(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),s=t.indexOf("]");n!=-1&&s!=-1&&(t=t.substring(0,n)+t.substring(n,s).replace(/:/g,";")+t.substring(s,t.length));let r=Cw.exec(t||""),i={},o=14;for(;o--;)i[Ew[o]]=r[o]||"";return n!=-1&&s!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=kw(i,i.path),i.queryKey=_w(i,i.query),i}function kw(t,e){const n=/\/{2,9}/g,s=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&s.splice(0,1),e.slice(-1)=="/"&&s.splice(s.length-1,1),s}function _w(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,r,i){r&&(n[r]=i)}),n}const Nu=typeof addEventListener=="function"&&typeof removeEventListener=="function",No=[];Nu&&addEventListener("offline",()=>{No.forEach(t=>t())},!1);class Rn extends Be{constructor(e,n){if(super(),this.binaryType=rw,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const s=Fu(e);n.hostname=s.host,n.secure=s.protocol==="https"||s.protocol==="wss",n.port=s.port,s.query&&(n.query=s.query)}else n.host&&(n.hostname=Fu(n.host).host);Oa(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(s=>{const r=s.prototype.name;this.transports.push(r),this._transportsByName[r]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=dw(this.opts.query)),Nu&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},No.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=Vg,n.transport=e,this.id&&(n.sid=this.id);const s=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Rn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Rn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let s=0;s<this.writeBuffer.length;s++){const r=this.writeBuffer[s].data;if(r&&(n+=lw(r)),s>0&&n>this._maxPayload)return this.writeBuffer.slice(0,s);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,La(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,s){return this._sendPacket("message",e,n,s),this}send(e,n,s){return this._sendPacket("message",e,n,s),this}_sendPacket(e,n,s,r){if(typeof n=="function"&&(r=n,n=void 0),typeof s=="function"&&(r=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const i={type:e,data:n,options:s};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},s=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(Rn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Nu&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=No.indexOf(this._offlineEventListener);s!==-1&&No.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}Rn.protocol=Vg;class Sw extends Rn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),s=!1;Rn.priorWebsocketSuccess=!1;const r=()=>{s||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!s)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Rn.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(d(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=n.name,this.emitReserved("upgradeError",h)}}))};function i(){s||(s=!0,d(),n.close(),n=null)}const o=f=>{const h=new Error("probe error: "+f);h.transport=n.name,i(),this.emitReserved("upgradeError",h)};function a(){o("transport closed")}function l(){o("socket closed")}function u(f){n&&f.name!==n.name&&i()}const d=()=>{n.removeListener("open",r),n.removeListener("error",o),n.removeListener("close",a),this.off("close",l),this.off("upgrading",u)};n.once("open",r),n.once("error",o),n.once("close",a),this.once("close",l),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{s||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&n.push(e[s]);return n}}let Fw=class extends Sw{constructor(e,n={}){const s=typeof e=="object"?e:n;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(r=>bw[r]).filter(r=>!!r)),super(e,s)}};function Nw(t,e="",n){let s=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),s=Fu(t)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const i=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+i+":"+s.port+e,s.href=s.protocol+"://"+i+(n&&n.port===s.port?"":":"+s.port),s}const jw=typeof ArrayBuffer=="function",Aw=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Gg=Object.prototype.toString,Tw=typeof Blob=="function"||typeof Blob<"u"&&Gg.call(Blob)==="[object BlobConstructor]",Bw=typeof File=="function"||typeof File<"u"&&Gg.call(File)==="[object FileConstructor]";function Wc(t){return jw&&(t instanceof ArrayBuffer||Aw(t))||Tw&&t instanceof Blob||Bw&&t instanceof File}function jo(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,s=t.length;n<s;n++)if(jo(t[n]))return!0;return!1}if(Wc(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return jo(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&jo(t[n]))return!0;return!1}function Pw(t){const e=[],n=t.data,s=t;return s.data=ju(n,e),s.attachments=e.length,{packet:s,buffers:e}}function ju(t,e){if(!t)return t;if(Wc(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let s=0;s<t.length;s++)n[s]=ju(t[s],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=ju(t[s],e));return n}return t}function Lw(t,e){return t.data=Au(t.data,e),delete t.attachments,t}function Au(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Au(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=Au(t[n],e));return t}const Ow=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Mw=5;var le;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(le||(le={}));class Rw{constructor(e){this.replacer=e}encode(e){return(e.type===le.EVENT||e.type===le.ACK)&&jo(e)?this.encodeAsBinary({type:e.type===le.EVENT?le.BINARY_EVENT:le.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===le.BINARY_EVENT||e.type===le.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=Pw(e),s=this.encodeAsString(n.packet),r=n.buffers;return r.unshift(s),r}}function Rf(t){return Object.prototype.toString.call(t)==="[object Object]"}class Vc extends Be{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const s=n.type===le.BINARY_EVENT;s||n.type===le.BINARY_ACK?(n.type=s?le.EVENT:le.ACK,this.reconstructor=new Iw(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Wc(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const s={type:Number(e.charAt(0))};if(le[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===le.BINARY_EVENT||s.type===le.BINARY_ACK){const i=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(i,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");s.attachments=Number(o)}if(e.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););s.nsp=e.substring(i,n)}else s.nsp="/";const r=e.charAt(n+1);if(r!==""&&Number(r)==r){const i=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}s.id=Number(e.substring(i,n+1))}if(e.charAt(++n)){const i=this.tryParse(e.substr(n));if(Vc.isPayloadValid(s.type,i))s.data=i;else throw new Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case le.CONNECT:return Rf(n);case le.DISCONNECT:return n===void 0;case le.CONNECT_ERROR:return typeof n=="string"||Rf(n);case le.EVENT:case le.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Ow.indexOf(n[0])===-1);case le.ACK:case le.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Iw{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=Lw(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const zw=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Vc,Encoder:Rw,get PacketType(){return le},protocol:Mw},Symbol.toStringTag,{value:"Module"}));function Mt(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const Uw=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Jg extends Be{constructor(e,n,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Mt(e,"open",this.onopen.bind(this)),Mt(e,"packet",this.onpacket.bind(this)),Mt(e,"error",this.onerror.bind(this)),Mt(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var s,r,i;if(Uw.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:le.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const d=this.ids++,f=n.pop();this._registerAckCallback(d,f),o.id=d}const a=(r=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||r===void 0?void 0:r.writable,l=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!a||(l?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var s;const r=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(r===void 0){this.acks[e]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},r),o=(...a)=>{this.io.clearTimeoutFn(i),n.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((s,r)=>{const i=(o,a)=>o?r(o):s(a);i.withError=!0,n.push(i),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((r,...i)=>s!==this._queue[0]?void 0:(r!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(r)):(this._queue.shift(),n&&n(null,...i)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:le.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(s=>String(s.id)===e)){const s=this.acks[e];delete this.acks[e],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case le.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case le.EVENT:case le.BINARY_EVENT:this.onevent(e);break;case le.ACK:case le.BINARY_ACK:this.onack(e);break;case le.DISCONNECT:this.ondisconnect();break;case le.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const s of n)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let s=!1;return function(...r){s||(s=!0,n.packet({type:le.ACK,id:e,data:r}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:le.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let s=0;s<n.length;s++)if(e===n[s])return n.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let s=0;s<n.length;s++)if(e===n[s])return n.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const s of n)s.apply(this,e.data)}}}function lr(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}lr.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};lr.prototype.reset=function(){this.attempts=0};lr.prototype.setMin=function(t){this.ms=t};lr.prototype.setMax=function(t){this.max=t};lr.prototype.setJitter=function(t){this.jitter=t};class Tu extends Be{constructor(e,n){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Oa(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((s=n.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new lr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const r=n.parser||zw;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Fw(this.uri,this.opts);const n=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const r=Mt(n,"open",function(){s.onopen(),e&&e()}),i=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=Mt(n,"error",i);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{r(),i(new Error("timeout")),n.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(r),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Mt(e,"ping",this.onping.bind(this)),Mt(e,"data",this.ondata.bind(this)),Mt(e,"error",this.onerror.bind(this)),Mt(e,"close",this.onclose.bind(this)),Mt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){La(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new Jg(this,e,n),this.nsps[e]=s),s}_destroy(e){const n=Object.keys(this.nsps);for(const s of n)if(this.nsps[s].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let s=0;s<n.length;s++)this.engine.write(n[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(r=>{r?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",r)):e.onreconnect()}))},n);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const xr={};function In(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=Nw(t,e.path||"/socket.io"),s=n.source,r=n.id,i=n.path,o=xr[r]&&i in xr[r].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let l;return a?l=new Tu(s,e):(xr[r]||(xr[r]=new Tu(s,e)),l=xr[r]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(In,{Manager:Tu,Socket:Jg,io:In,connect:In});const Zg=S.createContext();function Hw({children:t}){const[e,n]=S.useState(()=>{try{const p=localStorage.getItem("user");return p?JSON.parse(p):null}catch{return null}}),[s,r]=S.useState(()=>localStorage.getItem("token")),[i,o]=S.useState(!0),[a,l]=S.useState(0),u=S.useRef(null);S.useEffect(()=>{const p=localStorage.getItem("token");try{const m=localStorage.getItem("user");m&&n(JSON.parse(m))}catch{}p&&(r(p),(async()=>{var m;try{console.log("AuthContext: attempting to restore user from /users/me");const y=await ye.get("/users/me"),D=((m=y.data)==null?void 0:m.user)??y.data;if(console.log("AuthContext: /users/me response",y.data),D){n(D);try{localStorage.setItem("user",JSON.stringify(D))}catch{}try{((D==null?void 0:D.role)==="admin"||String(D==null?void 0:D.username)==="admin")&&typeof window<"u"&&window.location.pathname!=="/admin"&&(window.location.pathname="/admin")}catch{}}}catch(y){console.warn("Auth restore failed (will keep cached token/user)",y)}})()),o(!1)},[]),S.useEffect(()=>{function p(m){try{m.key==="token"&&(console.log("AuthContext: storage event token changed",m.oldValue,m.newValue),m.newValue?m.newValue!==s&&console.warn("AuthContext: token changed in another tab. This tab will keep its active session to avoid unexpected switches."):(console.log("AuthContext: token removed in another tab, clearing local auth state"),n(null),r(null)))}catch(y){console.warn("AuthContext: storage event handler error",y)}}return window.addEventListener("storage",p),()=>window.removeEventListener("storage",p)},[s]),S.useEffect(()=>{if(s){try{const p=In(Ni,{auth:{token:s}});u.current=p,p.on("connect",()=>console.log("AuthContext: socket connected",p.id)),p.on("user:updated",m=>{try{const y=(m==null?void 0:m.user)||m;try{const D=y&&(y.id||y.userId||y._id),v=e&&(e.id||e.userId||e._id);D&&v&&String(D)===String(v)?h(y):console.log("AuthContext: ignoring user:updated for different user",{incomingId:D,currentId:v})}catch(D){console.warn("AuthContext: failed to compare user ids for user:updated",D)}}catch(y){console.warn("AuthContext: failed to apply user:updated payload",y)}}),p.on("disconnect",()=>console.log("AuthContext: socket disconnected"))}catch(p){console.warn("AuthContext: socket init failed",p)}return()=>{try{u.current&&u.current.disconnect()}catch{}u.current=null}}},[s]);const d=(p,m)=>{console.log("AuthContext.login: saving user and token",{userData:p,authToken:m}),n(p),r(m);try{const y=localStorage.getItem("token"),D=localStorage.getItem("user");let v=null;try{D&&(v=JSON.parse(D))}catch{v=null}if(m)try{localStorage.setItem("token",m),console.log("AuthContext.login: token written to localStorage")}catch(x){console.warn("AuthContext.login: failed to write token to localStorage",x)}else try{localStorage.removeItem("token"),console.log("AuthContext.login: no token returned, cleared stored token")}catch{}p&&(localStorage.setItem("user",JSON.stringify(p)),console.log("AuthContext.login: user written to localStorage"))}catch(y){console.warn("AuthContext.login: failed to write auth data to localStorage",y)}try{((p==null?void 0:p.role)==="admin"||String(p==null?void 0:p.username)==="admin")&&typeof window<"u"&&window.location.pathname!=="/admin"&&(window.location.pathname="/admin")}catch{}},f=p=>{console.log(" AuthContext: Updating user data (no localStorage):",p),console.log(" AuthContext: Previous user data:",e);const m={...p};n(m),l(y=>y+1),console.log(" AuthContext: User updated successfully (no localStorage)")},h=p=>{f(p);try{localStorage.setItem("user",JSON.stringify(p)),console.log("AuthContext: persisted updated user to localStorage")}catch(m){console.warn("AuthContext: failed to persist updated user",m)}},g=()=>{n(null),r(null);try{localStorage.removeItem("token"),localStorage.removeItem("user")}catch{}};return c.jsx(Zg.Provider,{value:{user:e,token:s,login:d,logout:g,updateUserOnly:h,isLoading:i,setUser:h,updateTrigger:a},children:t})}const st=()=>{const t=S.useContext(Zg);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},$w="/assets/mini-social-OK2GutAU.png";function Ww({onClose:t}){const{login:e}=st(),[n,s]=S.useState(!0),[r,i]=S.useState({username:"",password:"",email:"",displayName:"",fullName:""}),[o,a]=S.useState(!1),l=async u=>{var d,f,h,g;u.preventDefault(),a(!0);try{if(n){const m=(await ye.post("/auth/login",{username:r.username,password:r.password})).data||{},y=m.token||m.accessToken||((d=m==null?void 0:m.data)==null?void 0:d.token)||((f=m==null?void 0:m.token)==null?void 0:f.token),D=m.user??m;if(!y){console.warn("Login response did not include a token:",m);try{localStorage.removeItem("token")}catch{}alert("Login succeeded but server did not return a token. Please try again or contact support.")}if(y&&D)try{const v=y.split(".");if(v.length>=2){const x=JSON.parse(atob(v[1])),w=x.userId||x.id||x.sub,b=D.id||D.userId||null;if(w&&b&&String(w)!==String(b)){console.error("Token payload userId does not match returned user id",{tokenUserId:w,returnedUserId:b});try{localStorage.removeItem("token")}catch{}alert("Login failed: token does not match user information. Please contact support."),a(!1);return}}}catch(v){console.warn("Failed to decode token for sanity check",v)}e(D,y),t()}else await ye.post("/auth/register",r),alert("Account created! Please login."),s(!0)}catch(p){console.error("Auth error:",p),alert(((g=(h=p.response)==null?void 0:h.data)==null?void 0:g.error)||"Authentication failed")}finally{a(!1)}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl overflow-hidden grid grid-cols-1 md:grid-cols-11 min-h-[600px]",children:[c.jsxs("div",{className:"hidden md:flex flex-col items-center justify-center modal-bg-pink p-8 md:col-span-5",children:[c.jsxs("h3",{className:"text-white text-lg md:text-xl font-bold mb-3 uppercase text-center leading-snug md:leading-normal tracking-wide md:tracking-[0.06em]",children:[c.jsx("span",{className:"block mb-1",children:"CHO MNG N VI MNG"}),c.jsx("span",{className:"block",children:"X HI NEO4JI BIG DATA"})]}),c.jsx("img",{src:$w,alt:"decor",className:"w-56 h-56 md:w-80 md:h-80 object-contain"}),c.jsx("p",{className:"text-white text-sm mt-4",children:"Kt ni, chia s v khm ph cng mi ngi"})]}),c.jsxs("div",{className:"p-6 md:p-10 md:col-span-6 flex flex-col justify-center relative",children:[c.jsxs("div",{className:"relative mb-4",children:[c.jsxs("div",{className:"max-w-md mx-auto w-full",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900",children:n?"ng nhp":"To ti khon"}),c.jsx("div",{className:"text-sm text-gray-500",children:n?"Cho mng tr li  vui lng nhp thng tin  ng nhp":"To ti khon  tip tc"})]}),c.jsx("button",{onClick:t,className:"absolute right-0 top-0 text-gray-400 hover:text-gray-600 text-2xl","aria-label":"Close",children:""})]}),c.jsxs("form",{onSubmit:l,className:"space-y-6 max-w-md mx-auto",children:[!n&&c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"text",placeholder:"H v tn",value:r.fullName,onChange:u=>i({...r,fullName:u.target.value}),className:"w-full px-4 py-4 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-300 text-base",required:!0}),c.jsx("input",{type:"email",placeholder:"Email",value:r.email,onChange:u=>i({...r,email:u.target.value}),className:"w-full px-4 py-4 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-300 text-base",required:!0})]}),c.jsx("input",{type:"text",placeholder:"Tn ng nhp",value:r.username,onChange:u=>i({...r,username:u.target.value}),className:"w-full px-4 py-4 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-300 text-base",required:!0}),c.jsx("input",{type:"password",placeholder:"Mt khu",value:r.password,onChange:u=>i({...r,password:u.target.value}),className:"w-full px-4 py-4 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-300 text-base",required:!0}),c.jsx("button",{type:"submit",disabled:o,className:"w-full auth-btn--primary py-4 rounded-lg font-semibold hover:bg-indigo-700 disabled:bg-gray-300 transition-colors text-base",children:o?"ang x l...":n?"ng nhp":"To ti khon"}),c.jsx("div",{className:"mt-4 text-center",children:c.jsx("button",{type:"button",onClick:()=>s(!n),className:"text-indigo-600 hover:underline text-sm",children:n?"Bn cha c ti khon? To ti khon":" c ti khon? ng nhp"})})]}),c.jsxs("div",{className:"mt-8 flex items-center gap-3",children:[c.jsx("div",{className:"flex-1 border-t border-gray-200"}),c.jsx("div",{className:"text-xs text-gray-400",children:"hoc tip tc vi"}),c.jsx("div",{className:"flex-1 border-t border-gray-200"})]}),c.jsxs("div",{className:"mt-6 max-w-md mx-auto grid grid-cols-2 gap-4",children:[c.jsxs("button",{type:"button",onClick:()=>alert("Google sign-in placeholder"),className:"w-full flex items-center justify-center gap-3 border border-gray-200 rounded-lg py-3 hover:shadow-sm text-sm auth-btn--wide",children:[c.jsx("img",{src:"https://www.svgrepo.com/show/355037/google.svg",alt:"google",className:"w-6 h-6"}),c.jsx("span",{className:"text-sm",children:"Google"})]}),c.jsxs("button",{type:"button",onClick:()=>alert("Facebook sign-in placeholder"),className:"w-full flex items-center justify-center gap-3 border border-gray-200 rounded-lg py-3 hover:shadow-sm text-sm auth-btn--wide",children:[c.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg",alt:"fb",className:"w-6 h-6"}),c.jsx("span",{className:"text-sm",children:"Facebook"})]})]})]})]})})}var e0={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},If=yt.createContext&&yt.createContext(e0),zn=function(){return zn=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},zn.apply(this,arguments)},Vw=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n};function t0(t){return t&&t.map(function(e,n){return yt.createElement(e.tag,zn({key:n},e.attr),t0(e.child))})}function Yn(t){return function(e){return yt.createElement(qw,zn({attr:zn({},t.attr)},e),t0(t.child))}}function qw(t){var e=function(n){var s=t.attr,r=t.size,i=t.title,o=Vw(t,["attr","size","title"]),a=r||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),yt.createElement("svg",zn({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,o,{className:l,style:zn(zn({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&yt.createElement("title",null,i),t.children)};return If!==void 0?yt.createElement(If.Consumer,null,function(n){return e(n)}):e(e0)}function Kw(t){return Yn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"}}]})(t)}function Yw(t){return Yn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"}}]})(t)}function n0(t){return Yn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"}}]})(t)}function Xw(t){return Yn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"}}]})(t)}function s0(t){return Yn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(t)}function Qw(t){return Yn({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"}}]})(t)}function Gw({onClose:t}){const{user:e,updateUserOnly:n}=st(),[s,r]=S.useState({displayName:(e==null?void 0:e.displayName)||(e==null?void 0:e.username)||""}),[i,o]=S.useState(null),[a,l]=S.useState(!1),[u,d]=S.useState(""),f=p=>{r({...s,[p.target.name]:p.target.value})},h=p=>{o(p.target.files[0])},g=async p=>{var m,y,D,v;p.preventDefault(),l(!0),d("");try{let x=null,w;if(i){const _=new FormData;_.append("avatar",i);const F=await Yv(_);(m=F.data)!=null&&m.user&&(x=F.data.user),w=(y=F.data)==null?void 0:y.avatarUrl}const b={displayName:s.displayName};w&&(b.avatarUrl=w),console.log(" Sending update payload:",b);const E=await qv(b);console.log(" Server response:",E),console.log(" Response data:",E.data);const k=E.data||x;console.log(" Updated user data from server:",k);const C={...e,...k,displayName:k.displayName,avatarUrl:k.avatarUrl||w||e.avatarUrl};console.log(" Current user before update:",e),console.log(" Final user data to save:",C),n(C),console.log(" User context updated with fresh data from Neo4j!"),console.log(" All components will re-fetch data due to updateTrigger");try{window.dispatchEvent(new CustomEvent("app:user:updated",{detail:{user:C}}))}catch(_){console.warn("Failed to dispatch app:user:updated",_)}try{const _={id:`local-user-update-${C.id}-${Date.now()}`,type:"profile:update",message:"CP NHT H S THNH CNG !",from:C.displayName||C.username,fromUserId:C.id,postId:null,timestamp:Date.now()};window.dispatchEvent(new CustomEvent("app:notification:new",{detail:_}))}catch(_){console.warn("Failed to dispatch app:notification:new",_)}try{window.appToast?window.appToast("CP NHT H S THNH CNG !"):alert("CP NHT H S THNH CNG !")}catch{try{alert(`Cp nht thnh cng! Tn mi: ${C.displayName}`)}catch{}}t()}catch(x){const w=(v=(D=x.response)==null?void 0:D.data)==null?void 0:v.error;let b=w;w==="Display name cannot be empty"&&(b="Tn hin th khng c  trng"),w==="No updatable fields provided"&&(b="Khng c thng tin no  cp nht"),b||(b="Cp nht khng thnh cng"),d(b)}finally{l(!1)}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg w-full max-w-lg md:max-w-xl p-8 shadow-lg",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h2",{className:"text-2xl font-semibold",children:"Cp nht ti khon"}),c.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u&&c.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:u}),c.jsxs("form",{onSubmit:g,className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"w-10 h-10 rounded-lg icon-no-bg flex items-center justify-center text-gray-600",children:c.jsx(s0,{className:"w-5 h-5"})})}),c.jsx("label",{htmlFor:"displayName",className:"w-20 md:w-24 text-sm font-medium text-gray-700",children:"Tn hin th"}),c.jsx("input",{id:"displayName",type:"text",name:"displayName",value:s.displayName,onChange:f,className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",required:!0})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"w-10 h-10 rounded-lg icon-no-bg flex items-center justify-center text-gray-600",children:c.jsx(n0,{className:"w-5 h-5"})})}),c.jsx("label",{htmlFor:"avatar",className:"w-20 md:w-24 text-sm font-medium text-gray-700",children:"nh i din"}),c.jsx("div",{className:"flex-1",children:c.jsx("input",{id:"avatar",type:"file",accept:"image/*",onChange:h,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})})]}),c.jsxs("div",{className:"flex gap-4 pt-6",children:[c.jsx("button",{type:"button",onClick:t,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Hy"}),c.jsx("button",{type:"submit",disabled:a,className:"flex-1 px-6 py-3 bg-black text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 transition-colors duration-200",children:a?"ang lu...":"Lu thay i"})]})]})]})})}function Jw({onClose:t}){const[e,n]=S.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[s,r]=S.useState(!1),[i,o]=S.useState(""),[a,l]=S.useState(""),u=f=>{n({...e,[f.target.name]:f.target.value})},d=async f=>{var h,g;if(f.preventDefault(),r(!0),o(""),l(""),e.newPassword!==e.confirmPassword){o("Mt khu mi khng khp"),r(!1);return}if(e.newPassword.length<5){o("Mt khu mi phi c t nht 5 k t"),r(!1);return}try{await Kv({currentPassword:e.currentPassword,newPassword:e.newPassword}),l("i mt khu thnh cng!"),setTimeout(()=>{t()},2e3)}catch(p){o(((g=(h=p.response)==null?void 0:h.data)==null?void 0:g.error)||"Failed to change password")}finally{r(!1)}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-xl font-semibold",children:"i mt khu"}),c.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-full",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i&&c.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:i}),a&&c.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded",children:a}),c.jsxs("form",{onSubmit:d,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mt khu hin ti"}),c.jsx("input",{type:"password",name:"currentPassword",value:e.currentPassword,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mt khu mi"}),c.jsx("input",{type:"password",name:"newPassword",value:e.newPassword,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,minLength:6}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"t nht 6 k t"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Xc nhn mt khu mi"}),c.jsx("input",{type:"password",name:"confirmPassword",value:e.confirmPassword,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Hy"}),c.jsx("button",{type:"submit",disabled:s,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:s?"ang i...":"i mt khu"})]})]})]})})}function Zw({onSelect:t}){const{user:e,updateTrigger:n}=st(),[s,r]=S.useState([]),[i,o]=S.useState(!0),[a,l]=S.useState([]),[u,d]=S.useState(!1);return S.useEffect(()=>{let f=!1;return e&&(async()=>{o(!0);try{const g=await ye.get("/messages/threads");f||r(g.data||[])}catch(g){console.error("Failed to load threads",g)}finally{f||o(!1)}})(),()=>f=!0},[e,n]),S.useEffect(()=>{function f(h){const g=h.detail||h;if(!g||!g.user)return;const p=g.user;try{r(m=>m.map(y=>{try{if(y&&y.other&&(String(y.other.id)===String(p.id)||y.other.username&&p.username&&String(y.other.username)===String(p.username)))return{...y,other:{...y.other,...p}}}catch{}return y}))}catch{}try{l(m=>m.map(y=>{try{if(!y)return y;if(y.id&&p.id&&String(y.id)===String(p.id))return{...y,...p};if(y.username&&p.username&&String(y.username)===String(p.username))return{...y,...p}}catch{}return y}))}catch{}}return window.addEventListener("app:user:updated",f),()=>window.removeEventListener("app:user:updated",f)},[]),S.useEffect(()=>{let f=!1;return e&&!i&&(async()=>{console.log(" Loading user suggestions..."),d(!0);try{const g=await ye.get("/users/suggestions");if(console.log(" Suggestions response:",g.data),!f){const m=(Array.isArray(g.data)?g.data:[]).filter(y=>!(!y||e!=null&&e.id&&y.id&&y.id===e.id||e!=null&&e.username&&y.username&&y.username===e.username));l(m)}}catch(g){console.error(" Failed to load suggestions:",g)}finally{f||d(!1)}})(),()=>f=!0},[e,s.length,i,n]),e?(console.log(" Rendering ChatSidebar:",{user:e.username,loading:i,threadsCount:s.length,suggestionsCount:a.length,loadingSuggestions:u}),c.jsx("div",{className:"p-4 h-full overflow-y-auto",children:i?c.jsx("div",{className:"text-sm text-gray-500",children:"Loading..."}):c.jsxs("div",{className:"space-y-4",children:[s.filter(f=>f.lastMsg&&(f.lastMsg.text||f.lastMsg.type)).length>0&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-600 font-medium mb-2 uppercase tracking-wide font-['Inter',sans-serif]",children:"CUC TR CHUYN GN Y"}),c.jsx("div",{className:"space-y-2 mb-4",children:s.filter(f=>f.lastMsg&&(f.lastMsg.text||f.lastMsg.type)).map((f,h)=>{var g,p,m,y,D,v,x,w,b;return c.jsxs("button",{onClick:()=>t(f.other),className:"w-full text-left flex items-center gap-3 p-3 bg-white rounded-lg shadow-sm hover:shadow-md transition-colors",children:[(g=f.other)!=null&&g.avatarUrl?c.jsx("img",{src:`http://localhost:5000${f.other.avatarUrl}`,alt:f.other.displayName||f.other.username,className:"w-10 h-10 rounded-full object-cover shadow-avatar"}):c.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-400 to-purple-400 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-avatar",children:(((m=(p=f.other)==null?void 0:p.displayName)==null?void 0:m[0])||((D=(y=f.other)==null?void 0:y.username)==null?void 0:D[0])||"?").toUpperCase()}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"font-medium text-sm text-gray-900",children:((v=f.other)==null?void 0:v.displayName)||((x=f.other)==null?void 0:x.username)||"Unknown User"}),c.jsx("div",{className:"text-xs text-gray-500 truncate",children:((w=f.lastMsg)==null?void 0:w.text)||"Cha c tin nhn"})]}),c.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"})]},`thread-${((b=f.other)==null?void 0:b.id)||h}`)})})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-600 font-medium mb-2 uppercase tracking-wide font-['Inter',sans-serif]",children:"BT U CUC TR CHUYN MI"}),u?c.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:c.jsxs("div",{className:"inline-flex items-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500 mr-2"}),"ang ti..."]})}):a.length===0?c.jsxs("div",{className:"text-center py-4",children:[c.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Cha c ngi dng"}),c.jsx("div",{className:"text-xs text-gray-400",children:"ng k thm user  chat"})]}):c.jsx("div",{className:"space-y-2",children:(()=>{const f=new Set(s.map(g=>{var p,m;return((p=g.other)==null?void 0:p.id)||((m=g.other)==null?void 0:m.username)}).filter(Boolean));return a.filter(g=>{const p=(g==null?void 0:g.id)||(g==null?void 0:g.username);return p?!f.has(p):!1}).map((g,p)=>{var m,y,D;return c.jsxs("button",{onClick:()=>t(g),className:"w-full text-left flex items-center gap-3 p-3 bg-white rounded-lg shadow-sm hover:shadow-md transition-colors",children:[g!=null&&g.avatarUrl?c.jsx("img",{src:`http://localhost:5000${g.avatarUrl}`,alt:g.displayName||g.username,className:"w-10 h-10 rounded-full object-cover shadow-avatar"}):c.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-green-400 to-blue-400 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-avatar",children:(D=((m=g.displayName)==null?void 0:m[0])||((y=g.username)==null?void 0:y[0]))==null?void 0:D.toUpperCase()}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"font-medium text-sm text-gray-900",children:g.displayName||g.username}),c.jsxs("div",{className:"text-xs text-gray-500",children:["@",g.username]})]}),c.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"})]},`suggestion-${g.id||g.username||p}`)})})()})]})]})})):(console.log(" No user - showing login prompt"),c.jsx("div",{className:"p-4 h-full",children:c.jsxs("div",{className:"text-sm text-gray-500 text-center py-8",children:[c.jsx("div",{className:"mb-2",children:"Vui lng ng nhp  chat"}),c.jsx("div",{className:"text-xs",children:"Click icon profile  login"})]})}))}const Zs=[{key:"happy",symbol:"",label:"hnh phc"},{key:"blessed",symbol:"",label:"c phc"},{key:"loved",symbol:"",label:"c yu"},{key:"adorable",symbol:"",label:"ng yu"},{key:"excited",symbol:"",label:"ho hng"},{key:"crazy",symbol:"",label:"in"},{key:"pleased",symbol:"",label:"sung sng"},{key:"shy",symbol:"",label:"kh di"},{key:"wonderful",symbol:"",label:"tuyt vi"},{key:"interesting",symbol:"",label:"th v"},{key:"relaxed",symbol:"",label:"th gin"},{key:"gift",symbol:"",label:"mng"},{key:"love",symbol:"",label:"yu"},{key:"inlove",symbol:"",label:"ang yu"},{key:"grateful",symbol:"",label:"bit n"},{key:"thankful",symbol:"",label:"bit n nh"},{key:"sad",symbol:"",label:"bun"},{key:"cry",symbol:"",label:"khc"},{key:"angry",symbol:"",label:"tc gin"},{key:"mad",symbol:"",label:"ni gin"},{key:"shocked",symbol:"",label:"ngc nhin"},{key:"confused",symbol:"",label:"bi ri"},{key:"scared",symbol:"",label:"s hi"},{key:"afraid",symbol:"",label:"hong s"},{key:"tired",symbol:"",label:"mt mi"},{key:"silly",symbol:"",label:"tinh nghch"},{key:"cool",symbol:"",label:"tuyt"},{key:"party",symbol:"",label:"vui v"},{key:"celebrate",symbol:"",label:"n mng"},{key:"proud",symbol:"",label:"t ho"},{key:"hopeful",symbol:"",label:"hy vng"},{key:"relieved",symbol:"",label:"th pho"},{key:"nostalgic",symbol:"",label:"nh li"},{key:"fun",symbol:"",label:"vui"},{key:"bored",symbol:"",label:"chn"},{key:"curious",symbol:"",label:"t m"},{key:"satisfied",symbol:"",label:"hi lng"},{key:"relax",symbol:"",label:"th thi"},{key:"thinking",symbol:"",label:"suy ngh"},{key:"celebration",symbol:"",label:"vui mng"},{key:"flower",symbol:"",label:"vui v nh"},{key:"kiss",symbol:"",label:"thng"},{key:"wow",symbol:"",label:"sc"},{key:"sweat",symbol:"",label:"hi hp"}],xl=t=>{if(!t)return"Just now";if(typeof t=="string")return t;if(typeof t=="object"&&t.year)try{return new Date(t.year.low||t.year,(t.month.low||t.month)-1,t.day.low||t.day,t.hour.low||t.hour,t.minute.low||t.minute,t.second.low||t.second).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return"Just now"}return"Just now"};function e1({peer:t}){const{user:e}=st(),[n,s]=S.useState([]),[r,i]=S.useState(""),[o,a]=S.useState(!1),[l,u]=S.useState(""),[d,f]=S.useState(!1),h=S.useRef(null),g=S.useRef(null),p=S.useRef(null),m=S.useRef(null),y=S.useRef(null),D=(x,w)=>x||"";S.useEffect(()=>{let x=!1;return(async()=>{if(!(!t||!e)){f(!0);try{const b=await ye.get(`/messages/conversation/${t.id}`);if(!x){const E=(b.data||[]).map(k=>({...k,direction:k.senderId===e.id?"out":"in",createdAt:xl(k.createdAt),text:D(k.text,k.icon)}));s(E)}}catch(b){console.error("Failed to load conversation",b)}finally{x||f(!1)}}})(),()=>x=!0},[t,e]),S.useEffect(()=>{if(!e)return;const x=localStorage.getItem("token");console.log(" Connecting to Socket.IO...",{userId:e.id,token:!!x});const w=In(Ni,{auth:{token:x}});return g.current=w,w.on("connect",()=>{console.log(" Socket connected!",w.id)}),w.on("connect_error",b=>{console.error(" Socket connection failed:",b)}),w.on("message:new",b=>{if(console.log(" Received message:new event:",b),!t){console.log(" No peer selected, ignoring message");return}const E=[e.id,t.id].sort().join("-");console.log(" Checking conversation:",{received:b.conversationId,expected:E}),b.conversationId===E?(console.log(" Message belongs to current conversation, adding to state"),s(k=>[...k,{...b.message,direction:b.message.senderId===e.id?"out":"in",createdAt:xl(b.message.createdAt),text:D(b.message.text,b.message.icon)}])):console.log(" Message for different conversation, ignoring")}),()=>{w.disconnect(),g.current=null}},[e,t]),S.useEffect(()=>{var x;(x=h.current)==null||x.scrollIntoView({behavior:"smooth"})},[n]),S.useEffect(()=>{if(!o)return;const x=w=>{m.current&&!m.current.contains(w.target)&&y.current&&!y.current.contains(w.target)&&a(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[o]);const v=async()=>{if(!r.trim()||!t)return;const x={toUserId:t.id,text:r};try{const w=await ye.post("/messages/send",x);s(b=>[...b,{...w.data,direction:"out",createdAt:xl(w.data.createdAt),text:D(w.data.text,w.data.icon)}]),i(""),u("")}catch(w){console.error("Send failed",w)}};return t?c.jsxs("div",{className:"flex flex-col bg-white border rounded-lg h-full",children:[c.jsxs("div",{className:"p-4 border-b",children:[c.jsx("div",{className:"font-semibold",children:t.displayName||t.username}),c.jsxs("div",{className:"text-xs text-gray-500",children:["@",t.username]})]}),c.jsxs("div",{className:"p-4 flex-1 overflow-auto space-y-3",children:[d?c.jsx("div",{className:"text-sm text-gray-500",children:"Loading..."}):n.length===0?c.jsx("div",{className:"text-sm text-gray-500",children:"No messages"}):n.map((x,w)=>c.jsx("div",{className:`w-full flex ${x.direction==="out"?"justify-end":"justify-start"}`,children:c.jsx("div",{className:`inline-block max-w-[80%] p-3 rounded-lg ${x.direction==="out"?"bg-blue-600 text-white text-right":"bg-gray-200 text-gray-900"}`,children:c.jsx("div",{className:"flex items-center gap-3 text-lg whitespace-pre-wrap break-words",children:c.jsx("div",{className:"inline-block",children:x.text})})})},w)),c.jsx("div",{ref:h})]}),c.jsxs("div",{className:"p-3 border-t flex gap-2 relative",children:[c.jsx("button",{ref:y,onClick:()=>a(x=>!x),className:`px-3 py-2 rounded border bg-white text-xl ${o?"ring-2 ring-blue-300":""}`,title:"Choose emoji",children:""}),o&&c.jsx("div",{ref:m,className:"absolute left-3 bottom-16 bg-white border rounded shadow p-3 w-64 max-h-48 overflow-auto z-50",children:c.jsx("div",{className:"grid grid-cols-7 gap-2",children:Zs.map(x=>c.jsx("button",{onClick:()=>{const w=x.symbol||x.label||"",b=p.current,E=b&&b.selectionStart||0,k=b&&b.selectionEnd||0,C=r.slice(0,E),_=r.slice(k),F=C+w+_;i(F),requestAnimationFrame(()=>{try{b&&b.focus();const T=E+(w?w.length:0);b&&b.setSelectionRange(T,T)}catch{}})},className:"p-2 text-lg rounded hover:bg-gray-100 transition-colors",title:x.label,children:x.symbol},x.key))})})," ",c.jsx("input",{ref:p,value:r,onChange:x=>i(x.target.value),className:"flex-1 border rounded px-3 py-2",placeholder:"Nhp tin nhn..."}),c.jsx("button",{onClick:v,className:"bg-black text-white px-4 py-2 rounded hover:bg-gray-900",children:"Gi"})]})]}):c.jsx("div",{className:"bg-white border rounded-lg p-4 text-center text-gray-500",children:"Select a conversation"})}function t1(){const[t,e]=S.useState(null);return yt.useEffect(()=>{function n(s){const r=s.detail||s;if(!r||!r.user)return;const i=r.user;e(o=>{try{if(!o)return o;if(o.id&&i.id&&String(o.id)===String(i.id)||o.username&&i.username&&String(o.username)===String(i.username))return{...o,...i}}catch{}return o})}return window.addEventListener("app:user:updated",n),()=>window.removeEventListener("app:user:updated",n)},[]),t?c.jsxs("div",{className:"h-full flex flex-col",children:[c.jsx("div",{className:"border-b p-3 flex items-center justify-between bg-gray-50",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>e(null),className:"text-gray-500 hover:text-gray-700 text-sm",children:" Quay li"}),c.jsx("span",{className:"font-semibold text-sm",children:t.displayName||t.username})]})}),c.jsx("div",{className:"flex-1 overflow-hidden",children:c.jsx(e1,{peer:t})})]}):c.jsx("div",{className:"h-full",children:c.jsx(Zw,{onSelect:e})})}function n1({className:t="w-4 h-4"}){return c.jsx("svg",{className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})}function s1({className:t="w-4 h-4"}){return c.jsx("svg",{className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7a4 4 0 11-8 0 4 4 0 018 0zM9 14a6 6 0 00-6 6v1h12v-1a6 6 0 00-6-6zM21 12h-6"})})}function r1({className:t="w-4 h-4"}){return c.jsx("svg",{className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}function i1({isOpen:t,onClose:e}){const{user:n}=st(),[s,r]=S.useState([]),[i,o]=S.useState([]),[a,l]=S.useState(!1),u=async()=>{l(!0);try{const h=await ye.get("/users/connections");r(h.data.following||[]),o(h.data.followers||[])}catch(h){console.error("Failed to load connections",h)}finally{l(!1)}};S.useEffect(()=>{t&&u()},[t]),S.useEffect(()=>{const h=g=>{try{const p=g.detail||{};p.following||p.followers?(!p.targetId||p.targetId===(n==null?void 0:n.id)||t)&&(r(p.following||[]),o(p.followers||[])):p.targetId&&p.targetId===(n==null?void 0:n.id)&&(r(p.following||[]),o(p.followers||[]))}catch(p){console.warn("Failed to apply connections:update",p)}};return window.addEventListener("app:connections:update",h),()=>window.removeEventListener("app:connections:update",h)},[n==null?void 0:n.id,t]),S.useEffect(()=>{function h(g){const p=g.detail||g;if(!p||!p.user)return;const m=p.user;try{r(y=>y.map(D=>{try{if(!D)return D;if(D.id&&m.id&&String(D.id)===String(m.id))return{...D,...m};if(D.username&&m.username&&String(D.username)===String(m.username))return{...D,...m}}catch{}return D})),o(y=>y.map(D=>{try{if(!D)return D;if(D.id&&m.id&&String(D.id)===String(m.id))return{...D,...m};if(D.username&&m.username&&String(D.username)===String(m.username))return{...D,...m}}catch{}return D}))}catch{}}return window.addEventListener("app:user:updated",h),()=>window.removeEventListener("app:user:updated",h)},[]),S.useEffect(()=>{const h=p=>{t&&u()},g=p=>{t&&u()};return window.addEventListener("app:user:follow",h),window.addEventListener("app:user:unfollow",g),()=>{window.removeEventListener("app:user:follow",h),window.removeEventListener("app:user:unfollow",g)}},[t]);const d=async(h,g)=>{try{g?await ye.delete(`/users/follow/${h}`):await ye.post(`/users/follow/${h}`),await u();try{const p={followerId:n==null?void 0:n.id,followingId:h},m=g?"app:user:unfollow":"app:user:follow";window.dispatchEvent(new CustomEvent(m,{detail:p}))}catch{}}catch(p){console.error("Follow toggle failed",p)}};if(!t)return null;const f=new Set(s.map(h=>h.id));return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 z-50 flex items-start md:items-center justify-center p-6",children:c.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl shadow-xl overflow-hidden ring-1 ring-gray-100",children:[c.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-3xl font-semibold",children:"Kt ni"}),c.jsx("p",{className:"text-base text-gray-500",children:"Qun l nhng ngi bn theo di v ngi ang theo di bn"})]}),c.jsx("div",{className:"flex items-center gap-3",children:c.jsx("button",{onClick:e,className:"px-4 py-2 rounded-md bg-gradient-to-r from-slate-600 to-gray-700 text-white font-medium hover:from-slate-700 hover:to-gray-800 shadow-md transition transform hover:scale-105","aria-label":"ng kt ni",children:c.jsx("span",{className:"uppercase tracking-wide",children:"NG"})})})]}),c.jsx("div",{className:"p-6",children:a?c.jsx("div",{className:"text-center py-8 text-gray-600",children:"ang ti kt ni"}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("section",{children:[c.jsx("h3",{className:"font-medium text-lg mb-3",children:"ang theo di"}),c.jsxs("div",{className:"space-y-4",children:[s.length===0&&c.jsx("div",{className:"text-sm text-gray-600",children:"Bn cha theo di ai."}),s.map(h=>c.jsx(zf,{profile:h,isFollowing:!0,onToggle:d},`f-${h.id}`))]})]}),c.jsxs("section",{children:[c.jsx("h3",{className:"font-medium text-lg mb-3",children:"Ngi theo di"}),c.jsxs("div",{className:"space-y-4",children:[i.length===0&&c.jsx("div",{className:"text-sm text-gray-600",children:"Cha c ngi theo di."}),i.map(h=>c.jsx(zf,{profile:h,isFollowing:f.has(h.id),isFollower:!0,onToggle:d},`r-${h.id}`))]})]})]})})]})})}function zf({profile:t,isFollowing:e,isFollower:n,onToggle:s}){const{user:r}=st(),i=async()=>{if(!(!t||!t.id))try{await ye.delete(`/users/remove-follower/${t.id}`),window.dispatchEvent(new CustomEvent("app:user:unfollow",{detail:{followerId:t.id,followingId:r==null?void 0:r.id}}))}catch(a){console.error("Failed to remove follower",a)}},o=()=>{!t||!t.id||s(t.id,!!e)};return c.jsxs("div",{className:"flex items-center justify-between p-5 rounded-lg shadow-sm hover:shadow-lg transition-colors duration-150 bg-gradient-to-r from-gray-50 to-white",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[t.avatarUrl?c.jsx("img",{src:`http://localhost:5000${t.avatarUrl}`,alt:t.displayName||t.username,className:"w-12 h-12 rounded-full object-cover shadow-avatar"}):c.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-400 to-purple-400 rounded-full flex items-center justify-center text-white font-bold text-base shadow-avatar",children:(t.displayName||t.username||"?")[0]}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-gray-800",children:t.displayName||t.username}),c.jsxs("div",{className:"text-sm text-gray-500",children:["@",t.username]}),t.bio&&c.jsx("div",{className:"text-xs text-gray-400 mt-1",children:t.bio})]})]}),c.jsx("div",{children:t.id===r.id?c.jsx("span",{className:"text-sm text-gray-500",children:"Bn"}):n?c.jsx("div",{className:"relative",children:c.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 rounded-md bg-gradient-to-r from-red-500 to-pink-600 text-white text-sm font-medium hover:from-red-600 hover:to-pink-700 shadow-md transition transform hover:scale-105",title:"Loi b ngi ny khi danh sch theo di",children:[c.jsx(r1,{className:"w-4 h-4 text-white"}),c.jsx("span",{className:"uppercase tracking-wide",children:"LOI B"})]})}):e?c.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-4 py-2 rounded-md bg-gradient-to-r from-orange-500 to-amber-600 text-white text-sm font-medium hover:from-orange-600 hover:to-amber-700 shadow-md transition transform hover:scale-105",title:"Hy theo di",children:[c.jsx(s1,{className:"w-4 h-4 text-white"}),c.jsx("span",{className:"uppercase tracking-wide",children:"HY THEO DI"})]}):c.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-4 py-2 rounded-md bg-gradient-to-r from-emerald-500 to-teal-600 text-white text-sm font-medium hover:from-emerald-600 hover:to-teal-700 shadow-md transition transform hover:scale-105",title:"Theo di",children:[c.jsx(n1,{className:"w-4 h-4 text-white"}),c.jsx("span",{className:"uppercase tracking-wide",children:"THEO DI"})]})})]})}function o1(t){return Yn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"}}]})(t)}function a1(t){return Yn({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 0 0-44.4 0L77.5 505a63.9 63.9 0 0 0-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0 0 18.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"}}]})(t)}function l1(){const{user:t,logout:e,updateUserOnly:n,token:s}=st(),[r,i]=S.useState(!1),[o,a]=S.useState(!1),[l,u]=S.useState(!1),[d,f]=S.useState(!1),[h,g]=S.useState(!1),p=S.useRef(null),[m,y]=S.useState(0),[D,v]=S.useState(!1),x=S.useRef(null),[w,b]=S.useState([]),[E,k]=S.useState(!1),C=S.useRef(null),_=S.useRef(!1);S.useRef(!1);const F=S.useRef(new Set),T=S.useRef(new Set);S.useRef(0);const I=A=>Array.from(new Map(A.map(q=>[q.id,q])).values()),V=A=>{try{const q=A&&A.fromUserId!=null?String(A.fromUserId).trim():"",Y=A&&A.postId!=null?String(A.postId).trim():"",j=A&&A.type!=null?String(A.type).trim().toLowerCase():"",$=A&&A.commentId!=null?String(A.commentId).trim():"",ae=A&&A.commentText?String(A.commentText).trim().toLowerCase().slice(0,40):"";return`${q}::${Y}::${j}::${$}::${ae}`}catch{return String(A&&A.id)||""}},ne=A=>{const q=new Map;for(const Y of A){const j=V(Y),$=q.get(j);if(!$){q.set(j,Y);continue}const ae=Number($.timestamp)||0;(Number(Y.timestamp)||0)>ae?q.set(j,{...$,...Y,timeString:Y.timeString||$.timeString}):q.set(j,{...$,timeString:$.timeString||Y.timeString})}return Array.from(q.values())},J=async A=>{if(A)try{A.postId&&window.dispatchEvent(new CustomEvent("app:navigate:post",{detail:{postId:A.postId,commentId:A.commentId}}))}catch{}},ee=async(A,q)=>{if(q){try{A.stopPropagation()}catch{}if(!q.read){b(Y=>Y.map(j=>j.id===q.id?{...j,read:!0}:j));try{F.current.add(String(q.id));try{T.current.add(V(q))}catch{}}catch{}y(Y=>Math.max(0,Y-1)),(async()=>{try{const Y=s||localStorage.getItem("token");await fetch("http://localhost:5000/notifications/mark-read",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Y}`},body:JSON.stringify({notificationId:q.id})})}catch(Y){console.warn("Failed to persist single notification read (dot)",Y),b(j=>j.map($=>$.id===q.id?{...$,read:!1}:$)),y(j=>j+1)}})()}}},he=A=>{try{if(A==null)return{ts:null,timeString:null};if(typeof A=="object"&&typeof A.toNumber=="function"){const Y=A.toNumber();return{ts:Number.isFinite(Y)?Y:null,timeString:Number.isFinite(Y)?new Date(Y).toLocaleString("vi-VN"):null}}const q=Number(A);if(!Number.isNaN(q)&&Number.isFinite(q))return{ts:q,timeString:new Date(q).toLocaleString("vi-VN")}}catch{}return{ts:null,timeString:null}},[P,M]=S.useState(!1),[U,X]=S.useState(!0);S.useEffect(()=>{function A(q){p.current&&!p.current.contains(q.target)&&g(!1)}return window.addEventListener("click",A),()=>window.removeEventListener("click",A)},[]),S.useEffect(()=>{let A=null;if(!t)return;const q=s||localStorage.getItem("token");try{const Y=In(Ni,{auth:{token:q}});x.current=Y,Y.on("connect",()=>console.log("Header socket connected: user=",t==null?void 0:t.id,"socketId=",Y.id)),Y.on("post:created",j=>{try{window.dispatchEvent(new CustomEvent("app:post:created",{detail:j}))}catch($){console.warn("Failed to forward post:created",$)}}),Y.on("post:updated",j=>{try{window.dispatchEvent(new CustomEvent("app:post:updated",{detail:j}))}catch($){console.warn("Failed to forward post:updated",$)}}),Y.on("post:commented",j=>{try{window.dispatchEvent(new CustomEvent("app:post:commented",{detail:j}))}catch($){console.warn("Failed to forward post:commented",$)}}),Y.on("post:deleted",j=>{try{console.debug("Header socket received post:deleted",j),window.dispatchEvent(new CustomEvent("app:post:deleted",{detail:j}))}catch($){console.warn("Failed to forward post:deleted",$)}}),Y.on("notification:new",j=>{console.log("Header received notification:new",j);try{if(j&&typeof j.fromUserId<"u"&&t&&String(j.fromUserId)===String(t.id))return;if(j&&(!j.fromUserId||typeof j.fromUserId>"u")&&j.fromName&&t){const De=String(j.fromName||"").trim().toLowerCase(),ie=String(t.displayName||"").trim().toLowerCase(),B=String(t.username||"").trim().toLowerCase();if(De&&(De===ie||De===B))return}}catch{}const $=j.fromName||j.from||j.fromUserId||"Someone",ae=j.type||"info",Q=j.notifId||j.id||`${j.fromUserId||"anon"}-${j.postId||"nopost"}-${ae}-${j.commentId||""}-${j.threadId||""}`,{ts:ge,timeString:Pe}=he(j.timestamp||j.createdAt),pt=typeof j.read=="boolean"?j.read:!1;try{const De=V({fromUserId:j.fromUserId,postId:j.postId,type:ae,commentId:j.commentId,commentText:j.commentText});if(T.current.has(De)){console.debug("Skipping socket notification because signature was viewed locally",De);return}}catch{}b(De=>{if(De.some(z=>z.id===Q))return De.map(z=>z.id===Q?{...z,type:ae,message:j.message||z.message,timestamp:j.timestamp||z.timestamp||ge||null,timeString:z.timeString||Pe||z.timeString||null,read:pt,commentId:j.commentId||z.commentId,threadId:j.threadId||z.threadId,commentText:j.commentText||z.commentText}:z);const B=De.findIndex(z=>z.fromUserId===j.fromUserId&&z.postId===j.postId&&z.type===ae);if(B!==-1){const z=De[B],Z={...z,type:ae,message:j.message||z.message,timestamp:j.timestamp||z.timestamp||ge||null,timeString:z.timeString||Pe||null,read:pt,commentId:j.commentId||z.commentId,threadId:j.threadId||z.threadId,commentText:j.commentText||z.commentText},O=De.slice();return O[B]=Z,I(O)}pt||y(z=>z+1);const R={id:Q,type:ae,message:j.message,from:$,fromUserId:j.fromUserId,postId:j.postId,commentId:j.commentId||null,threadId:j.threadId||null,commentText:j.commentText||null,timestamp:ge||null,timeString:Pe||null,read:pt};return I(ne([R,...De||[]]))})}),window.addEventListener("app:notification:new",A),Y.on("post:likes:update",j=>{try{window.dispatchEvent(new CustomEvent("app:post:likes:update",{detail:j}))}catch($){console.warn("Failed to forward post:likes:update",$)}}),Y.on("user:follow",j=>{try{window.dispatchEvent(new CustomEvent("app:user:follow",{detail:j}))}catch($){console.warn("Failed to forward user:follow",$)}try{j&&j.followingId&&j.followingId===(t==null?void 0:t.id)&&n(t||{})}catch{}}),Y.on("connections:update",j=>{try{window.dispatchEvent(new CustomEvent("app:connections:update",{detail:j}))}catch($){console.warn("Failed to forward connections:update",$)}}),Y.on("user:unfollow",j=>{try{window.dispatchEvent(new CustomEvent("app:user:unfollow",{detail:j}))}catch($){console.warn("Failed to forward user:unfollow",$)}try{j&&j.followingId&&j.followingId===(t==null?void 0:t.id)&&n(t||{})}catch{}}),Y.on("user:follow:ack",j=>{try{window.dispatchEvent(new CustomEvent("app:user:follow",{detail:j}))}catch($){console.warn("Failed to forward user:follow:ack",$)}try{j&&j.followingId&&j.followingId===(t==null?void 0:t.id)&&n(t||{})}catch{}}),Y.on("user:unfollow:ack",j=>{try{window.dispatchEvent(new CustomEvent("app:user:unfollow",{detail:j}))}catch($){console.warn("Failed to forward user:unfollow:ack",$)}try{j&&j.followingId&&j.followingId===(t==null?void 0:t.id)&&n(t||{})}catch{}}),Y.on("user:updated",j=>{try{window.dispatchEvent(new CustomEvent("app:user:updated",{detail:j}))}catch($){console.warn("Failed to forward user:updated",$)}try{j&&j.user&&j.user.id===(t==null?void 0:t.id)&&n(j.user)}catch{}}),Y.on("user:created",j=>{try{console.log("Header socket received user:created:",j&&j.user&&j.user.username,j&&j.user&&j.user.id),window.dispatchEvent(new CustomEvent("app:user:created",{detail:j}))}catch($){console.warn("Failed to forward user:created",$)}}),Y.on("notification:remove",j=>{try{console.log("Header received notification:remove",j),b($=>{if(!j)return $;let ae=$;if(Array.isArray(j.notifIds)&&j.notifIds.length>0){const ge=new Set(j.notifIds.map(Pe=>String(Pe)));ae=$.filter(Pe=>!ge.has(String(Pe.id)))}else j.fromUserId&&j.postId&&j.type&&(ae=$.filter(ge=>!(String(ge.fromUserId)===String(j.fromUserId)&&String(ge.postId)===String(j.postId)&&ge.type===j.type)));const Q=$.filter(ge=>!ge.read&&!ae.some(Pe=>String(Pe.id)===String(ge.id))).length;return Q>0&&y(ge=>Math.max(0,ge-Q)),I(ae)})}catch($){console.warn("Failed to process notification:remove",$)}})}catch(Y){console.error("Header socket init failed",Y)}return()=>{x.current&&(x.current.disconnect(),x.current=null);try{}catch{}}},[t]),S.useEffect(()=>{try{const A=(w||[]).filter(q=>!q.read).length;y(A)}catch{}},[w]),S.useEffect(()=>{if(!t)return;let A=!0,q=null,Y=!1;const j=async()=>{if(A&&!Y&&!(document&&document.visibilityState!=="visible")){Y=!0;try{const Q=s||localStorage.getItem("token"),ge=await fetch("http://localhost:5000/notifications",{headers:{Authorization:`Bearer ${Q}`}});if(!ge.ok)return;const Pe=await ge.json();if(!Array.isArray(Pe)||!A)return;const ht=Pe.map(ie=>{const{ts:B,timeString:R}=ie.timestamp||ie.timeString?{ts:ie.timestamp==null?null:Number(ie.timestamp),timeString:ie.timeString||null}:he(ie.createdAt),z=F.current.has(String(ie.id))||T.current.has(V(ie));return{id:ie.id,type:ie.type,message:ie.message,from:ie.fromName||ie.from||"Someone",fromUserId:ie.fromUserId,postId:ie.postId,commentId:ie.commentId||null,threadId:ie.threadId||null,commentText:ie.commentText||null,timestamp:B||null,timeString:R||null,read:z?!0:ie.read===!0}}).sort((ie,B)=>ie.timestamp==null&&B.timestamp==null?0:ie.timestamp==null?1:B.timestamp==null?-1:Number(B.timestamp)-Number(ie.timestamp)),pt=ht.filter(ie=>!T.current.has(V(ie)));b(ie=>I(ne([...pt,...ie||[]])));const De=ht.filter(ie=>!ie.read).length;y(De)}catch(Q){console.warn("Polling notifications failed",Q)}finally{Y=!1}}},$=()=>{q||(j(),q=setInterval(j,15e3))},ae=()=>{q&&(clearInterval(q),q=null)};if(typeof document<"u"){document.visibilityState==="visible"&&$();const Q=()=>{document.visibilityState==="visible"?$():ae()};return document.addEventListener("visibilitychange",Q),()=>{A=!1,ae(),document.removeEventListener("visibilitychange",Q)}}return()=>{A=!1,ae()}},[t,s]),S.useEffect(()=>{t&&(async()=>{try{const A=s||localStorage.getItem("token"),q=await fetch("http://localhost:5000/notifications",{headers:{Authorization:`Bearer ${A}`}});if(!q.ok)return;const Y=await q.json();if(Array.isArray(Y)){const j=Y.map(Q=>{const{ts:ge,timeString:Pe}=Q.timestamp||Q.timeString?{ts:Q.timestamp==null?null:Number(Q.timestamp),timeString:Q.timeString||null}:he(Q.createdAt),ht=(w||[]).find(B=>B.id===Q.id),pt=(w||[]).find(B=>V(B)===V(Q)),De=ht||pt||null,ie=F.current.has(String(Q.id));return{id:Q.id,type:Q.type,message:Q.message,from:Q.fromName||Q.from||"Someone",fromUserId:Q.fromUserId,postId:Q.postId,commentText:Q.commentText||De&&De.commentText||null,commentId:Q.commentId||null,threadId:Q.threadId||null,timestamp:ge||De&&De.timestamp||null,timeString:Pe||De&&De.timeString||null,read:ie?!0:Q.read===!0}}).sort((Q,ge)=>Q.timestamp==null&&ge.timestamp==null?0:Q.timestamp==null?1:ge.timestamp==null?-1:Number(ge.timestamp)-Number(Q.timestamp)),$=j.filter(Q=>!T.current.has(V(Q)));b(I(ne($)));const ae=j.filter(Q=>!Q.read).length;y(typeof ae=="number"?ae:j.length)}}catch(A){console.warn("Failed to load persisted notifications",A)}})()},[t]);const K=()=>{g(!1),u(!0)},se=()=>{g(!1),f(!0)},de=()=>{const A=!E;k(A),_.current=A};S.useEffect(()=>{function A(q){C.current&&!C.current.contains(q.target)&&(k(!1),_.current=!1)}return E?(document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}):()=>{}},[E]),S.useEffect(()=>{X(!(P||o||E))},[P,o,E]);const H=()=>{var A,q,Y;return t!=null&&t.avatarUrl?c.jsx("img",{src:`http://localhost:5000${t.avatarUrl}`,alt:"avatar",className:"w-8 h-8 rounded-full object-cover shadow-avatar"}):c.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-avatar",children:((Y=((A=t==null?void 0:t.displayName)==null?void 0:A[0])||((q=t==null?void 0:t.username)==null?void 0:q[0]))==null?void 0:Y.toUpperCase())||"U"})};return c.jsxs(c.Fragment,{children:[c.jsx("header",{className:"fixed top-0 left-0 right-0 bg-white border-b border-gray-200 shadow-sm z-50",children:c.jsxs("div",{className:"flex max-w-7xl w-full gap-10 mx-auto px-6 items-center justify-between h-20",children:[c.jsx("div",{className:"text-2xl font-black uppercase text-blue-800 font-['Inter',sans-serif] tracking-wide",children:"MNG X HI MINI"}),c.jsx("div",{className:"flex-1 max-w-2xl mx-8 relative",children:c.jsxs("div",{className:"relative",children:[c.jsx(Xw,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 w-5 h-5"}),c.jsx("input",{type:"text",placeholder:"Tm kim ngi dng, bi vit...",className:"w-full pl-12 pr-4 py-3 bg-white border border-gray-300 rounded-xl text-base text-gray-700 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 font-['Inter',sans-serif] shadow-sm"})]})}),c.jsx("div",{className:"flex items-center gap-2",children:t?c.jsxs(c.Fragment,{children:[c.jsx("button",{"aria-label":"Trang ch",className:`p-3 rounded-xl transition-all duration-200 ${U?"bg-blue-100 text-blue-600 shadow-sm":"text-gray-600 hover:text-blue-600 hover:bg-gray-100"}`,onClick:()=>{X(!0),a(!1),M(!1),_.current=!1},children:c.jsx(a1,{className:"w-5 h-5"})}),c.jsx("button",{"aria-label":"Kt ni",className:`p-3 rounded-xl transition-all duration-200 ${P?"bg-blue-100 text-blue-600 shadow-sm":"text-gray-600 hover:text-blue-600 hover:bg-gray-100"}`,onClick:()=>M(A=>!A),children:c.jsx(Qw,{className:"w-5 h-5"})}),c.jsx("button",{onClick:()=>{M(!1),a(!0)},"aria-label":"Tin nhn",className:`p-3 rounded-xl transition-all duration-200 ${o?"bg-blue-100 text-blue-600 shadow-sm":"text-gray-600 hover:text-blue-600 hover:bg-gray-100"}`,children:c.jsx(o1,{className:"w-5 h-5"})}),c.jsxs("div",{className:"relative",ref:C,children:[c.jsx("button",{"aria-label":"Thng bo",className:`p-3 rounded-xl transition-all duration-200 relative ${E?"bg-blue-100 text-blue-600 shadow-sm":"text-gray-600 hover:text-blue-600 hover:bg-gray-100"}`,onClick:de,children:c.jsxs("div",{className:"relative",children:[c.jsx(Kw,{className:"w-5 h-5"}),m>0&&c.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 text-xs flex items-center justify-center font-medium",children:m})]})}),E&&c.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white border border-gray-200 rounded-xl shadow-lg py-2 z-50 max-h-96 overflow-y-auto",children:[c.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:c.jsx("h3",{className:"font-semibold text-gray-900 font-['Inter',sans-serif]",children:"Thng bo"})}),w.length===0?c.jsx("div",{className:"px-4 py-8 text-center text-gray-500 text-sm font-['Inter',sans-serif]",children:"Cha c thng bo no"}):c.jsx("div",{className:"max-h-80 overflow-y-auto",children:w.map(A=>c.jsxs("div",{onClick:()=>J(A),role:"button",tabIndex:0,className:`px-4 py-3 border-b last:border-b-0 transition-colors flex items-start gap-3 cursor-pointer ${A.read?"hover:bg-gray-50":"bg-gradient-to-r from-blue-50 to-white border-l-4 border-blue-400"}`,onKeyDown:q=>{(q.key==="Enter"||q.key===" ")&&J(A)},children:[c.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-pink-400 to-red-400 rounded-full flex items-center justify-center text-white font-bold text-base flex-shrink-0 shadow-md",children:""}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("p",{className:"text-sm text-gray-900 font-['Inter',sans-serif]",children:[c.jsx("span",{className:"font-semibold text-gray-900 mr-1",children:A.from}),c.jsx("span",{className:"text-gray-800",children:A.message?A.message:A.type==="comment"?" bnh lun vo bi vit ca bn":A.type==="reply"?" tr li bnh lun ca bn":A.type==="like"?" thch bi vit ca bn":" tng tc vi bi vit ca bn"})]}),A.commentText&&c.jsxs("p",{className:"text-sm text-gray-700 mt-1 truncate max-w-full font-['Inter',sans-serif]",children:['"',A.commentText.length>120?A.commentText.slice(0,120)+"...":A.commentText,'"']}),c.jsx("p",{className:"text-xs text-gray-500 mt-1 font-['Inter',sans-serif]",children:A.timeString||(typeof A.timestamp=="number"&&!Number.isNaN(Number(A.timestamp))?new Date(Number(A.timestamp)).toLocaleString("vi-VN"):"")})]}),!A.read&&c.jsx("button",{onClick:q=>ee(q,A),className:"w-3 h-3 bg-blue-600 rounded-full flex-shrink-0 mt-2 shadow-sm border-0","aria-label":"nh du  xem",title:"nh du  xem"})]},A.id))})]})]}),c.jsxs("div",{className:"relative",ref:p,children:[c.jsxs("button",{onClick:()=>g(A=>!A),className:"flex items-center gap-2 px-3 py-2 rounded-xl hover:bg-gray-100 transition-all duration-200","aria-haspopup":"true","aria-expanded":h,children:[H(),c.jsx(Yw,{className:"text-gray-500 w-3 h-3"})]}),h&&c.jsxs("div",{className:"absolute left-0 mt-2 w-52 bg-white border border-gray-200 rounded-xl shadow-lg py-2 z-50 translate-x-4 md:translate-x-6",children:[c.jsx("button",{onClick:K,className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 font-['Inter',sans-serif] transition-colors",children:"Cp nht ti khon"}),c.jsx("button",{onClick:se,className:"w-full text-left px-4 py-3 text-sm hover:bg-gray-50 font-['Inter',sans-serif] transition-colors",children:"i mt khu"}),c.jsx("div",{className:"border-t my-1 mx-2"}),c.jsx("button",{onClick:()=>{g(!1),e()},className:"w-full text-left px-4 py-3 text-sm text-red-600 hover:bg-red-50 font-['Inter',sans-serif] transition-colors",children:"ng xut"})]})]})]}):c.jsx("button",{onClick:()=>i(!0),className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-2.5 rounded-xl text-sm font-medium hover:from-blue-600 hover:to-blue-700 transition-all duration-200 shadow-sm font-['Inter',sans-serif]",children:"ng nhp"})})]})}),r&&c.jsx(Ww,{onClose:()=>i(!1)}),l&&c.jsx(Gw,{onClose:()=>u(!1)}),d&&c.jsx(Jw,{onClose:()=>f(!1)}),P&&c.jsx(i1,{isOpen:P,onClose:()=>M(!1)}),o&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg w-full max-w-5xl h-full max-h-[90vh] flex flex-col",children:[c.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[c.jsx("h2",{className:"text-xl font-semibold",children:"Tin nhn"}),c.jsx("button",{onClick:()=>a(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"flex-1 overflow-hidden",children:c.jsx(t1,{})})]})})]})}function u1({onPostCreated:t}){var b,E,k;const{user:e}=st(),[n,s]=S.useState(""),[r,i]=S.useState(null),[o,a]=S.useState(null),[l,u]=S.useState(!1),[d,f]=S.useState(null),[h,g]=S.useState(Zs),[p,m]=S.useState(!1),y=S.useRef(null),D=S.useRef(null),v=C=>{f(C);const _=D.current;if(_&&typeof _.selectionStart=="number"){const F=_.selectionStart,T=_.selectionEnd,I=n.slice(0,F)+C+n.slice(T);s(I),requestAnimationFrame(()=>{try{_.focus();const V=F+C.length;_.setSelectionRange(V,V)}catch{}})}else s(F=>F+C)};S.useEffect(()=>{function C(_){y.current&&!y.current.contains(_.target)&&m(!1)}return document.addEventListener("click",C),()=>document.removeEventListener("click",C)},[]);const x=C=>{const _=C.target.files[0];if(_){i(_);const F=new FileReader;F.onload=T=>a(T.target.result),F.readAsDataURL(_)}},w=async C=>{if(C.preventDefault(),!(!n.trim()&&!r)){u(!0);try{const _=new FormData;_.append("content",n),d&&_.append("icon",d),r&&_.append("image",r),await ye.post("/posts",_,{headers:{"Content-Type":"multipart/form-data"}}),s(""),i(null),a(null),f(null),t==null||t()}catch(_){console.error("Error creating post:",_);try{window.appToast?window.appToast("Khng th to bi vit. Vui lng th li."):alert("Failed to create post")}catch{}}finally{u(!1)}}};return e?c.jsx("div",{className:"bg-white border border-gray-300 rounded-lg p-6 mb-6",children:c.jsx("form",{onSubmit:w,children:c.jsxs("div",{className:"flex flex-col items-start text-left",children:[e!=null&&e.avatarUrl?c.jsx("img",{src:`http://localhost:5000${e.avatarUrl}`,alt:(e==null?void 0:e.displayName)||(e==null?void 0:e.username),className:"w-14 h-14 rounded-full object-cover mb-3 self-start shadow-avatar"}):c.jsx("div",{className:"w-14 h-14 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white font-bold mb-3 self-start shadow-avatar",children:(k=((b=e==null?void 0:e.displayName)==null?void 0:b[0])||((E=e==null?void 0:e.username)==null?void 0:E[0]))==null?void 0:k.toUpperCase()}),c.jsxs("div",{className:"w-full",children:[c.jsxs("div",{className:"rounded-lg border border-gray-100 bg-gray-50 p-4 focus-within:ring-2 focus-within:ring-blue-200 transition",children:[c.jsx("textarea",{ref:D,value:n,onChange:C=>s(C.target.value),placeholder:"Bn ang ngh g?",id:"composer-textarea",className:"w-full resize-none bg-transparent outline-none text-gray-900 placeholder-gray-400 text-base min-h-[96px] max-h-72 p-0 leading-relaxed",rows:"3"}),o&&c.jsxs("div",{className:"mt-3 relative",children:[c.jsx("img",{src:o,alt:"Preview",className:"w-full max-h-64 rounded-md object-cover"}),c.jsx("button",{type:"button",onClick:()=>{i(null),a(null)},className:"absolute top-2 right-2 bg-gray-800 bg-opacity-50 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm hover:bg-opacity-70",children:""})]})]}),c.jsxs("div",{className:"flex justify-between items-center mt-3",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("label",{className:"cursor-pointer text-blue-500 hover:text-blue-600 flex items-center gap-2",children:[c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),c.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),c.jsx("polyline",{points:"21,15 16,10 5,21"})]}),"nh",c.jsx("input",{type:"file",accept:"image/*",onChange:x,className:"hidden"})]}),c.jsxs("div",{className:"relative",ref:y,children:[c.jsxs("button",{type:"button",onClick:C=>{C.stopPropagation(),m(_=>!_)},className:"flex items-center gap-2 px-2 py-1 rounded-md text-sm bg-transparent hover:bg-gray-50",title:d?"Thay i cm xc":"Thm cm xc",children:[c.jsx("span",{className:"text-lg",children:d||""}),c.jsx("span",{className:"text-sm text-gray-700",children:"Cm xc"}),d&&c.jsx("button",{type:"button",onClick:C=>{C.stopPropagation(),f(null)},className:"ml-2 text-xs text-gray-500 hover:text-gray-700",title:"Xa cm xc",children:""})]}),p&&c.jsxs("div",{className:"absolute z-40 mt-2 w-80 md:w-96 bg-white border border-gray-200 rounded-md shadow-lg p-4",children:[c.jsx("div",{className:"flex items-center mb-2",children:c.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Chn cm xc"})}),c.jsx("div",{className:"max-h-60 overflow-y-auto overflow-x-hidden pr-3",children:c.jsx("div",{className:"grid grid-cols-8 gap-2",children:h.map(({key:C,symbol:_,label:F})=>c.jsx("button",{type:"button",onClick:()=>{v(_)},className:"w-12 h-12 rounded-md flex items-center justify-center text-2xl transition-colors hover:bg-gray-100",title:F,children:_},C))})})]})]})]}),c.jsx("button",{type:"submit",disabled:!n.trim()&&!r||l,className:"bg-blue-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:l?"ang ng...":"ng"})]})]})]})})}):null}var c1=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|(?:\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC68(?:\uD83C\uDFFB(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|[\u2695\u2696\u2708]\uFE0F|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))?|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC)?|(?:\uD83D\uDC69(?:\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83E\uDDD1(?:\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDE35\u200D\uD83D\uDCAB|\uD83D\uDE2E\u200D\uD83D\uDCA8|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83E\uDDD1(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\u2764\uFE0F\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|\u2764\uFE0F|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE2E\uDE35\uDE36\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g};const d1=tp(c1);function f1({post:t,author:e,isOpen:n,onClose:s,onPostUpdated:r}){var he,P;const[i,o]=S.useState((t==null?void 0:t.content)||""),[a,l]=S.useState((t==null?void 0:t.icon)||""),[u,d]=S.useState(null),[f,h]=S.useState(t!=null&&t.imageUrl?`http://localhost:5000${t.imageUrl}`:null),[g,p]=S.useState(!1),[m,y]=S.useState(!1),[D,v]=S.useState(!1),x=S.useRef(null),w=S.useRef(null),b=S.useRef(null),E=S.useRef(null),k=S.useRef(null),[C,_]=S.useState({top:0,left:0,width:320}),F=S.useRef(!1),T=S.useRef(null);S.useEffect(()=>{t&&(o(t.content||""),l(t.icon||""),h(t.imageUrl?`http://localhost:5000${t.imageUrl}`:null),d(null),p(!1))},[t]),S.useEffect(()=>{n&&t&&(o(t.content||""),l(t.icon||""),h(t.imageUrl?`http://localhost:5000${t.imageUrl}`:null),d(null),p(!1))},[n,t]),S.useEffect(()=>{if(!D||!b.current)return;const M=()=>{const K=b.current.getBoundingClientRect(),se=16,de=Math.max(200,window.innerWidth-se*2);let H=Math.min(420,de);if(k.current){const ht=k.current.getBoundingClientRect(),pt=Math.max(200,ht.width-32);H=Math.min(H,pt)}let A=K.left;if(k.current){const ht=k.current.getBoundingClientRect();A=ht.left+Math.max(8,(ht.width-H)/2)}A+H>window.innerWidth-se&&(A=window.innerWidth-se-H),A<se&&(A=se);const q=window.innerHeight-K.bottom-8,Y=K.top-8,j=Math.min(420,Math.max(180,Math.floor(Zs.length/8*40)));let $=j,ae,Q="below";q>=j+se?(Q="below",$=j,ae=K.bottom+8):Y>=j+se?(Q="above",$=j,ae=K.top-8-$):q>=Y?(Q="below",$=Math.max(120,q-se),ae=K.bottom+8):(Q="above",$=Math.max(120,Y-se),ae=K.top-8-$);const ge=se,Pe=window.innerHeight-se-$;ae<ge&&(ae=ge),ae>Pe&&(ae=Pe),_({top:ae,left:A,width:H,place:Q,maxHeight:$})};M();const U={id:null},X=()=>{F.current=!0,T.current&&clearTimeout(T.current),T.current=setTimeout(()=>{F.current=!1},300),U.id&&cancelAnimationFrame(U.id),U.id=requestAnimationFrame(()=>{M(),U.id=null})};return window.addEventListener("resize",M),window.addEventListener("scroll",X,{passive:!0}),k.current&&k.current.addEventListener("scroll",X,{passive:!0}),()=>{window.removeEventListener("resize",M),window.removeEventListener("scroll",X),k.current&&k.current.removeEventListener("scroll",X),T.current&&clearTimeout(T.current),U.id&&cancelAnimationFrame(U.id)}},[D]);const I=M=>{const U=M.target.files[0];if(U){d(U),p(!1);const X=new FileReader;X.onload=K=>{h(K.target.result)},X.readAsDataURL(U)}},V=S.useMemo(()=>{try{if(!i)return[];const M=d1(),U=i.match(M);return Array.isArray(U)?U:[]}catch{return[]}},[i]),ne=(M,U=4)=>{if(!M||M.length===0)return null;const X=M.slice(0,U),K=M.length-X.length;return c.jsxs("div",{className:"flex items-center gap-1 ml-3",children:[X.map((se,de)=>c.jsx("span",{className:"text-lg leading-none",children:se},de)),K>0&&c.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["+",K]})]})};V&&V.length>0&&V[0];const J=()=>{d(null),h(null),p(!0),x.current&&(x.current.value="")},ee=async M=>{var U,X,K,se,de;if(M.preventDefault(),!!i.trim()){y(!0);try{const H=new FormData;H.append("content",i),u&&H.append("image",u),g&&H.append("removeImage","true");const A=await ye.put(`/posts/${t.id}`,H);console.log(" Post updated:",A.data),window.dispatchEvent(new CustomEvent("app:post:updated",{detail:{postId:t.id,content:i,imageUrl:u?"new-image":g?"":t.imageUrl}})),r==null||r(),s()}catch(H){console.error(" Error updating post:",H,(U=H==null?void 0:H.response)==null?void 0:U.data);const A=((K=(X=H==null?void 0:H.response)==null?void 0:X.data)==null?void 0:K.error)||((de=(se=H==null?void 0:H.response)==null?void 0:se.data)==null?void 0:de.message);try{alert(A||H.message||"Li khi cp nht bi vit!")}catch{}}finally{y(!1)}}};return n?c.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[c.jsx("div",{ref:k,className:"bg-white rounded-lg w-full max-w-lg max-h-[90vh] overflow-y-auto",children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Chnh sa bi vit"}),c.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 text-2xl font-bold",children:""})]}),c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e!=null&&e.avatarUrl?c.jsx("img",{src:`http://localhost:5000${e.avatarUrl}`,alt:(e==null?void 0:e.displayName)||(e==null?void 0:e.username),className:"w-10 h-10 rounded-full object-cover shadow-avatar"}):c.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white font-bold shadow-avatar",children:(((he=e==null?void 0:e.displayName)==null?void 0:he[0])||((P=e==null?void 0:e.username)==null?void 0:P[0])||"U").toUpperCase()}),c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold text-gray-900",children:(e==null?void 0:e.displayName)||(e==null?void 0:e.username)||"Unknown User"}),c.jsx("div",{className:"text-sm text-gray-500",children:"Chnh sa bi vit"})]})]}),c.jsxs("form",{onSubmit:ee,children:[c.jsx("div",{className:"mb-4",children:c.jsx("textarea",{ref:E,value:i,onChange:M=>o(M.target.value),placeholder:"Bn ang ngh g?",className:"w-full p-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"4",required:!0})}),f&&c.jsxs("div",{className:"mb-4 relative",children:[c.jsx("img",{src:f,alt:"Preview",className:"w-full h-64 object-cover rounded-lg border"}),c.jsx("button",{type:"button",onClick:J,className:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center hover:bg-red-600",children:""})]}),c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsxs("button",{type:"button",onClick:()=>{var M;return(M=x.current)==null?void 0:M.click()},className:"flex items-center gap-2 text-blue-500 hover:text-blue-600",children:[c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),"nh"]}),c.jsx("div",{className:"ml-2 mr-1 flex items-center",children:ne(V,4)}),c.jsx("div",{className:"relative",children:c.jsx("button",{ref:b,type:"button",onClick:M=>{M.stopPropagation(),v(U=>!U)},className:"flex items-center gap-2 text-blue-500 hover:text-blue-600",children:"Cm xc"})})]}),c.jsxs("div",{className:"flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Hy"}),c.jsxs("button",{type:"submit",disabled:m||!i.trim(),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[m&&c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),m?"ang cp nht...":"Cp nht"]})]})]}),c.jsx("input",{ref:x,type:"file",accept:"image/*",onChange:I,className:"hidden"})]})}),D&&b.current&&pg.createPortal(c.jsxs("div",{ref:w,className:"fixed bg-white border border-gray-200 rounded-md shadow-lg p-4",style:{position:"fixed",zIndex:99999,top:typeof C.top=="number"?`${C.top}px`:C.top,left:typeof C.left=="number"?`${C.left}px`:C.left,width:C.width,maxWidth:"calc(100% - 48px)",maxHeight:C.maxHeight||420,overflow:"hidden",boxShadow:"0 8px 30px rgba(2,6,23,0.2)"},"aria-hidden":!D,children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Chn cm xc"}),c.jsx("button",{type:"button",onClick:()=>v(!1),className:"w-6 h-6 rounded-full bg-gray-200 hover:bg-gray-300 flex items-center justify-center text-gray-600 text-sm font-bold",title:"ng",children:""})]}),c.jsx("div",{className:"overflow-y-auto overflow-x-hidden pr-3",style:{maxHeight:(C.maxHeight||420)-64},children:c.jsx("div",{className:"grid auto-rows-min gap-2",style:{gridTemplateColumns:"repeat(auto-fill, minmax(40px, 1fr))"},children:Zs.map(({key:M,symbol:U,label:X})=>c.jsx("button",{type:"button",onClick:()=>{try{const K=E.current;if(K&&typeof K.selectionStart=="number"){const se=K.selectionStart,de=K.selectionEnd,H=i.slice(0,se)+U+i.slice(de);o(H),setTimeout(()=>{K.focus();const A=se+U.length;K.selectionStart=K.selectionEnd=A},0)}else o(se=>se+U)}catch{o(se=>se+U)}},className:"w-10 h-10 rounded-md flex items-center justify-center text-2xl transition-colors hover:bg-gray-100",title:X,children:U},M))})})]}),document.body)]}):null}function Uf(t){if(!t)return null;if(Array.isArray(t))return c.jsx("span",{className:"inline-flex items-center gap-1 flex-shrink-0",children:t.map((e,n)=>c.jsx("span",{className:"text-lg",children:e},n))});if(typeof t=="string"&&t.includes(",")){const e=t.split(",").map(n=>n.trim()).filter(Boolean);return e.length===0?null:c.jsx("span",{className:"inline-flex items-center gap-1 flex-shrink-0",children:e.map((n,s)=>c.jsx("span",{className:"text-lg",children:n},s))})}return c.jsx("span",{className:"inline-flex items-center gap-1 text-lg flex-shrink-0",children:t})}function h1(t){try{if(!t)return"";const e=Array.from(t);return e.length?e[e.length-1]:""}catch{return t?t.slice(-1):""}}function p1(t){if(!t)return"";try{return Array.isArray(t)?t.join(""):typeof t=="string"?t.includes(",")?t.split(",").map(e=>e.trim()).filter(Boolean).join(""):t:String(t)}catch{return String(t||"")}}function Hf(t,e){if(!t||!e)return!1;const n=p1(e);if(!n)return!1;try{return t.indexOf(n)!==-1}catch{return!1}}const m1=t=>{var n,s;if(!t)return null;const e=r=>r==null?"":typeof r=="object"&&typeof r.toNumber=="function"?String(r.toNumber()):String(r);if(t.comment&&t.author){const r=t.comment,i=o=>{if(!o)return{};const a=o.id??o.userId??o._id??"",l=a==null?"":typeof a=="object"&&typeof a.toNumber=="function"?String(a.toNumber()):String(a);return{...o,id:l}};return{comment:{id:e(r.id||r.commentId||r._id||r.identity||((s=(n=r.identity)==null?void 0:n.toNumber)==null?void 0:s.call(n))),content:r.content,createdAt:r.createdAt,parentId:e(r.parentId||r.parent||null),icon:r.icon||""},author:i(t.author),parent:t.parent||null}}if(t.id&&t.content){const r=t.author||{};return{comment:{id:e(t.id),content:t.content,createdAt:t.createdAt,parentId:e(t.parentId||t.parent||null),icon:t.icon||""},author:r?{...r,id:r.id?String(r.id):r.id}:{}}}if(t.comment&&t.comment.id){const r=t.comment;return r.author?{comment:{id:e(r.id),content:r.content,createdAt:r.createdAt,parentId:e(r.parentId||r.parent||null),icon:r.icon||""},author:function(){const i=r.author||{},o=i.id??i.userId??i._id??"",a=o==null?"":typeof o=="object"&&typeof o.toNumber=="function"?String(o.toNumber()):String(o);return{...i,id:a}}()}:{comment:{id:e(r.id),content:r.content,createdAt:r.createdAt,parentId:e(r.parentId||r.parent||null)},author:{}}}return null};function g1({postId:t,parentId:e,onPosted:n,onCancel:s}){var E,k;const{user:r}=st(),[i,o]=S.useState(""),[a,l]=S.useState(!1),[u,d]=S.useState(!1),[f,h]=S.useState(""),g=S.useRef(null),p=S.useRef(null),[m,y]=S.useState(null),D=S.useRef(null),[v,x]=S.useState(!1),w=C=>{try{if(!C)return"";const _=Array.from(C);return _.length?_[_.length-1]:""}catch{return C?C.slice(-1):""}};S.useEffect(()=>{function C(_){D.current&&!D.current.contains(_.target)&&d(!1)}return document.addEventListener("click",C),()=>document.removeEventListener("click",C)},[]),S.useEffect(()=>{if(!u)return;function C(){try{const _=p.current.getBoundingClientRect(),F=320;let T=_.left+_.width/2-F/2;const I=8;if(T=Math.max(I,Math.min(T,window.innerWidth-F-I)),v){const V=window.innerHeight-_.top+8;y({left:T,bottom:V})}else{const V=_.bottom+8;y({left:T,top:V})}}catch{}}return window.addEventListener("scroll",C,{passive:!0}),window.addEventListener("resize",C),C(),()=>{window.removeEventListener("scroll",C),window.removeEventListener("resize",C)}},[u,v]);function b(C){try{if(g.current&&typeof g.current.selectionStart=="number"){const _=g.current,F=_.selectionStart,T=_.selectionEnd,I=i.slice(0,F)+C+i.slice(T);o(I),requestAnimationFrame(()=>{try{_.focus();const V=F+C.length;_.setSelectionRange(V,V)}catch{}})}else o(_=>_+C)}catch{o(F=>F+C)}h(_=>_?_+C:C)}return c.jsx("form",{onSubmit:async C=>{if(C.preventDefault(),!!i.trim()){l(!0);try{const _={content:i};e&&(_.parentId=e),f&&(_.icon=f);const F=await ye.post(`/posts/${t}/comments`,_);if(F.data&&F.data.comment){const T=m1(F.data.comment);T&&n(T)}o(""),h(""),s==null||s()}catch(_){console.error("Failed to post inline comment",_)}finally{l(!1)}}},className:"mt-2",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"w-8 h-8 flex-shrink-0",children:r!=null&&r.avatarUrl?c.jsx("img",{src:`http://localhost:5000${r.avatarUrl}`,alt:r.displayName||r.username,className:"w-8 h-8 rounded-full object-cover"}):c.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-sm text-gray-700",children:(((E=r==null?void 0:r.displayName)==null?void 0:E[0])||((k=r==null?void 0:r.username)==null?void 0:k[0])||"U").toUpperCase()})}),c.jsxs("div",{className:"flex-1 flex gap-2 items-center",children:[c.jsx("input",{ref:g,value:i,onChange:C=>o(C.target.value),placeholder:"Vit bnh lun...",className:"flex-1 bg-gray-100 rounded-full px-4 py-2 text-sm focus:outline-none"}),c.jsxs("div",{className:"relative overflow-visible",children:[c.jsx("button",{ref:p,type:"button",onClick:C=>{if(C.stopPropagation(),u){d(!1);return}try{const _=p.current.getBoundingClientRect(),F=Math.min(window.innerHeight*.6,360),I=window.innerHeight-_.bottom<F+16;x(I);const V=320;let ne=_.left+_.width/2-V/2;const J=8;if(ne=Math.max(J,Math.min(ne,window.innerWidth-V-J)),I){const ee=window.innerHeight-_.top+8;y({left:ne,bottom:ee})}else{const ee=_.bottom+8;y({left:ne,top:ee})}d(!0)}catch{d(F=>!F)}},className:"px-2 py-1 rounded-full hover:bg-gray-100",title:"Chn cm xc",children:w(f)||""}),u&&c.jsxs("div",{ref:D,className:"bg-white border border-gray-200 rounded-md shadow-lg p-3 z-50",style:{position:"fixed",width:"320px",maxHeight:"60vh",overflow:"visible",...(m==null?void 0:m.left)!=null?{left:`${m.left}px`}:{},...(m==null?void 0:m.top)!=null?{top:`${m.top}px`}:{},...(m==null?void 0:m.bottom)!=null?{bottom:`${m.bottom}px`}:{}},children:[c.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Chn cm xc"}),c.jsx("div",{className:"max-h-60 overflow-y-auto overflow-x-hidden pr-6",children:c.jsx("div",{className:"grid grid-cols-8 gap-2",children:Zs.map(C=>c.jsx("button",{type:"button",onClick:_=>{_.stopPropagation(),b(C.symbol)},className:"w-12 h-12 rounded-md flex items-center justify-center text-2xl transition-colors hover:bg-gray-100",title:C.label,children:C.symbol},C.key))})})]})]}),c.jsx("button",{type:"submit",disabled:!i.trim()||a,className:"bg-blue-500 text-white px-3 py-1 rounded-sm text-sm disabled:opacity-60",children:a?"...":"Gi"}),c.jsx("button",{type:"button",onClick:C=>{C.stopPropagation();try{o("")}catch{}try{h("")}catch{}try{d(!1)}catch{}s==null||s()},className:"text-sm text-gray-700 ml-2 px-2 py-1 hover:bg-gray-100 rounded-sm transition-colors",children:"Hy"})]})]})})}function y1({post:t,author:e,onDelete:n}){var ht,pt,De,ie;const[s,r]=S.useState(!1),[i,o]=S.useState(t.likesCount||0),[a,l]=S.useState(!1),[u,d]=S.useState(!1),{user:f}=st(),[h,g]=S.useState([]),[p,m]=S.useState(""),[y,D]=S.useState(!1),[v,x]=S.useState(!1),[w,b]=S.useState(""),E=S.useRef(null),k=S.useRef(null),C=S.useRef(null),[_,F]=S.useState(null),[T,I]=S.useState(!1),[V,ne]=S.useState(!1),[J,ee]=S.useState(null),[he,P]=S.useState(null),[M,U]=S.useState(!1),[X,K]=S.useState(!1),[se,de]=S.useState(!1),[H,A]=S.useState(e||{}),q=B=>{var z,Z;if(!B)return null;const R=O=>O==null?"":typeof O=="object"&&typeof O.toNumber=="function"?String(O.toNumber()):String(O);if(B.comment&&B.author){const O=B.comment;return{comment:{id:R(O.id||O.commentId||O._id||O.identity||((Z=(z=O.identity)==null?void 0:z.toNumber)==null?void 0:Z.call(z))),content:O.content,createdAt:O.createdAt,parentId:R(O.parentId||O.parent||null),icon:O.icon||""},author:B.author,parent:B.parent||null}}if(B.id&&B.content){const O=B.author||{};return{comment:{id:R(B.id),content:B.content,createdAt:B.createdAt,parentId:R(B.parentId||B.parent||null),icon:B.icon||""},author:O}}if(B.comment&&B.comment.id){const O=B.comment;return O.author?{comment:{id:R(O.id),content:O.content,createdAt:O.createdAt,parentId:R(O.parentId||O.parent||null),icon:O.icon||""},author:O.author}:{comment:{id:R(O.id),content:O.content,createdAt:O.createdAt,parentId:R(O.parentId||O.parent||null)},author:{}}}return null},Y=B=>{const R=new Map,z=[];B.forEach(O=>{const G={...O,children:[]};G.comment={...G.comment,id:String(G.comment.id??""),parentId:G.comment.parentId==null?"":String(G.comment.parentId)},G.parent&&(G.parent={...G.parent,comment:{...G.parent.comment,id:String(G.parent.comment.id??"")}}),R.set(G.comment.id,G)}),R.forEach(O=>{const G=O.comment.parentId;if(G){const Me=R.get(String(G));Me?(Me.children.push(O),O.parent||(O.parent=Me)):(console.warn(`Parent comment ${G} not found for comment ${O.comment.id}`),z.push(O))}else z.push(O)});const Z=O=>{O.sort((G,Me)=>Number(G.comment.createdAt||0)-Number(Me.comment.createdAt||0)),O.forEach(G=>Z(G.children))};return Z(z),z};S.useEffect(()=>{r(!!t.liked),o(t.likesCount||0),(async()=>{try{const B=await ye.get(`/posts/${t.id}/comments`);Array.isArray(B.data)&&g(B.data)}catch(B){console.warn("Failed to load comments",B)}})()},[t.id,t.liked]),S.useEffect(()=>{function B(Z){const O=Z.detail||Z;!O||O.postId!==t.id||(o(O.likesCount??(G=>G)),O.fromUserId===(f&&f.id)&&r(!!O.liked))}window.addEventListener("app:post:likes:update",B);const R=Z=>{const O=Z.detail||Z;if(!O||O.postId!==t.id)return;const G=q(O.comment);G&&g(Me=>{try{if(Me.some(nn=>String(nn.comment.id)===String(G.comment.id)))return Me}catch{}return[G,...Me]})};window.addEventListener("app:post:commented",R);const z=Z=>{const O=Z.detail||Z;if(!O||!O.user)return;const G=O.user;g(Me=>Me.map(Re=>{try{const nn=Re.author&&Re.author.id?String(Re.author.id):"",Ai=G&&G.id?String(G.id):"";if(nn&&Ai&&nn===Ai)return{...Re,author:{...Re.author,...G}};if(Re.parent&&Re.parent.author){const ad=Re.parent.author.id?String(Re.parent.author.id):"";if(ad&&Ai&&ad===Ai)return{...Re,parent:{...Re.parent,author:{...Re.parent.author,...G}}}}}catch{}return Re}))};return window.addEventListener("app:user:updated",z),()=>{window.removeEventListener("app:post:likes:update",B),window.removeEventListener("app:post:commented",R),window.removeEventListener("app:user:updated",z)}},[t.id,f]),S.useEffect(()=>{function B(R){const z=R.detail||R;if(!z||!z.user)return;const Z=z.user;try{const O=H&&H.id?String(H.id):"",G=Z&&Z.id?String(Z.id):"";O&&G&&O===G&&A(Me=>({...Me,...Z}))}catch{}}return window.addEventListener("app:user:updated",B),()=>window.removeEventListener("app:user:updated",B)},[H]),S.useEffect(()=>{function B(R){const z=R.detail||R;if(!z)return;const Z=z.postId||z.id||z.post&&z.post.id;if(Z&&String(Z)===String(t.id))try{if(typeof n=="function")n(t.id);else{K(!0);try{window.appToast&&window.appToast("Bi vit  b xa",{duration:2e3})}catch{}}}catch(O){console.warn("Failed to handle app:post:deleted for post",t.id,O)}}return window.addEventListener("app:post:deleted",B),()=>window.removeEventListener("app:post:deleted",B)},[t.id,n]),S.useEffect(()=>{function B(R){k.current&&!k.current.contains(R.target)&&x(!1)}return document.addEventListener("click",B),()=>document.removeEventListener("click",B)},[]),S.useEffect(()=>{if(!v)return;function B(){try{const R=C.current.getBoundingClientRect(),z=320;let Z=R.left+R.width/2-z/2;const O=8;if(Z=Math.max(O,Math.min(Z,window.innerWidth-z-O)),T){const G=window.innerHeight-R.top+8;F({left:Z,bottom:G})}else{const G=R.bottom+8;F({left:Z,top:G})}}catch{}}return window.addEventListener("scroll",B,{passive:!0}),window.addEventListener("resize",B),B(),()=>{window.removeEventListener("scroll",B),window.removeEventListener("resize",B)}},[v,T]);const j=B=>{let R=B;R&&typeof R=="object"&&typeof R.toNumber=="function"?R=R.toNumber():R=Number(R);const z=new Date(R);if(!z||Number.isNaN(z.getTime()))return"";const O=new Date-z,G=Math.floor(O/(1e3*60*60));return G<1?"Va xong":G<24?`${G}h`:z.toLocaleDateString()};function $(B){try{const R=E.current;if(R&&typeof R.selectionStart=="number"){const z=R.selectionStart,Z=R.selectionEnd,O=p.slice(0,z)+B+p.slice(Z);m(O),requestAnimationFrame(()=>{try{R.focus();const G=z+B.length;R.setSelectionRange(G,G)}catch{}})}else m(z=>z+B)}catch{m(z=>z+B)}b(R=>R?R+B:B)}const ae=()=>{try{ee(null),m(""),b(""),x(!1),g(B=>B.map(R=>({...R,_showInlineComposer:!1}))),U(!0),setTimeout(()=>U(!1),1800)}catch(B){console.warn("clearReply failed",B)}};S.useEffect(()=>{function B(R){R.key==="Escape"&&ae()}return window.addEventListener("keydown",B),()=>window.removeEventListener("keydown",B)},[]);const Q=async()=>{if(window.confirm("Bn c chc mun xa bi vit ny?")){l(!0);try{await ye.delete(`/posts/delete/${t.id}`);try{window.appToast?window.appToast("  xa bi vit thnh cng!"):alert("  xa bi vit thnh cng!")}catch{}n==null||n(t.id)}catch(B){console.error(" Li xa bi vit:",B);try{window.appToast?window.appToast(" Khng th xa bi vit. Vui lng th li!"):alert(" Khng th xa bi vit. Vui lng th li!")}catch{}}finally{l(!1)}}},ge=async()=>{try{const B=await ye.post(`/posts/${t.id}/like`);r(B.data.liked),console.log("Like response:",B.data)}catch(B){console.error(" Li like bi vit:",B)}},Pe=f&&e&&f.username===e.username;return f&&(f.role==="admin"||f.role),X?c.jsx("div",{className:"bg-white border border-gray-300 rounded-lg overflow-hidden p-4 text-center text-sm text-gray-500",children:"Bi vit  b xa"}):c.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg overflow-hidden",children:[c.jsxs("div",{className:"flex items-center gap-3 p-4",children:[H!=null&&H.avatarUrl?c.jsx("img",{src:`http://localhost:5000${H.avatarUrl}`,alt:(H==null?void 0:H.displayName)||(H==null?void 0:H.username),className:"w-8 h-8 rounded-full object-cover shadow-avatar",onError:B=>{B.target.style.display="none"}}):c.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-avatar",children:(((ht=H==null?void 0:H.displayName)==null?void 0:ht[0])||((pt=H==null?void 0:H.username)==null?void 0:pt[0])||"U").toUpperCase()}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-semibold text-sm text-gray-900",children:(H==null?void 0:H.displayName)||(H==null?void 0:H.username)||"Unknown User"}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("div",{className:"text-xs text-gray-500",children:j(t==null?void 0:t.createdAt)})})]}),Pe?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>d(!0),className:"text-gray-400 hover:text-blue-600 transition-colors",title:"Chnh sa bi vit",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),c.jsx("button",{onClick:Q,disabled:a,className:"text-red-400 hover:text-red-600 disabled:opacity-50 transition-colors",title:"Xa bi vit",children:a?c.jsx("div",{className:"w-5 h-5 border-2 border-red-400 border-t-transparent rounded-full animate-spin"}):c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}):c.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})})]}),(t==null?void 0:t.imageUrl)&&c.jsx("div",{className:"w-full bg-gray-100",style:{height:"500px"},children:c.jsx("img",{src:`http://localhost:5000${t.imageUrl}`,alt:"Post content",className:"w-full h-full object-cover",onLoad:()=>console.log(" Image loaded:",t.imageUrl),onError:B=>{console.error(" Image failed to load:",t.imageUrl,B),B.target.style.display="none"}})}),c.jsx("div",{className:"px-4 pt-4",children:(t==null?void 0:t.content)&&c.jsxs("div",{className:"text-sm text-gray-900 leading-relaxed mb-3",children:[c.jsx("span",{className:"font-semibold",children:(H==null?void 0:H.displayName)||(H==null?void 0:H.username)})," ",t.content]})}),c.jsxs("div",{className:"px-4 pb-2",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[c.jsx("button",{onClick:ge,className:`hover:opacity-70 transition-opacity ${s?"text-red-500":"text-gray-700"}`,title:"Thch",children:s?c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}):c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})}),c.jsx("button",{onClick:()=>ne(!V),className:`hover:opacity-70 transition-opacity ${V?"text-blue-600":"text-gray-700"}`,title:"Bnh lun",children:c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})})}),c.jsx("button",{className:"text-gray-700 hover:opacity-70 transition-opacity",title:"Chia s",onClick:()=>{try{window.dispatchEvent(new CustomEvent("app:post:share",{detail:{postId:t.id}}))}catch{}},children:c.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),c.jsx("polyline",{points:"15,3 21,3 21,9"}),c.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})})]}),c.jsxs("div",{className:"text-sm text-gray-700 mb-2",children:[i," lt thch"]})]}),V&&c.jsxs("div",{className:"px-4 pb-4 border-t border-gray-100 pt-3",children:[c.jsx("div",{className:"space-y-3",children:h.length===0?c.jsx("div",{className:"text-sm text-gray-500",children:"Cha c bnh lun no."}):Y(h).map(B=>c.jsx(r0,{node:B,depth:0,postId:t.id,onReply:R=>{var z,Z;return ee({id:R.comment.id,authorName:((z=R.author)==null?void 0:z.displayName)||((Z=R.author)==null?void 0:Z.username)})},onInlineReplyRequest:R=>{g(z=>z.map(Z=>{try{return Z.comment&&Z.comment.id===R?{...Z,_showInlineComposer:!0}:{...Z,_showInlineComposer:!1}}catch{return Z}}))},formatTime:j,onPosted:R=>{g(z=>[...z.map(O=>({...O,_showInlineComposer:!1})),R])}},B.comment.id))}),f&&c.jsxs("form",{onSubmit:async B=>{if(B.preventDefault(),!!p.trim()){D(!0);try{const R={content:p};w&&(R.icon=w),J&&J.id&&(R.parentId=J.id,console.log(" Sending reply with parentId:",J.id)),console.log(" Comment payload:",R);const z=await ye.post(`/posts/${t.id}/comments`,R);if(z.data&&z.data.comment){const Z=q(z.data.comment);Z&&(g(O=>[...O,Z]),m(""),b(""),ee(null))}}catch(R){console.error("Failed to post comment",R)}finally{D(!1)}}},className:"mt-4",children:[J&&c.jsxs("div",{className:"mb-2 text-xs text-gray-600 flex items-center gap-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{children:"ang tr li"}),c.jsx("span",{className:"font-semibold",children:J.authorName})]}),c.jsx("div",{className:"ml-3",children:c.jsx("button",{type:"button",onClick:B=>{B.stopPropagation(),ae()},className:"relative z-20 text-sm bg-white text-red-600 px-3 py-1 border border-red-200 hover:bg-red-50 rounded-sm shadow-sm transition-colors",children:"Hy"})}),M&&c.jsx("div",{className:"ml-2 text-xs bg-green-50 text-green-700 px-2 py-1 rounded-full border border-green-100",children:" hy"})]}),c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"w-8 h-8 flex-shrink-0",children:f!=null&&f.avatarUrl?c.jsx("img",{src:`http://localhost:5000${f.avatarUrl}`,alt:f.displayName||f.username,className:"w-8 h-8 rounded-full object-cover"}):c.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-sm text-gray-700",children:(((De=f==null?void 0:f.displayName)==null?void 0:De[0])||((ie=f==null?void 0:f.username)==null?void 0:ie[0])||"U").toUpperCase()})}),c.jsxs("div",{className:"flex-1 flex gap-2",children:[c.jsx("input",{ref:E,type:"text",value:p,onChange:B=>m(B.target.value),placeholder:"Vit bnh lun...",className:"flex-1 bg-gray-100 rounded-full px-4 py-2 text-sm focus:outline-none focus:bg-white focus:ring-2 focus:ring-blue-200"}),c.jsxs("div",{className:"relative overflow-visible",children:[c.jsx("button",{ref:C,type:"button",onClick:B=>{if(B.stopPropagation(),v){x(!1);return}try{const R=C.current.getBoundingClientRect(),z=Math.min(window.innerHeight*.6,360),O=window.innerHeight-R.bottom<z+16;I(O);const G=320;let Me=R.left+R.width/2-G/2;const Re=8;if(Me=Math.max(Re,Math.min(Me,window.innerWidth-G-Re)),O){const nn=window.innerHeight-R.top+8;F({left:Me,bottom:nn})}else{const nn=R.bottom+8;F({left:Me,top:nn})}x(!0)}catch{x(z=>!z)}},className:"px-2 py-1 rounded-full hover:bg-gray-100",title:"Chn cm xc",children:h1(w)||""}),v&&c.jsxs("div",{ref:k,className:"bg-white border border-gray-200 rounded-md shadow-lg p-3 z-50",style:{position:"fixed",width:"320px",maxHeight:"60vh",overflow:"visible",...(_==null?void 0:_.left)!=null?{left:`${_.left}px`}:{},...(_==null?void 0:_.top)!=null?{top:`${_.top}px`}:{},...(_==null?void 0:_.bottom)!=null?{bottom:`${_.bottom}px`}:{}},children:[c.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Chn cm xc"}),c.jsx("div",{className:"max-h-60 overflow-y-auto overflow-x-hidden pr-6",children:c.jsx("div",{className:"grid grid-cols-8 gap-2",children:Zs.map(B=>c.jsx("button",{type:"button",onClick:R=>{R.stopPropagation(),$(B.symbol)},className:"w-12 h-12 rounded-md flex items-center justify-center text-2xl transition-colors hover:bg-gray-100",title:B.label,children:B.symbol},B.key))})})]})]}),c.jsx("button",{type:"submit",disabled:y||!p.trim(),className:"bg-blue-500 text-white px-4 py-2 rounded-sm text-sm font-medium hover:bg-blue-600 disabled:opacity-60 disabled:cursor-not-allowed transition-colors",children:y?"...":"Gi"})]})]})]})]}),c.jsx(f1,{post:t,author:e,isOpen:u,onClose:()=>d(!1),onPostUpdated:()=>{window.dispatchEvent(new CustomEvent("app:post:updated",{detail:{postId:t.id}}))}})]})}function r0({node:t,depth:e=0,onReply:n,formatTime:s,onInlineReplyRequest:r,onPosted:i,postId:o}){var a,l,u,d,f,h,g,p,m,y,D,v,x,w,b,E,k,C,_,F,T,I,V;return c.jsxs("div",{className:"mb-3",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"w-8 h-8 flex-shrink-0",children:(a=t.author)!=null&&a.avatarUrl?c.jsx("img",{src:`http://localhost:5000${t.author.avatarUrl}`,alt:((l=t.author)==null?void 0:l.displayName)||((u=t.author)==null?void 0:u.username),className:"w-8 h-8 rounded-full object-cover"}):c.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-sm text-gray-700",children:((((d=t.author)==null?void 0:d.displayName)||((f=t.author)==null?void 0:f.username)||"U")[0]||"U").toUpperCase()})}),c.jsx("div",{className:"flex-1",children:c.jsx("div",{className:"bg-gray-50 rounded-2xl px-3 py-2",children:t.parent?c.jsxs("div",{children:[c.jsxs("div",{className:"text-xs text-blue-600 mb-2 font-medium bg-blue-50 px-2 py-1 rounded",children:[c.jsx("span",{className:"font-semibold",children:((h=t.author)==null?void 0:h.displayName)||((g=t.author)==null?void 0:g.username)}),c.jsx("span",{className:"mx-1",children:""}),c.jsx("span",{className:"font-semibold",children:((p=t.parent.author)==null?void 0:p.displayName)||((m=t.parent.author)==null?void 0:m.username)})]}),c.jsxs("div",{className:"text-xs text-gray-500 mb-2 border-l-2 border-gray-300 pl-2 italic break-words overflow-visible",children:['"',(D=(y=t.parent.comment)==null?void 0:y.content)==null?void 0:D.substring(0,50),((x=(v=t.parent.comment)==null?void 0:v.content)==null?void 0:x.length)>50?"...":"",'"']}),c.jsxs("div",{className:"text-sm text-gray-800 font-medium flex items-center gap-2 break-words overflow-visible",children:[!Hf((w=t.comment)==null?void 0:w.content,(b=t.comment)==null?void 0:b.icon)&&((E=t.comment)!=null&&E.icon)?Uf(t.comment.icon):null,c.jsx("div",{className:"break-words overflow-visible",children:(k=t.comment)==null?void 0:k.content})]}),c.jsxs("div",{className:"mt-2 text-xs text-gray-400 flex items-center gap-3",children:[(()=>{var J;const ne=s((J=t.comment)==null?void 0:J.createdAt);return ne?c.jsx("div",{children:ne}):null})(),c.jsx("div",{children:c.jsx("button",{onClick:()=>r(t.comment.id),className:"text-blue-600 hover:underline text-xs",children:"Tr li"})})]})]}):c.jsxs("div",{children:[c.jsxs("div",{className:"text-sm text-gray-800 flex items-center gap-2 break-words overflow-visible",children:[!Hf((C=t.comment)==null?void 0:C.content,(_=t.comment)==null?void 0:_.icon)&&((F=t.comment)!=null&&F.icon)?Uf(t.comment.icon):null,c.jsxs("div",{className:"break-words overflow-visible",children:[c.jsx("span",{className:"font-semibold mr-2",children:((T=t.author)==null?void 0:T.displayName)||((I=t.author)==null?void 0:I.username)}),c.jsx("span",{children:(V=t.comment)==null?void 0:V.content})]})]}),c.jsxs("div",{className:"mt-2 text-xs text-gray-400 flex items-center gap-3",children:[(()=>{var J;const ne=s((J=t.comment)==null?void 0:J.createdAt);return ne?c.jsx("div",{children:ne}):null})(),c.jsx("div",{children:c.jsx("button",{onClick:()=>r(t.comment.id),className:"text-blue-600 hover:underline text-xs",children:"Tr li"})})]})]})})})]}),(()=>{const he=e===0?44:0;return c.jsxs("div",{style:{marginLeft:he},className:"mt-2",children:[t.children&&t.children.map(P=>c.jsx(r0,{node:P,depth:e+1,onReply:n,formatTime:s,onInlineReplyRequest:r,onPosted:i,postId:o},P.comment.id)),t.comment&&t._showInlineComposer?c.jsx(g1,{postId:o,parentId:t.comment.id,onPosted:P=>{try{i&&i(P)}catch(M){console.error("onPosted handler failed",M)}},onCancel:()=>{try{r&&r(null)}catch(P){console.warn("Failed to cancel inline composer",P)}}}):null]})})()]})}function D1(){const{user:t,updateTrigger:e}=st(),[n,s]=S.useState([]),[r,i]=S.useState(!0);S.useEffect(()=>{o();const u=()=>{o()};window.addEventListener("app:navigate:home",u);const d=g=>{const p=g.detail||g;!p||!p.post||s(m=>m.some(D=>D.post.id===p.post.id)?m:[p,...m])};window.addEventListener("app:post:created",d);const f=g=>{const p=g.detail||g;if(console.debug("Feed received app:post:deleted",p),!p)return;const m=p.postId||p.id||p.post&&p.post.id;m&&((p.deletedBy||p.deletedByUsername)&&console.debug(`Post ${m} deleted by ${p.deletedByUsername||p.deletedBy}`),p.deletedAt&&console.debug(`deletedAt: ${new Date(p.deletedAt).toISOString()}`),s(y=>y.filter(D=>D.post.id!==m)))},h=g=>{const p=g.detail||g;if(console.debug("Feed received app:post:updated",p),!p)return;const m=p.postId||p.post&&p.post.id||p.id||null;if(!m){o();return}if(p.hidden===!0){const y=t&&t.id?String(t.id):null,D=t&&(t.role==="admin"||t.role==="superadmin");s(v=>{const x=v.find(b=>b.post.id===m);if(!x)return v;const w=x.author&&(x.author.id||x.author.userId);return D||y&&w&&String(y)===String(w)?v:v.filter(b=>b.post.id!==m)})}o()};return window.addEventListener("app:post:deleted",f),window.addEventListener("app:post:updated",h),window.dispatchEvent(new CustomEvent("app:navigate:home")),()=>{window.removeEventListener("app:navigate:home",u),window.removeEventListener("app:post:created",d),window.removeEventListener("app:post:deleted",f),window.removeEventListener("app:post:updated",h)}},[t,e]);const o=async()=>{try{const u=await ye.get("/posts/feed");console.debug("fetchPosts: server response:",u.data),s(u.data)}catch(u){console.error("Error fetching posts:",u)}finally{i(!1)}},a=()=>{o()},l=u=>{s(d=>d.filter(f=>f.post.id!==u))};return r?c.jsx("div",{className:"w-full",children:c.jsx("div",{className:"animate-pulse space-y-6",children:[1,2,3].map(u=>c.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-4",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),c.jsx("div",{className:"h-96 bg-gray-200 rounded"})]},u))})}):c.jsxs("div",{id:"home-feed",className:"w-full",children:[t&&c.jsx(u1,{onPostCreated:a}),c.jsx("div",{className:"space-y-6",children:n.length===0?c.jsx("div",{className:"bg-white border border-gray-200 rounded-2xl p-8 text-center shadow-md ring-1 ring-gray-100",children:c.jsxs("div",{className:"mx-auto max-w-md",children:[c.jsx("div",{className:"flex items-center justify-center mb-4",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-12 h-12 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 10h.01M12 10h.01M16 10h.01M21 12c0 4.418-4.03 8-9 8a9.72 9.72 0 01-4-.84L3 20l1.16-4.16A7.72 7.72 0 013 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Hin cha c bi vit"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Hy l ngi u tin chia s iu g  vi cng ng."}),t?c.jsx("div",{children:c.jsx("button",{onClick:()=>{try{const u=document.getElementById("composer-textarea");if(u){u.focus();const f=u.value?u.value.length:0;try{u.setSelectionRange(f,f)}catch{}}window.dispatchEvent(new CustomEvent("app:focus:create"));const d=document.getElementById("home-feed");d&&d.scrollIntoView({behavior:"smooth",block:"start"})}catch{}},className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg shadow hover:bg-blue-600 transition",children:"To bi vit"})}):null]})}):n.map(u=>c.jsx(y1,{post:u.post,author:u.author,onDelete:l},u.post.id))})]})}const x1=({onToggleAdmin:t})=>{var y,D,v;const{user:e,updateTrigger:n}=st(),[s,r]=S.useState([]),[i,o]=S.useState(!1),[a,l]=S.useState(null),[u,d]=S.useState(new Set),[f,h]=S.useState(null),g=async x=>{o(!0),l(null);try{const w=await ye.get("/users/suggestions"),E=(Array.isArray(w.data)?w.data:[]).filter(k=>!(!k||e!=null&&e.id&&k.id&&k.id===e.id||e!=null&&e.username&&k.username&&k.username===e.username));x!=null&&x.aborted||r(E)}catch(w){console.error("Failed to load suggestions",w),x!=null&&x.aborted||l("Khng th ti gi ")}finally{x!=null&&x.aborted||o(!1)}},p=async x=>{try{const w=await ye.get("/users/following");!(x!=null&&x.aborted)&&w.data&&Array.isArray(w.data.following)&&d(new Set(w.data.following.map(b=>String(b))))}catch{}};S.useEffect(()=>{const x={aborted:!1};g(x),p(x);const w=C=>{try{const _=C.detail||{};console.log("sidebar onFollow event:",_),_.followerId&&String(_.followerId)===String(e==null?void 0:e.id)&&d(F=>{const T=new Set(F);return _.followingId&&T.add(String(_.followingId)),T})}catch(_){console.warn("Sidebar failed to process app:user:follow",_)}},b=C=>{try{const _=C.detail||{};console.log("sidebar onUnfollow event:",_),_.followerId&&String(_.followerId)===String(e==null?void 0:e.id)&&d(F=>{const T=new Set(F);return _.followingId&&T.delete(String(_.followingId)),T})}catch(_){console.warn("Sidebar failed to process app:user:unfollow",_)}};window.addEventListener("app:user:follow",w),window.addEventListener("app:user:unfollow",b);const E=C=>{try{const _=C.detail||C;if(!_||!_.user)return;const F=_.user;r(T=>!Array.isArray(T)||T.length===0?T:T.map(I=>{try{if(!I)return I;if(I.id&&F.id&&String(I.id)===String(F.id))return{...I,...F};if(I.username&&F.username&&String(I.username)===String(F.username))return{...I,...F}}catch{}return I}))}catch(_){console.warn("Sidebar failed to process app:user:updated",_)}},k=C=>{try{const _=C.detail||C;if(!_||!_.user)return;const F=_.user;if(console.log("Sidebar received app:user:created:",F&&F.username,F&&F.id),e&&F&&String(F.id)===String(e.id))return;try{g()}catch(T){console.warn("Failed to refresh suggestions after user:created",T)}}catch(_){console.warn("Sidebar failed to process app:user:created",_)}};return window.addEventListener("app:user:updated",E),window.addEventListener("app:user:created",k),()=>{x.aborted=!0,window.removeEventListener("app:user:follow",w),window.removeEventListener("app:user:unfollow",b),window.removeEventListener("app:user:updated",E),window.removeEventListener("app:user:created",k)}},[e==null?void 0:e.id,n]);const m=async x=>{const w=String(x),b=u.has(w);console.log("handleFollow:",{userId:x,normalizedUserId:w,isFollowing:b,following:Array.from(u)}),d(E=>{const k=new Set(E);return b?k.delete(w):k.add(w),k});try{b?await ye.delete(`/users/follow/${w}`):await ye.post(`/users/follow/${w}`);try{const E={followerId:e==null?void 0:e.id,followingId:w},k=b?"app:user:unfollow":"app:user:follow";window.dispatchEvent(new CustomEvent(k,{detail:E}))}catch{}}catch(E){console.error("Follow toggle failed",E),d(k=>{const C=new Set(k);return b?C.add(w):C.delete(w),C})}};return e?c.jsxs("div",{className:"w-full space-y-6",children:[((e==null?void 0:e.role)==="admin"||String(e==null?void 0:e.username)==="admin")&&c.jsx("div",{className:"bg-white border border-gray-300 rounded-lg p-4",children:c.jsx("button",{onClick:()=>window.location.pathname="/admin",className:"w-full bg-blue-600 text-white py-2 rounded-lg font-medium",children:"Open Admin Dashboard"})}),c.jsx("div",{className:"bg-white border border-gray-300 rounded-lg p-6",children:c.jsxs("div",{className:"flex items-center gap-4",children:[e!=null&&e.avatarUrl?c.jsx("img",{src:`http://localhost:5000${e.avatarUrl}`,alt:"Avatar",className:"w-16 h-16 rounded-full object-cover shadow-avatar",onError:x=>{try{x.target.style.display="none"}catch{}}}):c.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-avatar",children:((v=((y=e==null?void 0:e.displayName)==null?void 0:y[0])||((D=e==null?void 0:e.username)==null?void 0:D[0]))==null?void 0:v.toUpperCase())||"U"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"font-semibold text-lg text-gray-900 truncate",children:(e==null?void 0:e.displayName)||(e==null?void 0:e.username)||"Unknown"}),c.jsxs("div",{className:"text-sm text-gray-600 truncate",children:["@",e==null?void 0:e.username]})]})]},n)}),c.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Gi  kt ni"}),i?c.jsx("div",{className:"text-sm text-gray-500",children:"Loading..."}):a?c.jsx("div",{className:"text-sm text-red-500",children:a}):c.jsx("div",{className:"space-y-4",children:s.length===0?c.jsx("div",{className:"text-sm text-gray-500",children:"No suggestions available."}):s.filter(x=>{const w=x.id||x.username;return!u.has(w)}).map(x=>{var w,b,E,k;return c.jsxs("div",{className:"flex items-center gap-4 p-2 hover:bg-gray-50 rounded-lg transition-colors",children:[c.jsx("div",{className:"relative w-12 h-12",children:x!=null&&x.avatarUrl?c.jsxs(c.Fragment,{children:[c.jsx("img",{src:`http://localhost:5000${x.avatarUrl}`,alt:x.displayName||x.username,className:"w-12 h-12 rounded-full object-cover shadow-avatar",onError:C=>{try{C.target.style.display="none";const _=C.target.nextElementSibling;_&&(_.style.display="flex")}catch{}}}),c.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-400 to-purple-400 rounded-full flex items-center justify-center text-white font-bold shadow-avatar absolute top-0 left-0",style:{display:"none"},children:(((w=x.displayName)==null?void 0:w[0])||((b=x.username)==null?void 0:b[0])||"U").toUpperCase()})]}):c.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-400 to-purple-400 rounded-full flex items-center justify-center text-white font-bold shadow-avatar",children:(((E=x.displayName)==null?void 0:E[0])||((k=x.username)==null?void 0:k[0])||"U").toUpperCase()})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"font-semibold text-gray-900 truncate",children:x.displayName||x.username}),c.jsxs("div",{className:"text-sm text-gray-500 truncate",children:["@",x.username]})]}),(()=>{const C=String(x.id||x.username),_=u.has(String(C));return c.jsx("button",{onClick:()=>m(C),onMouseEnter:()=>h(C),onMouseLeave:()=>h(null),className:`flex-shrink-0 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ease-in-out transform min-w-[100px] ${_?"bg-gray-200 text-gray-800 hover:bg-red-500 hover:text-white hover:scale-105":"bg-blue-500 text-white hover:bg-blue-600"}`,children:_?f===C?"B theo di":"ang theo di":"Theo di"})})()]},x.id||x.username)})})]})]}):c.jsx("div",{className:"w-full",children:c.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 text-center",children:[c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Cho mng n vi mng x hi"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"ng nhp  xem bi vit v kt ni vi bn b!"})]})})},v1=t=>c.jsx(x1,{...t});/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ji(t){return t+.5|0}const Fn=(t,e,n)=>Math.max(Math.min(t,n),e);function Ar(t){return Fn(ji(t*2.55),0,255)}function Un(t){return Fn(ji(t*255),0,255)}function un(t){return Fn(ji(t/2.55)/100,0,1)}function $f(t){return Fn(ji(t*100),0,100)}const bt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Bu=[..."0123456789ABCDEF"],w1=t=>Bu[t&15],b1=t=>Bu[(t&240)>>4]+Bu[t&15],Ji=t=>(t&240)>>4===(t&15),C1=t=>Ji(t.r)&&Ji(t.g)&&Ji(t.b)&&Ji(t.a);function E1(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&bt[t[1]]*17,g:255&bt[t[2]]*17,b:255&bt[t[3]]*17,a:e===5?bt[t[4]]*17:255}:(e===7||e===9)&&(n={r:bt[t[1]]<<4|bt[t[2]],g:bt[t[3]]<<4|bt[t[4]],b:bt[t[5]]<<4|bt[t[6]],a:e===9?bt[t[7]]<<4|bt[t[8]]:255})),n}const k1=(t,e)=>t<255?e(t):"";function _1(t){var e=C1(t)?w1:b1;return t?"#"+e(t.r)+e(t.g)+e(t.b)+k1(t.a,e):void 0}const S1=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function i0(t,e,n){const s=e*Math.min(n,1-n),r=(i,o=(i+t/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function F1(t,e,n){const s=(r,i=(r+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function N1(t,e,n){const s=i0(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)s[r]*=1-e-n,s[r]+=e;return s}function j1(t,e,n,s,r){return t===r?(e-n)/s+(e<n?6:0):e===r?(n-t)/s+2:(t-e)/s+4}function qc(t){const n=t.r/255,s=t.g/255,r=t.b/255,i=Math.max(n,s,r),o=Math.min(n,s,r),a=(i+o)/2;let l,u,d;return i!==o&&(d=i-o,u=a>.5?d/(2-i-o):d/(i+o),l=j1(n,s,r,d,i),l=l*60+.5),[l|0,u||0,a]}function Kc(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(Un)}function Yc(t,e,n){return Kc(i0,t,e,n)}function A1(t,e,n){return Kc(N1,t,e,n)}function T1(t,e,n){return Kc(F1,t,e,n)}function o0(t){return(t%360+360)%360}function B1(t){const e=S1.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?Ar(+e[5]):Un(+e[5]));const r=o0(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=A1(r,i,o):e[1]==="hsv"?s=T1(r,i,o):s=Yc(r,i,o),{r:s[0],g:s[1],b:s[2],a:n}}function P1(t,e){var n=qc(t);n[0]=o0(n[0]+e),n=Yc(n),t.r=n[0],t.g=n[1],t.b=n[2]}function L1(t){if(!t)return;const e=qc(t),n=e[0],s=$f(e[1]),r=$f(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${r}%, ${un(t.a)})`:`hsl(${n}, ${s}%, ${r}%)`}const Wf={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Vf={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function O1(){const t={},e=Object.keys(Vf),n=Object.keys(Wf);let s,r,i,o,a;for(s=0;s<e.length;s++){for(o=a=e[s],r=0;r<n.length;r++)i=n[r],a=a.replace(i,Wf[i]);i=parseInt(Vf[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let Zi;function M1(t){Zi||(Zi=O1(),Zi.transparent=[0,0,0,0]);const e=Zi[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const R1=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function I1(t){const e=R1.exec(t);let n=255,s,r,i;if(e){if(e[7]!==s){const o=+e[7];n=e[8]?Ar(o):Fn(o*255,0,255)}return s=+e[1],r=+e[3],i=+e[5],s=255&(e[2]?Ar(s):Fn(s,0,255)),r=255&(e[4]?Ar(r):Fn(r,0,255)),i=255&(e[6]?Ar(i):Fn(i,0,255)),{r:s,g:r,b:i,a:n}}}function z1(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${un(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const vl=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Es=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function U1(t,e,n){const s=Es(un(t.r)),r=Es(un(t.g)),i=Es(un(t.b));return{r:Un(vl(s+n*(Es(un(e.r))-s))),g:Un(vl(r+n*(Es(un(e.g))-r))),b:Un(vl(i+n*(Es(un(e.b))-i))),a:t.a+n*(e.a-t.a)}}function eo(t,e,n){if(t){let s=qc(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=Yc(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function a0(t,e){return t&&Object.assign(e||{},t)}function qf(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Un(t[3]))):(e=a0(t,{r:0,g:0,b:0,a:1}),e.a=Un(e.a)),e}function H1(t){return t.charAt(0)==="r"?I1(t):B1(t)}class pi{constructor(e){if(e instanceof pi)return e;const n=typeof e;let s;n==="object"?s=qf(e):n==="string"&&(s=E1(e)||M1(e)||H1(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=a0(this._rgb);return e&&(e.a=un(e.a)),e}set rgb(e){this._rgb=qf(e)}rgbString(){return this._valid?z1(this._rgb):void 0}hexString(){return this._valid?_1(this._rgb):void 0}hslString(){return this._valid?L1(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,r=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=s.a-r.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-u,s.r=255&u*s.r+i*r.r+.5,s.g=255&u*s.g+i*r.g+.5,s.b=255&u*s.b+i*r.b+.5,s.a=o*s.a+(1-o)*r.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=U1(this._rgb,e._rgb,n)),this}clone(){return new pi(this.rgb)}alpha(e){return this._rgb.a=Un(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=ji(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return eo(this._rgb,2,e),this}darken(e){return eo(this._rgb,2,-e),this}saturate(e){return eo(this._rgb,1,e),this}desaturate(e){return eo(this._rgb,1,-e),this}rotate(e){return P1(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function sn(){}const $1=(()=>{let t=0;return()=>t++})();function ve(t){return t==null}function ze(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function fe(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Tt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function qt(t,e){return Tt(t)?t:e}function ue(t,e){return typeof t>"u"?e:t}const W1=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function be(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function pe(t,e,n,s){let r,i,o;if(ze(t))for(i=t.length,r=0;r<i;r++)e.call(n,t[r],r);else if(fe(t))for(o=Object.keys(t),i=o.length,r=0;r<i;r++)e.call(n,t[o[r]],o[r])}function oa(t,e){let n,s,r,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(r=t[n],i=e[n],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function aa(t){if(ze(t))return t.map(aa);if(fe(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let r=0;for(;r<s;++r)e[n[r]]=aa(t[n[r]]);return e}return t}function l0(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function V1(t,e,n,s){if(!l0(t))return;const r=e[t],i=n[t];fe(r)&&fe(i)?mi(r,i,s):e[t]=aa(i)}function mi(t,e,n){const s=ze(e)?e:[e],r=s.length;if(!fe(t))return t;n=n||{};const i=n.merger||V1;let o;for(let a=0;a<r;++a){if(o=s[a],!fe(o))continue;const l=Object.keys(o);for(let u=0,d=l.length;u<d;++u)i(l[u],t,o,n)}return t}function Vr(t,e){return mi(t,e,{merger:q1})}function q1(t,e,n){if(!l0(t))return;const s=e[t],r=n[t];fe(s)&&fe(r)?Vr(s,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=aa(r))}const Kf={"":t=>t,x:t=>t.x,y:t=>t.y};function K1(t){const e=t.split("."),n=[];let s="";for(const r of e)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function Y1(t){const e=K1(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function la(t,e){return(Kf[e]||(Kf[e]=Y1(e)))(t)}function Xc(t){return t.charAt(0).toUpperCase()+t.slice(1)}const ua=t=>typeof t<"u",Wn=t=>typeof t=="function",Yf=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function X1(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const He=Math.PI,en=2*He,Q1=en+He,ca=Number.POSITIVE_INFINITY,G1=He/180,It=He/2,Xn=He/4,Xf=He*2/3,u0=Math.log10,er=Math.sign;function qr(t,e,n){return Math.abs(t-e)<n}function Qf(t){const e=Math.round(t);t=qr(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(u0(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function J1(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((r,i)=>r-i).pop(),e}function Z1(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function gi(t){return!Z1(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function e2(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function t2(t,e,n){let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function os(t){return t*(He/180)}function n2(t){return t*(180/He)}function Gf(t){if(!Tt(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function s2(t,e){const n=e.x-t.x,s=e.y-t.y,r=Math.sqrt(n*n+s*s);let i=Math.atan2(s,n);return i<-.5*He&&(i+=en),{angle:i,distance:r}}function Pu(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function r2(t,e){return(t-e+Q1)%en-He}function wn(t){return(t%en+en)%en}function c0(t,e,n,s){const r=wn(t),i=wn(e),o=wn(n),a=wn(i-r),l=wn(o-r),u=wn(r-i),d=wn(r-o);return r===i||r===o||s&&i===o||a>l&&u<d}function St(t,e,n){return Math.max(e,Math.min(n,t))}function i2(t){return St(t,-32768,32767)}function Tr(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function Qc(t,e,n){n=n||(o=>t[o]<e);let s=t.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const as=(t,e,n,s)=>Qc(t,n,s?r=>{const i=t[r][e];return i<n||i===n&&t[r+1][e]===n}:r=>t[r][e]<n),o2=(t,e,n)=>Qc(t,n,s=>t[s][e]>=n);function a2(t,e,n){let s=0,r=t.length;for(;s<r&&t[s]<e;)s++;for(;r>s&&t[r-1]>n;)r--;return s>0||r<t.length?t.slice(s,r):t}const d0=["push","pop","shift","splice","unshift"];function l2(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),d0.forEach(n=>{const s="_onData"+Xc(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...i)}),o}})})}function Jf(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,r=s.indexOf(e);r!==-1&&s.splice(r,1),!(s.length>0)&&(d0.forEach(i=>{delete t[i]}),delete t._chartjs)}function u2(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const f0=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function h0(t,e){let n=[],s=!1;return function(...r){n=r,s||(s=!0,f0.call(window,()=>{s=!1,t.apply(e,n)}))}}function c2(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const Gc=t=>t==="start"?"left":t==="end"?"right":"center",Ye=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,d2=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e;function f2(t,e,n){const s=e.length;let r=0,i=s;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,d=o.axis,{min:f,max:h,minDefined:g,maxDefined:p}=o.getUserBounds();if(g){if(r=Math.min(as(l,d,f).lo,n?s:as(e,d,o.getPixelForValue(f)).lo),u){const m=l.slice(0,r+1).reverse().findIndex(y=>!ve(y[a.axis]));r-=Math.max(0,m)}r=St(r,0,s-1)}if(p){let m=Math.max(as(l,o.axis,h,!0).hi+1,n?0:as(e,d,o.getPixelForValue(h),!0).hi+1);if(u){const y=l.slice(m-1).findIndex(D=>!ve(D[a.axis]));m+=Math.max(0,y)}i=St(m,r,s)-r}else i=s-r}return{start:r,count:i}}function h2(t){const{xScale:e,yScale:n,_scaleRanges:s}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!s)return t._scaleRanges=r,!0;const i=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,r),i}const to=t=>t===0||t===1,Zf=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*en/n)),eh=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*en/n)+1,Kr={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*It)+1,easeOutSine:t=>Math.sin(t*It),easeInOutSine:t=>-.5*(Math.cos(He*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>to(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>to(t)?t:Zf(t,.075,.3),easeOutElastic:t=>to(t)?t:eh(t,.075,.3),easeInOutElastic(t){return to(t)?t:t<.5?.5*Zf(t*2,.1125,.45):.5+.5*eh(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Kr.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Kr.easeInBounce(t*2)*.5:Kr.easeOutBounce(t*2-1)*.5+.5};function Jc(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function th(t){return Jc(t)?t:new pi(t)}function wl(t){return Jc(t)?t:new pi(t).saturate(.5).darken(.1).hexString()}const p2=["x","y","borderWidth","radius","tension"],m2=["color","borderColor","backgroundColor"];function g2(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:m2},numbers:{type:"number",properties:p2}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function y2(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const nh=new Map;function D2(t,e){e=e||{};const n=t+JSON.stringify(e);let s=nh.get(n);return s||(s=new Intl.NumberFormat(t,e),nh.set(n,s)),s}function p0(t,e,n){return D2(e,n).format(t)}const x2={values(t){return ze(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let r,i=t;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(r="scientific"),i=v2(t,n)}const o=u0(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),p0(t,s,l)}};function v2(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var m0={formatters:x2};function w2(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:m0.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ds=Object.create(null),Lu=Object.create(null);function Yr(t,e){if(!e)return t;const n=e.split(".");for(let s=0,r=n.length;s<r;++s){const i=n[s];t=t[i]||(t[i]=Object.create(null))}return t}function bl(t,e,n){return typeof e=="string"?mi(Yr(t,e),n):mi(Yr(t,""),e)}class b2{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>wl(r.backgroundColor),this.hoverBorderColor=(s,r)=>wl(r.borderColor),this.hoverColor=(s,r)=>wl(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return bl(this,e,n)}get(e){return Yr(this,e)}describe(e,n){return bl(Lu,e,n)}override(e,n){return bl(Ds,e,n)}route(e,n,s,r){const i=Yr(this,e),o=Yr(this,s),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],u=o[r];return fe(l)?Object.assign({},u,l):ue(l,u)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Ae=new b2({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[g2,y2,w2]);function C2(t){return!t||ve(t.size)||ve(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function sh(t,e,n,s,r){let i=e[r];return i||(i=e[r]=t.measureText(r).width,n.push(r)),i>s&&(s=i),s}function Qn(t,e,n){const s=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*s)/s+r}function rh(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Ou(t,e,n,s){g0(t,e,n,s,null)}function g0(t,e,n,s,r){let i,o,a,l,u,d,f,h;const g=e.pointStyle,p=e.rotation,m=e.radius;let y=(p||0)*G1;if(g&&typeof g=="object"&&(i=g.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(y),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(m)||m<=0)){switch(t.beginPath(),g){default:r?t.ellipse(n,s,r/2,m,0,0,en):t.arc(n,s,m,0,en),t.closePath();break;case"triangle":d=r?r/2:m,t.moveTo(n+Math.sin(y)*d,s-Math.cos(y)*m),y+=Xf,t.lineTo(n+Math.sin(y)*d,s-Math.cos(y)*m),y+=Xf,t.lineTo(n+Math.sin(y)*d,s-Math.cos(y)*m),t.closePath();break;case"rectRounded":u=m*.516,l=m-u,o=Math.cos(y+Xn)*l,f=Math.cos(y+Xn)*(r?r/2-u:l),a=Math.sin(y+Xn)*l,h=Math.sin(y+Xn)*(r?r/2-u:l),t.arc(n-f,s-a,u,y-He,y-It),t.arc(n+h,s-o,u,y-It,y),t.arc(n+f,s+a,u,y,y+It),t.arc(n-h,s+o,u,y+It,y+He),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,d=r?r/2:l,t.rect(n-d,s-l,2*d,2*l);break}y+=Xn;case"rectRot":f=Math.cos(y)*(r?r/2:m),o=Math.cos(y)*m,a=Math.sin(y)*m,h=Math.sin(y)*(r?r/2:m),t.moveTo(n-f,s-a),t.lineTo(n+h,s-o),t.lineTo(n+f,s+a),t.lineTo(n-h,s+o),t.closePath();break;case"crossRot":y+=Xn;case"cross":f=Math.cos(y)*(r?r/2:m),o=Math.cos(y)*m,a=Math.sin(y)*m,h=Math.sin(y)*(r?r/2:m),t.moveTo(n-f,s-a),t.lineTo(n+f,s+a),t.moveTo(n+h,s-o),t.lineTo(n-h,s+o);break;case"star":f=Math.cos(y)*(r?r/2:m),o=Math.cos(y)*m,a=Math.sin(y)*m,h=Math.sin(y)*(r?r/2:m),t.moveTo(n-f,s-a),t.lineTo(n+f,s+a),t.moveTo(n+h,s-o),t.lineTo(n-h,s+o),y+=Xn,f=Math.cos(y)*(r?r/2:m),o=Math.cos(y)*m,a=Math.sin(y)*m,h=Math.sin(y)*(r?r/2:m),t.moveTo(n-f,s-a),t.lineTo(n+f,s+a),t.moveTo(n+h,s-o),t.lineTo(n-h,s+o);break;case"line":o=r?r/2:Math.cos(y)*m,a=Math.sin(y)*m,t.moveTo(n-o,s-a),t.lineTo(n+o,s+a);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(y)*(r?r/2:m),s+Math.sin(y)*m);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function yi(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Zc(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ed(t){t.restore()}function E2(t,e,n,s,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else r==="after"!=!!s?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function k2(t,e,n,s){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function _2(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ve(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function S2(t,e,n,s,r){if(r.strikethrough||r.underline){const i=t.measureText(s),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,u=n+i.actualBoundingBoxDescent,d=r.strikethrough?(l+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,d),t.lineTo(a,d),t.stroke()}}function F2(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Di(t,e,n,s,r,i={}){const o=ze(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,u;for(t.save(),t.font=r.string,_2(t,i),l=0;l<o.length;++l)u=o[l],i.backdrop&&F2(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),ve(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(u,n,s,i.maxWidth)),t.fillText(u,n,s,i.maxWidth),S2(t,n,s,u,i),s+=Number(r.lineHeight);t.restore()}function Mu(t,e){const{x:n,y:s,w:r,h:i,radius:o}=e;t.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*He,He,!0),t.lineTo(n,s+i-o.bottomLeft),t.arc(n+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,He,It,!0),t.lineTo(n+r-o.bottomRight,s+i),t.arc(n+r-o.bottomRight,s+i-o.bottomRight,o.bottomRight,It,0,!0),t.lineTo(n+r,s+o.topRight),t.arc(n+r-o.topRight,s+o.topRight,o.topRight,0,-It,!0),t.lineTo(n+o.topLeft,s)}const N2=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,j2=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function A2(t,e){const n=(""+t).match(N2);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const T2=t=>+t||0;function y0(t,e){const n={},s=fe(e),r=s?Object.keys(e):e,i=fe(t)?s?o=>ue(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=T2(i(o));return n}function B2(t){return y0(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Xr(t){return y0(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Bt(t){const e=B2(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ge(t,e){t=t||{},e=e||Ae.font;let n=ue(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=ue(t.style,e.style);s&&!(""+s).match(j2)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:ue(t.family,e.family),lineHeight:A2(ue(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:ue(t.weight,e.weight),string:""};return r.string=C2(r),r}function no(t,e,n,s){let r,i,o;for(r=0,i=t.length;r<i;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function P2(t,e,n){const{min:s,max:r}=t,i=W1(e,(r-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(i)),max:o(r,i)}}function ws(t,e){return Object.assign(Object.create(t),e)}function td(t,e=[""],n,s,r=()=>t[0]){const i=n||t;typeof s>"u"&&(s=w0("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:s,_getTarget:r,override:a=>td([a,...t],e,i,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return x0(a,l,()=>H2(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return oh(a).includes(l)},ownKeys(a){return oh(a)},set(a,l,u){const d=a._storage||(a._storage=r());return a[l]=d[l]=u,delete a._keys,!0}})}function tr(t,e,n,s){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:D0(t,s),setContext:i=>tr(t,i,n,s),override:i=>tr(t.override(i),e,n,s)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return x0(i,o,()=>O2(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function D0(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:s,isScriptable:Wn(n)?n:()=>n,isIndexable:Wn(s)?s:()=>s}}const L2=(t,e)=>t?t+Xc(e):e,nd=(t,e)=>fe(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function x0(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=n();return t[e]=s,s}function O2(t,e,n){const{_proxy:s,_context:r,_subProxy:i,_descriptors:o}=t;let a=s[e];return Wn(a)&&o.isScriptable(e)&&(a=M2(e,a,t,n)),ze(a)&&a.length&&(a=R2(e,a,t,o.isIndexable)),nd(e,a)&&(a=tr(a,r,i&&i[e],o)),a}function M2(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||s);return a.delete(t),nd(t,l)&&(l=sd(r._scopes,r,t,l)),l}function R2(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&s(t))return e[i.index%e.length];if(fe(e[0])){const l=e,u=r._scopes.filter(d=>d!==l);e=[];for(const d of l){const f=sd(u,r,t,d);e.push(tr(f,i,o&&o[t],a))}}return e}function v0(t,e,n){return Wn(t)?t(e,n):t}const I2=(t,e)=>t===!0?e:typeof t=="string"?la(e,t):void 0;function z2(t,e,n,s,r){for(const i of e){const o=I2(n,i);if(o){t.add(o);const a=v0(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function sd(t,e,n,s){const r=e._rootScopes,i=v0(e._fallback,n,s),o=[...t,...r],a=new Set;a.add(s);let l=ih(a,o,n,i||n,s);return l===null||typeof i<"u"&&i!==n&&(l=ih(a,o,i,l,s),l===null)?!1:td(Array.from(a),[""],r,i,()=>U2(e,n,s))}function ih(t,e,n,s,r){for(;n;)n=z2(t,e,n,s,r);return n}function U2(t,e,n){const s=t._getTarget();e in s||(s[e]={});const r=s[e];return ze(r)&&fe(n)?n:r||{}}function H2(t,e,n,s){let r;for(const i of e)if(r=w0(L2(i,t),n),typeof r<"u")return nd(t,r)?sd(n,s,t,r):r}function w0(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function oh(t){let e=t._keys;return e||(e=t._keys=$2(t._scopes)),e}function $2(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(s);return Array.from(e)}const W2=Number.EPSILON||1e-14,nr=(t,e)=>e<t.length&&!t[e].skip&&t[e],b0=t=>t==="x"?"y":"x";function V2(t,e,n,s){const r=t.skip?e:t,i=e,o=n.skip?e:n,a=Pu(i,r),l=Pu(o,i);let u=a/(a+l),d=l/(a+l);u=isNaN(u)?0:u,d=isNaN(d)?0:d;const f=s*u,h=s*d;return{previous:{x:i.x-f*(o.x-r.x),y:i.y-f*(o.y-r.y)},next:{x:i.x+h*(o.x-r.x),y:i.y+h*(o.y-r.y)}}}function q2(t,e,n){const s=t.length;let r,i,o,a,l,u=nr(t,0);for(let d=0;d<s-1;++d)if(l=u,u=nr(t,d+1),!(!l||!u)){if(qr(e[d],0,W2)){n[d]=n[d+1]=0;continue}r=n[d]/e[d],i=n[d+1]/e[d],a=Math.pow(r,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[d]=r*o*e[d],n[d+1]=i*o*e[d])}}function K2(t,e,n="x"){const s=b0(n),r=t.length;let i,o,a,l=nr(t,0);for(let u=0;u<r;++u){if(o=a,a=l,l=nr(t,u+1),!a)continue;const d=a[n],f=a[s];o&&(i=(d-o[n])/3,a[`cp1${n}`]=d-i,a[`cp1${s}`]=f-i*e[u]),l&&(i=(l[n]-d)/3,a[`cp2${n}`]=d+i,a[`cp2${s}`]=f+i*e[u])}}function Y2(t,e="x"){const n=b0(e),s=t.length,r=Array(s).fill(0),i=Array(s);let o,a,l,u=nr(t,0);for(o=0;o<s;++o)if(a=l,l=u,u=nr(t,o+1),!!l){if(u){const d=u[e]-l[e];r[o]=d!==0?(u[n]-l[n])/d:0}i[o]=a?u?er(r[o-1])!==er(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}q2(t,r,i),K2(t,i,e)}function so(t,e,n){return Math.max(Math.min(t,n),e)}function X2(t,e){let n,s,r,i,o,a=yi(t[0],e);for(n=0,s=t.length;n<s;++n)o=i,i=a,a=n<s-1&&yi(t[n+1],e),i&&(r=t[n],o&&(r.cp1x=so(r.cp1x,e.left,e.right),r.cp1y=so(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=so(r.cp2x,e.left,e.right),r.cp2y=so(r.cp2y,e.top,e.bottom)))}function Q2(t,e,n,s,r){let i,o,a,l;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")Y2(t,r);else{let u=s?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=V2(u,a,t[Math.min(i+1,o-(s?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}e.capBezierPoints&&X2(t,n)}function rd(){return typeof window<"u"&&typeof document<"u"}function id(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function da(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const Ma=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function G2(t,e){return Ma(t).getPropertyValue(e)}const J2=["top","right","bottom","left"];function ds(t,e,n){const s={};n=n?"-"+n:"";for(let r=0;r<4;r++){const i=J2[r];s[i]=parseFloat(t[e+"-"+i+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const Z2=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function eb(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:r,offsetY:i}=s;let o=!1,a,l;if(Z2(r,i,t.target))a=r,l=i;else{const u=e.getBoundingClientRect();a=s.clientX-u.left,l=s.clientY-u.top,o=!0}return{x:a,y:l,box:o}}function es(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,r=Ma(n),i=r.boxSizing==="border-box",o=ds(r,"padding"),a=ds(r,"border","width"),{x:l,y:u,box:d}=eb(t,n),f=o.left+(d&&a.left),h=o.top+(d&&a.top);let{width:g,height:p}=e;return i&&(g-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-f)/g*n.width/s),y:Math.round((u-h)/p*n.height/s)}}function tb(t,e,n){let s,r;if(e===void 0||n===void 0){const i=t&&id(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=Ma(i),l=ds(a,"border","width"),u=ds(a,"padding");e=o.width-u.width-l.width,n=o.height-u.height-l.height,s=da(a.maxWidth,i,"clientWidth"),r=da(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:s||ca,maxHeight:r||ca}}const Nn=t=>Math.round(t*10)/10;function nb(t,e,n,s){const r=Ma(t),i=ds(r,"margin"),o=da(r.maxWidth,t,"clientWidth")||ca,a=da(r.maxHeight,t,"clientHeight")||ca,l=tb(t,e,n);let{width:u,height:d}=l;if(r.boxSizing==="content-box"){const h=ds(r,"border","width"),g=ds(r,"padding");u-=g.width+h.width,d-=g.height+h.height}return u=Math.max(0,u-i.width),d=Math.max(0,s?u/s:d-i.height),u=Nn(Math.min(u,o,l.maxWidth)),d=Nn(Math.min(d,a,l.maxHeight)),u&&!d&&(d=Nn(u/2)),(e!==void 0||n!==void 0)&&s&&l.height&&d>l.height&&(d=l.height,u=Nn(Math.floor(d*s))),{width:u,height:d}}function ah(t,e,n){const s=e||1,r=Nn(t.height*s),i=Nn(t.width*s);t.height=Nn(t.height),t.width=Nn(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||o.height!==r||o.width!==i?(t.currentDevicePixelRatio=s,o.height=r,o.width=i,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const sb=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};rd()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function lh(t,e){const n=G2(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function ts(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function rb(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:s==="middle"?n<.5?t.y:e.y:s==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function ib(t,e,n,s){const r={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=ts(t,r,n),a=ts(r,i,n),l=ts(i,e,n),u=ts(o,a,n),d=ts(a,l,n);return ts(u,d,n)}const ob=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},ab=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function $s(t,e,n){return t?ob(e,n):ab()}function C0(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function E0(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function k0(t){return t==="angle"?{between:c0,compare:r2,normalize:wn}:{between:Tr,compare:(e,n)=>e-n,normalize:e=>e}}function uh({start:t,end:e,count:n,loop:s,style:r}){return{start:t%n,end:e%n,loop:s&&(e-t+1)%n===0,style:r}}function lb(t,e,n){const{property:s,start:r,end:i}=n,{between:o,normalize:a}=k0(s),l=e.length;let{start:u,end:d,loop:f}=t,h,g;if(f){for(u+=l,d+=l,h=0,g=l;h<g&&o(a(e[u%l][s]),r,i);++h)u--,d--;u%=l,d%=l}return d<u&&(d+=l),{start:u,end:d,loop:f,style:t.style}}function ub(t,e,n){if(!n)return[t];const{property:s,start:r,end:i}=n,o=e.length,{compare:a,between:l,normalize:u}=k0(s),{start:d,end:f,loop:h,style:g}=lb(t,e,n),p=[];let m=!1,y=null,D,v,x;const w=()=>l(r,x,D)&&a(r,x)!==0,b=()=>a(i,D)===0||l(i,x,D),E=()=>m||w(),k=()=>!m||b();for(let C=d,_=d;C<=f;++C)v=e[C%o],!v.skip&&(D=u(v[s]),D!==x&&(m=l(D,r,i),y===null&&E()&&(y=a(D,r)===0?C:_),y!==null&&k()&&(p.push(uh({start:y,end:C,loop:h,count:o,style:g})),y=null),_=C,x=D));return y!==null&&p.push(uh({start:y,end:f,loop:h,count:o,style:g})),p}function cb(t,e){const n=[],s=t.segments;for(let r=0;r<s.length;r++){const i=ub(s[r],t.points,e);i.length&&n.push(...i)}return n}function db(t,e,n,s){let r=0,i=e-1;if(n&&!s)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(i+=r);i>r&&t[i%e].skip;)i--;return i%=e,{start:r,end:i}}function fb(t,e,n,s){const r=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const u=t[l%r];u.skip||u.stop?a.skip||(s=!1,i.push({start:e%r,end:(l-1)%r,loop:s}),e=o=u.stop?l:null):(o=l,a.skip&&(e=l)),a=u}return o!==null&&i.push({start:e%r,end:o%r,loop:s}),i}function hb(t,e){const n=t.points,s=t.options.spanGaps,r=n.length;if(!r)return[];const i=!!t._loop,{start:o,end:a}=db(n,r,i,s);if(s===!0)return ch(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+r:a,u=!!t._fullLoop&&o===0&&a===r-1;return ch(t,fb(n,o,l,u),n,e)}function ch(t,e,n,s){return!s||!s.setContext||!n?e:pb(t,e,n,s)}function pb(t,e,n,s){const r=t._chart.getContext(),i=dh(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,u=[];let d=i,f=e[0].start,h=f;function g(p,m,y,D){const v=a?-1:1;if(p!==m){for(p+=l;n[p%l].skip;)p-=v;for(;n[m%l].skip;)m+=v;p%l!==m%l&&(u.push({start:p%l,end:m%l,loop:y,style:D}),d=D,f=m%l)}}for(const p of e){f=a?f:p.start;let m=n[f%l],y;for(h=f+1;h<=p.end;h++){const D=n[h%l];y=dh(s.setContext(ws(r,{type:"segment",p0:m,p1:D,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),mb(y,d)&&g(f,h-1,p.loop,d),m=D,d=y}f<h-1&&g(f,h-1,p.loop,d)}return u}function dh(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function mb(t,e){if(!e)return!1;const n=[],s=function(r,i){return Jc(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,s)!==JSON.stringify(e,s)}function ro(t,e,n){return t.options.clip?t[n]:e[n]}function gb(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:ro(n,e,"left"),right:ro(n,e,"right"),top:ro(s,e,"top"),bottom:ro(s,e,"bottom")}:e}function yb(t,e){const n=e._clip;if(n.disabled)return!1;const s=gb(e,t.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Db{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,r){const i=n.listeners[r],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=f0.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,s,e,"progress")),i.length||(s.running=!1,this._notify(r,s,e,"complete"),s.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var rn=new Db;const fh="transparent",xb={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=th(t||fh),r=s.valid&&th(e||fh);return r&&r.valid?r.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class vb{constructor(e,n,s,r){const i=n[s];r=no([e.to,r,i,e.from]);const o=no([e.from,i,r]);this._active=!0,this._fn=e.fn||xb[e.type||typeof o],this._easing=Kr[e.easing]||Kr.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=no([e.to,n,r,e.from]),this._from=no([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,r=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<s),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=i;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][n]()}}class _0{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!fe(e))return;const n=Object.keys(Ae.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!fe(i))return;const o={};for(const a of n)o[a]=i[a];(ze(i.properties)&&i.properties||[r]).forEach(a=>{(a===r||!s.has(a))&&s.set(a,o)})})}_animateOptions(e,n){const s=n.options,r=bb(e,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&wb(e.options.$animations,s).then(()=>{e.options=s},()=>{}),i}_createAnimations(e,n){const s=this._properties,r=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if(u.charAt(0)==="$")continue;if(u==="options"){r.push(...this._animateOptions(e,n));continue}const d=n[u];let f=i[u];const h=s.get(u);if(f)if(h&&f.active()){f.update(h,d,a);continue}else f.cancel();if(!h||!h.duration){e[u]=d;continue}i[u]=f=new vb(h,e,u,d),r.push(f)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return rn.add(this._chart,s),!0}}function wb(t,e){const n=[],s=Object.keys(e);for(let r=0;r<s.length;r++){const i=t[s[r]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function bb(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function hh(t,e){const n=t&&t.options||{},s=n.reverse,r=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:s?i:r,end:s?r:i}}function Cb(t,e,n){if(n===!1)return!1;const s=hh(t,n),r=hh(e,n);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function Eb(t){let e,n,s,r;return fe(t)?(e=t.top,n=t.right,s=t.bottom,r=t.left):e=n=s=r=t,{top:e,right:n,bottom:s,left:r,disabled:t===!1}}function S0(t,e){const n=[],s=t._getSortedDatasetMetas(e);let r,i;for(r=0,i=s.length;r<i;++r)n.push(s[r].index);return n}function ph(t,e,n,s={}){const r=t.keys,i=s.mode==="single";let o,a,l,u;if(e===null)return;let d=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(d=!0,s.all)continue;break}u=t.values[l],Tt(u)&&(i||e===0||er(e)===er(u))&&(e+=u)}return!d&&!s.all?0:e}function kb(t,e){const{iScale:n,vScale:s}=e,r=n.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,u,d;for(l=0,u=o.length;l<u;++l)d=o[l],a[l]={[r]:d,[i]:t[d]};return a}function Cl(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function _b(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function Sb(t){const{min:e,max:n,minDefined:s,maxDefined:r}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function Fb(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function mh(t,e,n,s){for(const r of e.getMatchingVisibleMetas(s).reverse()){const i=t[r.index];if(n&&i>0||!n&&i<0)return r.index}return null}function gh(t,e){const{chart:n,_cachedMeta:s}=t,r=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=s,l=i.axis,u=o.axis,d=_b(i,o,s),f=e.length;let h;for(let g=0;g<f;++g){const p=e[g],{[l]:m,[u]:y}=p,D=p._stacks||(p._stacks={});h=D[u]=Fb(r,d,m),h[a]=y,h._top=mh(h,o,!0,s.type),h._bottom=mh(h,o,!1,s.type);const v=h._visualValues||(h._visualValues={});v[a]=y}}function El(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function Nb(t,e){return ws(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function jb(t,e,n){return ws(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function vr(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const r of e){const i=r._stacks;if(!i||i[s]===void 0||i[s][n]===void 0)return;delete i[s][n],i[s]._visualValues!==void 0&&i[s]._visualValues[n]!==void 0&&delete i[s]._visualValues[n]}}}const kl=t=>t==="reset"||t==="none",yh=(t,e)=>e?t:Object.assign({},t),Ab=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:S0(n,!0),values:null};class Qr{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Cl(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&vr(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),r=(f,h,g,p)=>f==="x"?h:f==="r"?p:g,i=n.xAxisID=ue(s.xAxisID,El(e,"x")),o=n.yAxisID=ue(s.yAxisID,El(e,"y")),a=n.rAxisID=ue(s.rAxisID,El(e,"r")),l=n.indexAxis,u=n.iAxisID=r(l,i,o,a),d=n.vAxisID=r(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Jf(this._data,this),e._stacked&&vr(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(fe(n)){const r=this._cachedMeta;this._data=kb(n,r)}else if(s!==n){if(s){Jf(s,this);const r=this._cachedMeta;vr(r),r._parsed=[]}n&&Object.isExtensible(n)&&l2(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=n._stacked;n._stacked=Cl(n.vScale,n),n.stack!==s.stack&&(r=!0,vr(n),n.stack=s.stack),this._resyncElements(e),(r||i!==n._stacked)&&(gh(this,n._parsed),n._stacked=Cl(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:o}=s,a=i.axis;let l=e===0&&n===r.length?!0:s._sorted,u=e>0&&s._parsed[e-1],d,f,h;if(this._parsing===!1)s._parsed=r,s._sorted=!0,h=r;else{ze(r[e])?h=this.parseArrayData(s,r,e,n):fe(r[e])?h=this.parseObjectData(s,r,e,n):h=this.parsePrimitiveData(s,r,e,n);const g=()=>f[a]===null||u&&f[a]<u[a];for(d=0;d<n;++d)s._parsed[d+e]=f=h[d],l&&(g()&&(l=!1),u=f);s._sorted=l}o&&gh(this,h)}parsePrimitiveData(e,n,s,r){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,u=i.getLabels(),d=i===o,f=new Array(r);let h,g,p;for(h=0,g=r;h<g;++h)p=h+s,f[h]={[a]:d||i.parse(u[p],p),[l]:o.parse(n[p],p)};return f}parseArrayData(e,n,s,r){const{xScale:i,yScale:o}=e,a=new Array(r);let l,u,d,f;for(l=0,u=r;l<u;++l)d=l+s,f=n[d],a[l]={x:i.parse(f[0],d),y:o.parse(f[1],d)};return a}parseObjectData(e,n,s,r){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(r);let d,f,h,g;for(d=0,f=r;d<f;++d)h=d+s,g=n[h],u[d]={x:i.parse(la(g,a),h),y:o.parse(la(g,l),h)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const r=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:S0(r,!0),values:n._stacks[e.axis]._visualValues};return ph(a,o,i.index,{mode:s})}updateRangeFromParsed(e,n,s,r){const i=s[n.axis];let o=i===null?NaN:i;const a=r&&s._stacks[n.axis];r&&a&&(r.values=a,o=ph(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&e===s.iScale,o=r.length,a=this._getOtherScale(e),l=Ab(n,s,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:f}=Sb(a);let h,g;function p(){g=r[h];const m=g[a.axis];return!Tt(g[e.axis])||d>m||f<m}for(h=0;h<o&&!(!p()&&(this.updateRangeFromParsed(u,e,g,l),i));++h);if(i){for(h=o-1;h>=0;--h)if(!p()){this.updateRangeFromParsed(u,e,g,l);break}}return u}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let r,i,o;for(r=0,i=n.length;r<i;++r)o=n[r][e.axis],Tt(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,r=n.vScale,i=this.getParsed(e);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=Eb(ue(this.options.clip,Cb(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,r=s.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,u=this.options.drawActiveElementsOnTop;let d;for(s.dataset&&s.dataset.draw(e,i,a,l),d=a;d<a+l;++d){const f=r[d];f.hidden||(f.active&&u?o.push(f):f.draw(e,i))}for(d=0;d<o.length;++d)o[d].draw(e,i)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=jb(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=Nb(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=s,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const r=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&ua(s);if(a)return yh(a,l);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,e),f=r?[`${e}Hover`,"hover",e,""]:[e,""],h=u.getOptionScopes(this.getDataset(),d),g=Object.keys(Ae.elements[e]),p=()=>this.getContext(s,r,n),m=u.resolveNamedOptions(h,g,p,f);return m.$shared&&(m.$shared=l,i[o]=Object.freeze(yh(m,l))),m}_resolveAnimations(e,n,s){const r=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(r.options.animation!==!1){const d=this.chart.config,f=d.datasetAnimationScopeKeys(this._type,n),h=d.getOptionScopes(this.getDataset(),f);l=d.createResolver(h,this.getContext(e,s,n))}const u=new _0(r,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||kl(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),r=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(n,i)||i!==r;return this.updateSharedOptions(i,n,s),{sharedOptions:i,includeOptions:o}}updateElement(e,n,s,r){kl(r)?Object.assign(e,s):this._resolveAnimations(n,r).update(e,s)}updateSharedOptions(e,n,s){e&&!kl(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,r){e.active=r;const i=this.getStyle(n,r);this._resolveAnimations(n,s,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const r=s.length,i=n.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,n,s=!0){const r=this._cachedMeta,i=r.data,o=e+n;let a;const l=u=>{for(u.length+=n,a=u.length-1;a>=o;a--)u[a]=u[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),s&&this.updateElements(i,e,n,"reset")}updateElements(e,n,s,r){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(e,n);s._stacked&&vr(s,r)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,r]=e;this[n](s,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}re(Qr,"defaults",{}),re(Qr,"datasetElementType",null),re(Qr,"dataElementType",null);class Ao extends Qr{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:s,data:r=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=f2(n,r,o);this._drawStart=a,this._drawCount=l,h2(n)&&(a=0,l=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=r;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:u},e),this.updateElements(r,a,l,e)}updateElements(e,n,s,r){const i=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:f}=this._getSharedOptions(n,r),h=o.axis,g=a.axis,{spanGaps:p,segment:m}=this.options,y=gi(p)?p:Number.POSITIVE_INFINITY,D=this.chart._animationsDisabled||i||r==="none",v=n+s,x=e.length;let w=n>0&&this.getParsed(n-1);for(let b=0;b<x;++b){const E=e[b],k=D?E:{};if(b<n||b>=v){k.skip=!0;continue}const C=this.getParsed(b),_=ve(C[g]),F=k[h]=o.getPixelForValue(C[h],b),T=k[g]=i||_?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,C,l):C[g],b);k.skip=isNaN(F)||isNaN(T)||_,k.stop=b>0&&Math.abs(C[h]-w[h])>y,m&&(k.parsed=C,k.raw=u.data[b]),f&&(k.options=d||this.resolveDataElementOptions(b,E.active?"active":r)),D||this.updateElement(E,b,k,r),w=C}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,s=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return s;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}re(Ao,"id","line"),re(Ao,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),re(Ao,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Gn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class od{constructor(e){re(this,"options");this.options=e||{}}static override(e){Object.assign(od.prototype,e)}init(){}formats(){return Gn()}parse(){return Gn()}format(){return Gn()}add(){return Gn()}diff(){return Gn()}startOf(){return Gn()}endOf(){return Gn()}}var Tb={_date:od};function Bb(t,e,n,s){const{controller:r,data:i,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const u=a._reversePixels?o2:as;if(s){if(r._sharedOptions){const d=i[0],f=typeof d.getRange=="function"&&d.getRange(e);if(f){const h=u(i,e,n-f),g=u(i,e,n+f);return{lo:h.lo,hi:g.hi}}}}else{const d=u(i,e,n);if(l){const{vScale:f}=r._cachedMeta,{_parsed:h}=t,g=h.slice(0,d.lo+1).reverse().findIndex(m=>!ve(m[f.axis]));d.lo-=Math.max(0,g);const p=h.slice(d.hi).findIndex(m=>!ve(m[f.axis]));d.hi+=Math.max(0,p)}return d}}return{lo:0,hi:i.length-1}}function Ra(t,e,n,s,r){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:u,data:d}=i[a],{lo:f,hi:h}=Bb(i[a],e,o,r);for(let g=f;g<=h;++g){const p=d[g];p.skip||s(p,u,g)}}}function Pb(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,r){const i=e?Math.abs(s.x-r.x):0,o=n?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function _l(t,e,n,s,r){const i=[];return!r&&!t.isPointInArea(e)||Ra(t,n,e,function(a,l,u){!r&&!yi(a,t.chartArea,0)||a.inRange(e.x,e.y,s)&&i.push({element:a,datasetIndex:l,index:u})},!0),i}function Lb(t,e,n,s){let r=[];function i(o,a,l){const{startAngle:u,endAngle:d}=o.getProps(["startAngle","endAngle"],s),{angle:f}=s2(o,{x:e.x,y:e.y});c0(f,u,d)&&r.push({element:o,datasetIndex:a,index:l})}return Ra(t,n,e,i),r}function Ob(t,e,n,s,r,i){let o=[];const a=Pb(n);let l=Number.POSITIVE_INFINITY;function u(d,f,h){const g=d.inRange(e.x,e.y,r);if(s&&!g)return;const p=d.getCenterPoint(r);if(!(!!i||t.isPointInArea(p))&&!g)return;const y=a(e,p);y<l?(o=[{element:d,datasetIndex:f,index:h}],l=y):y===l&&o.push({element:d,datasetIndex:f,index:h})}return Ra(t,n,e,u),o}function Sl(t,e,n,s,r,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!s?Lb(t,e,n,r):Ob(t,e,n,s,r,i)}function Dh(t,e,n,s,r){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Ra(t,n,e,(l,u,d)=>{l[o]&&l[o](e[n],r)&&(i.push({element:l,datasetIndex:u,index:d}),a=a||l.inRange(e.x,e.y,r))}),s&&!a?[]:i}var Mb={modes:{index(t,e,n,s){const r=es(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?_l(t,r,i,s,o):Sl(t,r,i,!1,s,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const d=a[0].index,f=u.data[d];f&&!f.skip&&l.push({element:f,datasetIndex:u.index,index:d})}),l):[]},dataset(t,e,n,s){const r=es(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?_l(t,r,i,s,o):Sl(t,r,i,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,u=t.getDatasetMeta(l).data;a=[];for(let d=0;d<u.length;++d)a.push({element:u[d],datasetIndex:l,index:d})}return a},point(t,e,n,s){const r=es(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return _l(t,r,i,s,o)},nearest(t,e,n,s){const r=es(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Sl(t,r,i,n.intersect,s,o)},x(t,e,n,s){const r=es(e,t);return Dh(t,r,"x",n.intersect,s)},y(t,e,n,s){const r=es(e,t);return Dh(t,r,"y",n.intersect,s)}}};const F0=["left","top","right","bottom"];function wr(t,e){return t.filter(n=>n.pos===e)}function xh(t,e){return t.filter(n=>F0.indexOf(n.pos)===-1&&n.box.axis===e)}function br(t,e){return t.sort((n,s)=>{const r=e?s:n,i=e?n:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function Rb(t){const e=[];let n,s,r,i,o,a;for(n=0,s=(t||[]).length;n<s;++n)r=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:a});return e}function Ib(t){const e={};for(const n of t){const{stack:s,pos:r,stackWeight:i}=n;if(!s||!F0.includes(r))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function zb(t,e){const n=Ib(t),{vBoxMaxWidth:s,hBoxMaxHeight:r}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,u=n[a.stack],d=u&&a.stackWeight/u.weight;a.horizontal?(a.width=d?d*s:l&&e.availableWidth,a.height=r):(a.width=s,a.height=d?d*r:l&&e.availableHeight)}return n}function Ub(t){const e=Rb(t),n=br(e.filter(u=>u.box.fullSize),!0),s=br(wr(e,"left"),!0),r=br(wr(e,"right")),i=br(wr(e,"top"),!0),o=br(wr(e,"bottom")),a=xh(e,"x"),l=xh(e,"y");return{fullSize:n,leftAndTop:s.concat(i),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:wr(e,"chartArea"),vertical:s.concat(r).concat(l),horizontal:i.concat(o).concat(a)}}function vh(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function N0(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Hb(t,e,n,s){const{pos:r,box:i}=n,o=t.maxPadding;if(!fe(r)){n.size&&(t[r]-=n.size);const f=s[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?i.height:i.width),n.size=f.size/f.count,t[r]+=n.size}i.getPadding&&N0(o,i.getPadding());const a=Math.max(0,e.outerWidth-vh(o,t,"left","right")),l=Math.max(0,e.outerHeight-vh(o,t,"top","bottom")),u=a!==t.w,d=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:u,other:d}:{same:d,other:u}}function $b(t){const e=t.maxPadding;function n(s){const r=Math.max(e[s]-t[s],0);return t[s]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function Wb(t,e){const n=e.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return s(t?["left","right"]:["top","bottom"])}function Br(t,e,n,s){const r=[];let i,o,a,l,u,d;for(i=0,o=t.length,u=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,Wb(a.horizontal,e));const{same:f,other:h}=Hb(e,n,a,s);u|=f&&r.length,d=d||h,l.fullSize||r.push(a)}return u&&Br(r,e,n,s)||d}function io(t,e,n,s,r){t.top=n,t.left=e,t.right=e+s,t.bottom=n+r,t.width=s,t.height=r}function wh(t,e,n,s){const r=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,u=s[a.stack]||{placed:0,weight:1},d=a.stackWeight/u.weight||1;if(a.horizontal){const f=e.w*d,h=u.size||l.height;ua(u.start)&&(o=u.start),l.fullSize?io(l,r.left,o,n.outerWidth-r.right-r.left,h):io(l,e.left+u.placed,o,f,h),u.start=o,u.placed+=f,o=l.bottom}else{const f=e.h*d,h=u.size||l.width;ua(u.start)&&(i=u.start),l.fullSize?io(l,i,r.top,h,n.outerHeight-r.bottom-r.top):io(l,i,e.top+u.placed,h,f),u.start=i,u.placed+=f,i=l.right}}e.x=i,e.y=o}var Ft={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const r=Bt(t.options.layout.padding),i=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=Ub(t.boxes),l=a.vertical,u=a.horizontal;pe(t.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const d=l.reduce((m,y)=>y.box.options&&y.box.options.display===!1?m:m+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/d,hBoxMaxHeight:o/2}),h=Object.assign({},r);N0(h,Bt(s));const g=Object.assign({maxPadding:h,w:i,h:o,x:r.left,y:r.top},r),p=zb(l.concat(u),f);Br(a.fullSize,g,f,p),Br(l,g,f,p),Br(u,g,f,p)&&Br(l,g,f,p),$b(g),wh(a.leftAndTop,g,f,p),g.x+=g.w,g.y+=g.h,wh(a.rightAndBottom,g,f,p),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},pe(a.chartArea,m=>{const y=m.box;Object.assign(y,t.chartArea),y.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class j0{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,r){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):s)}}isAttached(e){return!0}updateConfig(e){}}class Vb extends j0{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const To="$chartjs",qb={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},bh=t=>t===null||t==="";function Kb(t,e){const n=t.style,s=t.getAttribute("height"),r=t.getAttribute("width");if(t[To]={initial:{height:s,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",bh(r)){const i=lh(t,"width");i!==void 0&&(t.width=i)}if(bh(s))if(t.style.height==="")t.height=t.width/(e||2);else{const i=lh(t,"height");i!==void 0&&(t.height=i)}return t}const A0=sb?{passive:!0}:!1;function Yb(t,e,n){t&&t.addEventListener(e,n,A0)}function Xb(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,A0)}function Qb(t,e){const n=qb[t.type]||t.type,{x:s,y:r}=es(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:r!==void 0?r:null}}function fa(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Gb(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||fa(a.addedNodes,s),o=o&&!fa(a.removedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function Jb(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||fa(a.removedNodes,s),o=o&&!fa(a.addedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const xi=new Map;let Ch=0;function T0(){const t=window.devicePixelRatio;t!==Ch&&(Ch=t,xi.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function Zb(t,e){xi.size||window.addEventListener("resize",T0),xi.set(t,e)}function eC(t){xi.delete(t),xi.size||window.removeEventListener("resize",T0)}function tC(t,e,n){const s=t.canvas,r=s&&id(s);if(!r)return;const i=h0((a,l)=>{const u=r.clientWidth;n(a,l),u<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,d=l.contentRect.height;u===0&&d===0||i(u,d)});return o.observe(r),Zb(t,i),o}function Fl(t,e,n){n&&n.disconnect(),e==="resize"&&eC(t)}function nC(t,e,n){const s=t.canvas,r=h0(i=>{t.ctx!==null&&n(Qb(i,t))},t);return Yb(s,e,r),r}class sC extends j0{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(Kb(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[To])return!1;const s=n[To].initial;["height","width"].forEach(i=>{const o=s[i];ve(o)?n.removeAttribute(i):n.setAttribute(i,o)});const r=s.style||{};return Object.keys(r).forEach(i=>{n.style[i]=r[i]}),n.width=n.width,delete n[To],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:Gb,detach:Jb,resize:tC}[n]||nC;r[n]=o(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),r=s[n];if(!r)return;({attach:Fl,detach:Fl,resize:Fl}[n]||Xb)(e,n,r),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,r){return nb(e,n,s,r)}isAttached(e){const n=e&&id(e);return!!(n&&n.isConnected)}}function rC(t){return!rd()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Vb:sC}class yn{constructor(){re(this,"x");re(this,"y");re(this,"active",!1);re(this,"options");re(this,"$animations")}tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return gi(this.x)&&gi(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const r={};return e.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}}re(yn,"defaults",{}),re(yn,"defaultRoutes");function iC(t,e){const n=t.options.ticks,s=oC(t),r=Math.min(n.maxTicksLimit||s,s),i=n.major.enabled?lC(e):[],o=i.length,a=i[0],l=i[o-1],u=[];if(o>r)return uC(e,u,i,o/r),u;const d=aC(i,e,r);if(o>0){let f,h;const g=o>1?Math.round((l-a)/(o-1)):null;for(oo(e,u,d,ve(g)?0:a-g,a),f=0,h=o-1;f<h;f++)oo(e,u,d,i[f],i[f+1]);return oo(e,u,d,l,ve(g)?e.length:l+g),u}return oo(e,u,d),u}function oC(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(s,r))}function aC(t,e,n){const s=cC(t),r=e.length/n;if(!s)return Math.max(r,1);const i=J1(s);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>r)return l}return Math.max(r,1)}function lC(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function uC(t,e,n,s){let r=0,i=n[0],o;for(s=Math.ceil(s),o=0;o<t.length;o++)o===i&&(e.push(t[o]),r++,i=n[r*s])}function oo(t,e,n,s,r){const i=ue(s,0),o=Math.min(ue(r,t.length),t.length);let a=0,l,u,d;for(n=Math.ceil(n),r&&(l=r-s,n=l/Math.floor(l/n)),d=i;d<0;)a++,d=Math.round(i+a*n);for(u=Math.max(i,0);u<o;u++)u===d&&(e.push(t[u]),a++,d=Math.round(i+a*n))}function cC(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const dC=t=>t==="left"?"right":t==="right"?"left":t,Eh=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,kh=(t,e)=>Math.min(e||t,t);function _h(t,e){const n=[],s=t.length/e,r=t.length;let i=0;for(;i<r;i+=s)n.push(t[Math.floor(i)]);return n}function fC(t,e,n){const s=t.ticks.length,r=Math.min(e,s-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),u;if(!(n&&(s===1?u=Math.max(l-i,o-l):e===0?u=(t.getPixelForTick(1)-l)/2:u=(l-t.getPixelForTick(r-1))/2,l+=r<e?u:-u,l<i-a||l>o+a)))return l}function hC(t,e){pe(t,n=>{const s=n.gc,r=s.length/2;let i;if(r>e){for(i=0;i<r;++i)delete n.data[s[i]];s.splice(0,r)}})}function Cr(t){return t.drawTicks?t.tickLength:0}function Sh(t,e){if(!t.display)return 0;const n=Ge(t.font,e),s=Bt(t.padding);return(ze(t.text)?t.text.length:1)*n.lineHeight+s.height}function pC(t,e){return ws(t,{scale:e,type:"scale"})}function mC(t,e,n){return ws(t,{tick:n,index:e,type:"tick"})}function gC(t,e,n){let s=Gc(t);return(n&&e!=="right"||!n&&e==="right")&&(s=dC(s)),s}function yC(t,e,n,s){const{top:r,left:i,bottom:o,right:a,chart:l}=t,{chartArea:u,scales:d}=l;let f=0,h,g,p;const m=o-r,y=a-i;if(t.isHorizontal()){if(g=Ye(s,i,a),fe(n)){const D=Object.keys(n)[0],v=n[D];p=d[D].getPixelForValue(v)+m-e}else n==="center"?p=(u.bottom+u.top)/2+m-e:p=Eh(t,n,e);h=a-i}else{if(fe(n)){const D=Object.keys(n)[0],v=n[D];g=d[D].getPixelForValue(v)-y+e}else n==="center"?g=(u.left+u.right)/2-y+e:g=Eh(t,n,e);p=Ye(s,o,r),f=n==="left"?-It:It}return{titleX:g,titleY:p,maxWidth:h,rotation:f}}class ur extends yn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:r}=this;return e=qt(e,Number.POSITIVE_INFINITY),n=qt(n,Number.NEGATIVE_INFINITY),s=qt(s,Number.POSITIVE_INFINITY),r=qt(r,Number.NEGATIVE_INFINITY),{min:qt(e,s),max:qt(n,r),minDefined:Tt(e),maxDefined:Tt(n)}}getMinMax(e){let{min:n,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),i||(s=Math.max(s,o.max));return n=i&&n>s?s:n,s=r&&n>s?n:s,{min:qt(n,qt(s,n)),max:qt(s,qt(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){be(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:r,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=P2(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?_h(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=iC(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){be(this.options.afterUpdate,[this])}beforeSetDimensions(){be(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){be(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),be(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){be(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s],i.label=be(n.callback,[i.value,s,e],this)}afterTickToLabelConversion(){be(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){be(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=kh(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,i=n.maxRotation;let o=r,a,l,u;if(!this._isVisible()||!n.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const d=this._getLabelSizes(),f=d.widest.width,h=d.highest.height,g=St(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/s:g/(s-1),f+6>a&&(a=g/(s-(e.offset?.5:1)),l=this.maxHeight-Cr(e.grid)-n.padding-Sh(e.title,this.chart.options.font),u=Math.sqrt(f*f+h*h),o=n2(Math.min(Math.asin(St((d.highest.height+6)/a,-1,1)),Math.asin(St(l/u,-1,1))-Math.asin(St(h/u,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){be(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){be(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:r,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Sh(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=Cr(i)+l):(e.height=this.maxHeight,e.width=Cr(i)+l),s.display&&this.ticks.length){const{first:u,last:d,widest:f,highest:h}=this._getLabelSizes(),g=s.padding*2,p=os(this.labelRotation),m=Math.cos(p),y=Math.sin(p);if(a){const D=s.mirror?0:y*f.width+m*h.height;e.height=Math.min(this.maxHeight,e.height+D+g)}else{const D=s.mirror?0:m*f.width+y*h.height;e.width=Math.min(this.maxWidth,e.width+D+g)}this._calculatePadding(u,d,y,m)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,r){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,g=0;l?u?(h=r*e.width,g=s*n.height):(h=s*e.height,g=r*n.width):i==="start"?g=n.width:i==="end"?h=e.width:i!=="inner"&&(h=e.width/2,g=n.width/2),this.paddingLeft=Math.max((h-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((g-f+o)*this.width/(this.width-f),0)}else{let d=n.height/2,f=e.height/2;i==="start"?(d=0,f=e.height):i==="end"&&(d=n.height,f=0),this.paddingTop=d+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){be(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)ve(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=_h(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:r,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/kh(n,s));let u=0,d=0,f,h,g,p,m,y,D,v,x,w,b;for(f=0;f<n;f+=l){if(p=e[f].label,m=this._resolveTickFontOptions(f),r.font=y=m.string,D=i[y]=i[y]||{data:{},gc:[]},v=m.lineHeight,x=w=0,!ve(p)&&!ze(p))x=sh(r,D.data,D.gc,x,p),w=v;else if(ze(p))for(h=0,g=p.length;h<g;++h)b=p[h],!ve(b)&&!ze(b)&&(x=sh(r,D.data,D.gc,x,b),w+=v);o.push(x),a.push(w),u=Math.max(x,u),d=Math.max(w,d)}hC(i,n);const E=o.indexOf(u),k=a.indexOf(d),C=_=>({width:o[_]||0,height:a[_]||0});return{first:C(0),last:C(n-1),widest:C(E),highest:C(k),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return i2(this._alignToPixels?Qn(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=mC(this.getContext(),e,s))}return this.$context||(this.$context=pC(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=os(this.labelRotation),s=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*s>a*r?a/s:l/r:l*r<a*s?l/s:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,r=this.options,{grid:i,position:o,border:a}=r,l=i.offset,u=this.isHorizontal(),f=this.ticks.length+(l?1:0),h=Cr(i),g=[],p=a.setContext(this.getContext()),m=p.display?p.width:0,y=m/2,D=function(ee){return Qn(s,ee,m)};let v,x,w,b,E,k,C,_,F,T,I,V;if(o==="top")v=D(this.bottom),k=this.bottom-h,_=v-y,T=D(e.top)+y,V=e.bottom;else if(o==="bottom")v=D(this.top),T=e.top,V=D(e.bottom)-y,k=v+y,_=this.top+h;else if(o==="left")v=D(this.right),E=this.right-h,C=v-y,F=D(e.left)+y,I=e.right;else if(o==="right")v=D(this.left),F=e.left,I=D(e.right)-y,E=v+y,C=this.left+h;else if(n==="x"){if(o==="center")v=D((e.top+e.bottom)/2+.5);else if(fe(o)){const ee=Object.keys(o)[0],he=o[ee];v=D(this.chart.scales[ee].getPixelForValue(he))}T=e.top,V=e.bottom,k=v+y,_=k+h}else if(n==="y"){if(o==="center")v=D((e.left+e.right)/2);else if(fe(o)){const ee=Object.keys(o)[0],he=o[ee];v=D(this.chart.scales[ee].getPixelForValue(he))}E=v-y,C=E-h,F=e.left,I=e.right}const ne=ue(r.ticks.maxTicksLimit,f),J=Math.max(1,Math.ceil(f/ne));for(x=0;x<f;x+=J){const ee=this.getContext(x),he=i.setContext(ee),P=a.setContext(ee),M=he.lineWidth,U=he.color,X=P.dash||[],K=P.dashOffset,se=he.tickWidth,de=he.tickColor,H=he.tickBorderDash||[],A=he.tickBorderDashOffset;w=fC(this,x,l),w!==void 0&&(b=Qn(s,w,M),u?E=C=F=I=b:k=_=T=V=b,g.push({tx1:E,ty1:k,tx2:C,ty2:_,x1:F,y1:T,x2:I,y2:V,width:M,color:U,borderDash:X,borderDashOffset:K,tickWidth:se,tickColor:de,tickBorderDash:H,tickBorderDashOffset:A}))}return this._ticksLength=f,this._borderValue=v,g}_computeLabelItems(e){const n=this.axis,s=this.options,{position:r,ticks:i}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:d,mirror:f}=i,h=Cr(s.grid),g=h+d,p=f?-d:g,m=-os(this.labelRotation),y=[];let D,v,x,w,b,E,k,C,_,F,T,I,V="middle";if(r==="top")E=this.bottom-p,k=this._getXAxisLabelAlignment();else if(r==="bottom")E=this.top+p,k=this._getXAxisLabelAlignment();else if(r==="left"){const J=this._getYAxisLabelAlignment(h);k=J.textAlign,b=J.x}else if(r==="right"){const J=this._getYAxisLabelAlignment(h);k=J.textAlign,b=J.x}else if(n==="x"){if(r==="center")E=(e.top+e.bottom)/2+g;else if(fe(r)){const J=Object.keys(r)[0],ee=r[J];E=this.chart.scales[J].getPixelForValue(ee)+g}k=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")b=(e.left+e.right)/2-g;else if(fe(r)){const J=Object.keys(r)[0],ee=r[J];b=this.chart.scales[J].getPixelForValue(ee)}k=this._getYAxisLabelAlignment(h).textAlign}n==="y"&&(l==="start"?V="top":l==="end"&&(V="bottom"));const ne=this._getLabelSizes();for(D=0,v=a.length;D<v;++D){x=a[D],w=x.label;const J=i.setContext(this.getContext(D));C=this.getPixelForTick(D)+i.labelOffset,_=this._resolveTickFontOptions(D),F=_.lineHeight,T=ze(w)?w.length:1;const ee=T/2,he=J.color,P=J.textStrokeColor,M=J.textStrokeWidth;let U=k;o?(b=C,k==="inner"&&(D===v-1?U=this.options.reverse?"left":"right":D===0?U=this.options.reverse?"right":"left":U="center"),r==="top"?u==="near"||m!==0?I=-T*F+F/2:u==="center"?I=-ne.highest.height/2-ee*F+F:I=-ne.highest.height+F/2:u==="near"||m!==0?I=F/2:u==="center"?I=ne.highest.height/2-ee*F:I=ne.highest.height-T*F,f&&(I*=-1),m!==0&&!J.showLabelBackdrop&&(b+=F/2*Math.sin(m))):(E=C,I=(1-T)*F/2);let X;if(J.showLabelBackdrop){const K=Bt(J.backdropPadding),se=ne.heights[D],de=ne.widths[D];let H=I-K.top,A=0-K.left;switch(V){case"middle":H-=se/2;break;case"bottom":H-=se;break}switch(k){case"center":A-=de/2;break;case"right":A-=de;break;case"inner":D===v-1?A-=de:D>0&&(A-=de/2);break}X={left:A,top:H,width:de+K.width,height:se+K.height,color:J.backdropColor}}y.push({label:w,font:_,textOffset:I,options:{rotation:m,color:he,strokeColor:P,strokeWidth:M,textAlign:U,textBaseline:V,translation:[b,E],backdrop:X}})}return y}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-os(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let u,d;return n==="left"?r?(d=this.right+i,s==="near"?u="left":s==="center"?(u="center",d+=l/2):(u="right",d+=l)):(d=this.right-a,s==="near"?u="right":s==="center"?(u="center",d-=l/2):(u="left",d=this.left)):n==="right"?r?(d=this.left+i,s==="near"?u="right":s==="center"?(u="center",d-=l/2):(u="left",d-=l)):(d=this.left+a,s==="near"?u="left":s==="center"?(u="center",d+=l/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:r,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,r,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(i=>i.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,u,d)=>{!d.width||!d.color||(s.save(),s.lineWidth=d.width,s.strokeStyle=d.color,s.setLineDash(d.borderDash||[]),s.lineDashOffset=d.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(u.x,u.y),s.stroke(),s.restore())};if(n.display)for(i=0,o=r.length;i<o;++i){const l=r[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,d,f,h;this.isHorizontal()?(u=Qn(e,this.left,o)-o/2,d=Qn(e,this.right,a)+a/2,f=h=l):(f=Qn(e,this.top,o)-o/2,h=Qn(e,this.bottom,a)+a/2,u=d=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(u,f),n.lineTo(d,h),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&Zc(s,r);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,u=o.label,d=o.textOffset;Di(s,u,0,d,l,a)}r&&ed(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:r}}=this;if(!s.display)return;const i=Ge(s.font),o=Bt(s.padding),a=s.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||fe(n)?(l+=o.bottom,ze(s.text)&&(l+=i.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:u,titleY:d,maxWidth:f,rotation:h}=yC(this,l,n,a);Di(e,s.text,0,0,i,{color:s.color,maxWidth:f,rotation:h,textAlign:gC(a,n,r),textBaseline:"middle",translation:[u,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=ue(e.grid&&e.grid.z,-1),r=ue(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==ur.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[s]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Ge(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class ao{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;vC(n)&&(s=this.register(n));const r=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,DC(e,o,s),this.override&&Ae.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,r=this.scope;s in n&&delete n[s],r&&s in Ae[r]&&(delete Ae[r][s],this.override&&delete Ds[s])}}function DC(t,e,n){const s=mi(Object.create(null),[n?Ae.get(n):{},Ae.get(e),t.defaults]);Ae.set(e,s),t.defaultRoutes&&xC(e,t.defaultRoutes),t.descriptors&&Ae.describe(e,t.descriptors)}function xC(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),r=s.pop(),i=[t].concat(s).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Ae.route(i,r,l,a)})}function vC(t){return"id"in t&&"defaults"in t}class wC{constructor(){this.controllers=new ao(Qr,"datasets",!0),this.elements=new ao(yn,"elements"),this.plugins=new ao(Object,"plugins"),this.scales=new ao(ur,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(e,i,r):pe(r,o=>{const a=s||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,s){const r=Xc(e);be(s["before"+r],[],s),n[e](s),be(s["after"+r],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return r}}var Xt=new wC;class bC{constructor(){this._init=void 0}notify(e,n,s,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const i=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(i,e,n,s);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,s,r){r=r||{};for(const i of e){const o=i.plugin,a=o[s],l=[n,r,i.options];if(be(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){ve(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,r=ue(s.options&&s.options.plugins,{}),i=CC(s);return r===!1&&!n?[]:kC(e,i,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,r=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,s),e,"stop"),this._notify(r(s,n),e,"start")}}function CC(t){const e={},n=[],s=Object.keys(Xt.plugins.items);for(let i=0;i<s.length;i++)n.push(Xt.getPlugin(s[i]));const r=t.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function EC(t,e){return!e&&t===!1?null:t===!0?{}:t}function kC(t,{plugins:e,localIds:n},s,r){const i=[],o=t.getContext();for(const a of e){const l=a.id,u=EC(s[l],r);u!==null&&i.push({plugin:a,options:_C(t.config,{plugin:a,local:n[l]},u,o)})}return i}function _C(t,{plugin:e,local:n},s,r){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(s,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ru(t,e){const n=Ae.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function SC(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function FC(t,e){return t===e?"_index_":"_value_"}function Fh(t){if(t==="x"||t==="y"||t==="r")return t}function NC(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Iu(t,...e){if(Fh(t))return t;for(const n of e){const s=n.axis||NC(n.position)||t.length>1&&Fh(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Nh(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function jC(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return Nh(t,"x",n[0])||Nh(t,"y",n[0])}return{}}function AC(t,e){const n=Ds[t.type]||{scales:{}},s=e.scales||{},r=Ru(t.type,e),i=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!fe(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Iu(o,a,jC(o,t),Ae.scales[a.type]),u=FC(l,r),d=n.scales||{};i[o]=Vr(Object.create(null),[{axis:l},a,d[l],d[u]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Ru(a,e),d=(Ds[a]||{}).scales||{};Object.keys(d).forEach(f=>{const h=SC(f,l),g=o[h+"AxisID"]||h;i[g]=i[g]||Object.create(null),Vr(i[g],[{axis:h},s[g],d[f]])})}),Object.keys(i).forEach(o=>{const a=i[o];Vr(a,[Ae.scales[a.type],Ae.scale])}),i}function B0(t){const e=t.options||(t.options={});e.plugins=ue(e.plugins,{}),e.scales=AC(t,e)}function P0(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function TC(t){return t=t||{},t.data=P0(t.data),B0(t),t}const jh=new Map,L0=new Set;function lo(t,e){let n=jh.get(t);return n||(n=e(),jh.set(t,n),L0.add(n)),n}const Er=(t,e,n)=>{const s=la(e,n);s!==void 0&&t.add(s)};class BC{constructor(e){this._config=TC(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=P0(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),B0(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return lo(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return lo(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return lo(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return lo(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let r=s.get(e);return(!r||n)&&(r=new Map,s.set(e,r)),r}getOptionScopes(e,n,s){const{options:r,type:i}=this,o=this._cachedScopes(e,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(d=>{e&&(l.add(e),d.forEach(f=>Er(l,e,f))),d.forEach(f=>Er(l,r,f)),d.forEach(f=>Er(l,Ds[i]||{},f)),d.forEach(f=>Er(l,Ae,f)),d.forEach(f=>Er(l,Lu,f))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),L0.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:e,type:n}=this;return[e,Ds[n]||{},Ae.datasets[n]||{},{type:n},Ae,Lu]}resolveNamedOptions(e,n,s,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=Ah(this._resolverCache,e,r);let l=o;if(LC(o,n)){i.$shared=!1,s=Wn(s)?s():s;const u=this.createResolver(e,s,a);l=tr(o,s,u)}for(const u of n)i[u]=l[u];return i}createResolver(e,n,s=[""],r){const{resolver:i}=Ah(this._resolverCache,e,s);return fe(n)?tr(i,n,void 0,r):i}}function Ah(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const r=n.join();let i=s.get(r);return i||(i={resolver:td(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(r,i)),i}const PC=t=>fe(t)&&Object.getOwnPropertyNames(t).some(e=>Wn(t[e]));function LC(t,e){const{isScriptable:n,isIndexable:s}=D0(t);for(const r of e){const i=n(r),o=s(r),a=(o||i)&&t[r];if(i&&(Wn(a)||PC(a))||o&&ze(a))return!0}return!1}var OC="4.5.1";const MC=["top","bottom","left","right","chartArea"];function Th(t,e){return t==="top"||t==="bottom"||MC.indexOf(t)===-1&&e==="x"}function Bh(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function Ph(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),be(n&&n.onComplete,[t],e)}function RC(t){const e=t.chart,n=e.options.animation;be(n&&n.onProgress,[t],e)}function O0(t){return rd()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Bo={},Lh=t=>{const e=O0(t);return Object.values(Bo).filter(n=>n.canvas===e).pop()};function IC(t,e,n){const s=Object.keys(t);for(const r of s){const i=+r;if(i>=e){const o=t[r];delete t[r],(n>0||i>e)&&(t[i+n]=o)}}}function zC(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}var vn;let Ia=(vn=class{static register(...e){Xt.add(...e),Oh()}static unregister(...e){Xt.remove(...e),Oh()}constructor(e,n){const s=this.config=new BC(n),r=O0(e),i=Lh(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||rC(r)),this.platform.updateConfig(s);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,d=l&&l.width;if(this.id=$1(),this.ctx=a,this.canvas=l,this.width=d,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new bC,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=c2(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],Bo[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}rn.listen(this,"complete",Ph),rn.listen(this,"progress",RC),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:r,_aspectRatio:i}=this;return ve(e)?n&&i?i:r?s/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Xt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ah(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return rh(this.canvas,this.ctx),this}stop(){return rn.stop(this),this}resize(e,n){rn.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,i),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,ah(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),be(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};pe(n,(s,r)=>{s.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,r=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=Iu(o,a),u=l==="r",d=l==="x";return{options:a,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),pe(i,o=>{const a=o.options,l=a.id,u=Iu(l,a),d=ue(a.type,o.dtype);(a.position===void 0||Th(a.position,u)!==Th(o.dposition))&&(a.position=o.dposition),r[l]=!0;let f=null;if(l in s&&s[l].type===d)f=s[l];else{const h=Xt.getScale(d);f=new h({id:l,type:d,ctx:this.ctx,chart:this}),s[f.id]=f}f.init(a,e)}),pe(r,(o,a)=>{o||delete s[a]}),pe(s,o=>{Ft.configure(this,o,o.options),Ft.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((r,i)=>r.index-i.index),s>n){for(let r=n;r<s;++r)this._destroyDatasetMeta(r);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(Bh("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,r)=>{n.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=n.length;s<r;s++){const i=n[s];let o=this.getDatasetMeta(s);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=i.indexAxis||Ru(a,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=Xt.getController(a),{datasetElementType:u,dataElementType:d}=Ae.datasets[a];Object.assign(l,{dataElementType:Xt.getElement(d),datasetElementType:u&&Xt.getElement(u)}),o.controller=new l(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){pe(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:f}=this.getDatasetMeta(u),h=!r&&i.indexOf(f)===-1;f.buildOrUpdateElements(h),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),r||pe(i,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Bh("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){pe(this.scales,e=>{Ft.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!Yf(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of n){const o=s==="_removeElements"?-i:i;IC(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),r=s(0);for(let i=1;i<n;i++)if(!Yf(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ft.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],pe(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,Wn(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),r={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(rn.has(this)?this.attached&&!rn.running(this)&&rn.start(this):(this.draw(),Ph({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let r,i;for(r=0,i=n.length;r<i;++r){const o=n[r];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s={meta:e,index:e.index,cancelable:!0},r=yb(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&Zc(n,r),e.controller.draw(),r&&ed(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return yi(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,r){const i=Mb.modes[n];return typeof i=="function"?i(this,e,s,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let r=s.filter(i=>i&&i._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=ws(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const r=s?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,r);ua(n)?(i.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(i,{visible:s}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),rn.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),rh(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Bo[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},r=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};pe(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(l,u)=>{n.addEventListener(this,l,u),e[l]=u},r=(l,u)=>{e[l]&&(n.removeEventListener(this,l,u),delete e[l])},i=(l,u)=>{this.canvas&&this.resize(l,u)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){pe(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},pe(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const r=s?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!oa(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const r=this.options.hover,i=(l,u)=>l.filter(d=>!u.some(f=>d.datasetIndex===f.datasetIndex&&d.index===f.index)),o=i(n,e),a=s?e:i(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:r=[],options:i}=this,o=n,a=this._getActiveElements(e,r,s,o),l=X1(e),u=zC(e,this._lastEvent,s,l);s&&(this._lastEvent=null,be(i.onHover,[e,a,this],this),l&&be(i.onClick,[e,a,this],this));const d=!oa(a,r);return(d||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=u,d}_getActiveElements(e,n,s,r){if(e.type==="mouseout")return[];if(!s)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}},re(vn,"defaults",Ae),re(vn,"instances",Bo),re(vn,"overrides",Ds),re(vn,"registry",Xt),re(vn,"version",OC),re(vn,"getChart",Lh),vn);function Oh(){return pe(Ia.instances,t=>t._plugins.invalidate())}function M0(t,e,n=e){t.lineCap=ue(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ue(n.borderDash,e.borderDash)),t.lineDashOffset=ue(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ue(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ue(n.borderWidth,e.borderWidth),t.strokeStyle=ue(n.borderColor,e.borderColor)}function UC(t,e,n){t.lineTo(n.x,n.y)}function HC(t){return t.stepped?E2:t.tension||t.cubicInterpolationMode==="monotone"?k2:UC}function R0(t,e,n={}){const s=t.length,{start:r=0,end:i=s-1}=n,{start:o,end:a}=e,l=Math.max(r,o),u=Math.min(i,a),d=r<o&&i<o||r>a&&i>a;return{count:s,start:l,loop:e.loop,ilen:u<l&&!d?s+u-l:u-l}}function $C(t,e,n,s){const{points:r,options:i}=e,{count:o,start:a,loop:l,ilen:u}=R0(r,n,s),d=HC(i);let{move:f=!0,reverse:h}=s||{},g,p,m;for(g=0;g<=u;++g)p=r[(a+(h?u-g:g))%o],!p.skip&&(f?(t.moveTo(p.x,p.y),f=!1):d(t,m,p,h,i.stepped),m=p);return l&&(p=r[(a+(h?u:0))%o],d(t,m,p,h,i.stepped)),!!l}function WC(t,e,n,s){const r=e.points,{count:i,start:o,ilen:a}=R0(r,n,s),{move:l=!0,reverse:u}=s||{};let d=0,f=0,h,g,p,m,y,D;const v=w=>(o+(u?a-w:w))%i,x=()=>{m!==y&&(t.lineTo(d,y),t.lineTo(d,m),t.lineTo(d,D))};for(l&&(g=r[v(0)],t.moveTo(g.x,g.y)),h=0;h<=a;++h){if(g=r[v(h)],g.skip)continue;const w=g.x,b=g.y,E=w|0;E===p?(b<m?m=b:b>y&&(y=b),d=(f*d+w)/++f):(x(),t.lineTo(w,b),p=E,f=0,m=y=b),D=b}x()}function zu(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?WC:$C}function VC(t){return t.stepped?rb:t.tension||t.cubicInterpolationMode==="monotone"?ib:ts}function qC(t,e,n,s){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,s)&&r.closePath()),M0(t,e.options),t.stroke(r)}function KC(t,e,n,s){const{segments:r,options:i}=e,o=zu(e);for(const a of r)M0(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+s-1})&&t.closePath(),t.stroke()}const YC=typeof Path2D=="function";function XC(t,e,n,s){YC&&!e.options.segment?qC(t,e,n,s):KC(t,e,n,s)}class Pr extends yn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;Q2(this._points,s,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=hb(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,s=e.length;return s&&n[e[s-1].end]}interpolate(e,n){const s=this.options,r=e[n],i=this.points,o=cb(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=VC(s);let u,d;for(u=0,d=o.length;u<d;++u){const{start:f,end:h}=o[u],g=i[f],p=i[h];if(g===p){a.push(g);continue}const m=Math.abs((r-g[n])/(p[n]-g[n])),y=l(g,p,m,s.stepped);y[n]=e[n],a.push(y)}return a.length===1?a[0]:a}pathSegment(e,n,s){return zu(this)(e,this,n,s)}path(e,n,s){const r=this.segments,i=zu(this);let o=this._loop;n=n||0,s=s||this.points.length-n;for(const a of r)o&=i(e,this,a,{start:n,end:n+s-1});return!!o}draw(e,n,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),XC(e,this,s,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}re(Pr,"id","line"),re(Pr,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),re(Pr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),re(Pr,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Mh(t,e,n,s){const r=t.options,{[n]:i}=t.getProps([n],s);return Math.abs(e-i)<r.radius+r.hitRadius}class Po extends yn{constructor(n){super();re(this,"parsed");re(this,"skip");re(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,r){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(s-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,s){return Mh(this,n,"x",s)}inYRange(n,s){return Mh(this,n,"y",s)}getCenterPoint(n){const{x:s,y:r}=this.getProps(["x","y"],n);return{x:s,y:r}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const r=s&&n.borderWidth||0;return(s+r)*2}draw(n,s){const r=this.options;this.skip||r.radius<.1||!yi(this,s,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,Ou(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}re(Po,"id","point"),re(Po,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),re(Po,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Rh=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},QC=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Ih extends yn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=be(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,r)=>e.sort(s,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,r=Ge(s.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Rh(s,i);let u,d;n.font=r.string,this.isHorizontal()?(u=this.maxWidth,d=this._fitRows(o,i,a,l)+10):(d=this.maxHeight,u=this._fitCols(o,r,a,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,r){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],d=r+a;let f=e;i.textAlign="left",i.textBaseline="middle";let h=-1,g=-d;return this.legendItems.forEach((p,m)=>{const y=s+n/2+i.measureText(p.text).width;(m===0||u[u.length-1]+y+2*a>o)&&(f+=d,u[u.length-(m>0?0:1)]=0,g+=d,h++),l[m]={left:0,top:g,row:h,width:y,height:r},u[u.length-1]+=y+a}),f}_fitCols(e,n,s,r){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],d=o-e;let f=a,h=0,g=0,p=0,m=0;return this.legendItems.forEach((y,D)=>{const{itemWidth:v,itemHeight:x}=GC(s,n,i,y,r);D>0&&g+x+2*a>d&&(f+=h+a,u.push({width:h,height:g}),p+=h+a,m++,h=g=0),l[D]={left:p,top:g,col:m,width:v,height:x},h=Math.max(h,v),g+=x+a}),f+=h,u.push({width:h,height:g}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:r},rtl:i}}=this,o=$s(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ye(s,this.left+r,this.right-this.lineWidths[a]);for(const u of n)a!==u.row&&(a=u.row,l=Ye(s,this.left+r,this.right-this.lineWidths[a])),u.top+=this.top+e+r,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+r}else{let a=0,l=Ye(s,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const u of n)u.col!==a&&(a=u.col,l=Ye(s,this.top+e+r,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+r,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Zc(e,this),this._draw(),ed(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:r}=this,{align:i,labels:o}=e,a=Ae.color,l=$s(e.rtl,this.left,this.width),u=Ge(o.font),{padding:d}=o,f=u.size,h=f/2;let g;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=u.string;const{boxWidth:p,boxHeight:m,itemHeight:y}=Rh(o,f),D=function(E,k,C){if(isNaN(p)||p<=0||isNaN(m)||m<0)return;r.save();const _=ue(C.lineWidth,1);if(r.fillStyle=ue(C.fillStyle,a),r.lineCap=ue(C.lineCap,"butt"),r.lineDashOffset=ue(C.lineDashOffset,0),r.lineJoin=ue(C.lineJoin,"miter"),r.lineWidth=_,r.strokeStyle=ue(C.strokeStyle,a),r.setLineDash(ue(C.lineDash,[])),o.usePointStyle){const F={radius:m*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:_},T=l.xPlus(E,p/2),I=k+h;g0(r,F,T,I,o.pointStyleWidth&&p)}else{const F=k+Math.max((f-m)/2,0),T=l.leftForLtr(E,p),I=Xr(C.borderRadius);r.beginPath(),Object.values(I).some(V=>V!==0)?Mu(r,{x:T,y:F,w:p,h:m,radius:I}):r.rect(T,F,p,m),r.fill(),_!==0&&r.stroke()}r.restore()},v=function(E,k,C){Di(r,C.text,E,k+y/2,u,{strikethrough:C.hidden,textAlign:l.textAlign(C.textAlign)})},x=this.isHorizontal(),w=this._computeTitleHeight();x?g={x:Ye(i,this.left+d,this.right-s[0]),y:this.top+d+w,line:0}:g={x:this.left+d,y:Ye(i,this.top+w+d,this.bottom-n[0].height),line:0},C0(this.ctx,e.textDirection);const b=y+d;this.legendItems.forEach((E,k)=>{r.strokeStyle=E.fontColor,r.fillStyle=E.fontColor;const C=r.measureText(E.text).width,_=l.textAlign(E.textAlign||(E.textAlign=o.textAlign)),F=p+h+C;let T=g.x,I=g.y;l.setWidth(this.width),x?k>0&&T+F+d>this.right&&(I=g.y+=b,g.line++,T=g.x=Ye(i,this.left+d,this.right-s[g.line])):k>0&&I+b>this.bottom&&(T=g.x=T+n[g.line].width+d,g.line++,I=g.y=Ye(i,this.top+w+d,this.bottom-n[g.line].height));const V=l.x(T);if(D(V,I,E),T=d2(_,T+p+h,x?T+F:this.right,e.rtl),v(l.x(T),I,E),x)g.x+=F+d;else if(typeof E.text!="string"){const ne=u.lineHeight;g.y+=I0(E,ne)+d}else g.y+=b}),E0(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=Ge(n.font),r=Bt(n.padding);if(!n.display)return;const i=$s(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,u=r.top+l;let d,f=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),d=this.top+u,f=Ye(e.align,f,this.right-h);else{const p=this.columnSizes.reduce((m,y)=>Math.max(m,y.height),0);d=u+Ye(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const g=Ye(a,f,f+h);o.textAlign=i.textAlign(Gc(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,Di(o,n.text,g,d,s)}_computeTitleHeight(){const e=this.options.title,n=Ge(e.font),s=Bt(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,r,i;if(Tr(e,this.left,this.right)&&Tr(n,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],Tr(e,r.left,r.left+r.width)&&Tr(n,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!eE(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,i=QC(r,s);r&&!i&&be(n.onLeave,[e,r,this],this),this._hoveredItem=s,s&&!i&&be(n.onHover,[e,s,this],this)}else s&&be(n.onClick,[e,s,this],this)}}function GC(t,e,n,s,r){const i=JC(s,t,e,n),o=ZC(r,s,e.lineHeight);return{itemWidth:i,itemHeight:o}}function JC(t,e,n,s){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+s.measureText(r).width}function ZC(t,e,n){let s=t;return typeof e.text!="string"&&(s=I0(e,n)),s}function I0(t,e){const n=t.text?t.text.length:0;return e*n}function eE(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var tE={id:"legend",_element:Ih,start(t,e,n){const s=t.legend=new Ih({ctx:t.ctx,options:n,chart:t});Ft.configure(t,s,n),Ft.addBox(t,s)},stop(t){Ft.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;Ft.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,r=n.chart;r.isDatasetVisible(s)?(r.hide(s),e.hidden=!0):(r.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(n?0:void 0),d=Bt(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:u.borderColor,pointStyle:s||u.pointStyle,rotation:u.rotation,textAlign:r||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class z0 extends yn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=ze(s.text)?s.text.length:1;this._padding=Bt(s.padding);const i=r*Ge(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:r,right:i,options:o}=this,a=o.align;let l=0,u,d,f;return this.isHorizontal()?(d=Ye(a,s,i),f=n+e,u=i-s):(o.position==="left"?(d=s+e,f=Ye(a,r,n),l=He*-.5):(d=i-e,f=Ye(a,n,r),l=He*.5),u=r-n),{titleX:d,titleY:f,maxWidth:u,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=Ge(n.font),i=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:u}=this._drawArgs(i);Di(e,n.text,0,0,s,{color:n.color,maxWidth:l,rotation:u,textAlign:Gc(n.align),textBaseline:"middle",translation:[o,a]})}}function nE(t,e){const n=new z0({ctx:t.ctx,options:e,chart:t});Ft.configure(t,n,e),Ft.addBox(t,n),t.titleBlock=n}var sE={id:"title",_element:z0,start(t,e,n){nE(t,n)},stop(t){const e=t.titleBlock;Ft.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const s=t.titleBlock;Ft.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Lr={average(t){if(!t.length)return!1;let e,n,s=new Set,r=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),r+=l.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:r/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,r=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),d=Pu(e,u);d<r&&(r=d,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function Kt(t,e){return e&&(ze(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function on(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function rE(t,e){const{element:n,datasetIndex:s,index:r}=e,i=t.getDatasetMeta(s).controller,{label:o,value:a}=i.getLabelAndValue(r);return{chart:t,label:o,parsed:i.getParsed(r),raw:t.data.datasets[s].data[r],formattedValue:a,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:n}}function zh(t,e){const n=t.chart.ctx,{body:s,footer:r,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=Ge(e.bodyFont),u=Ge(e.titleFont),d=Ge(e.footerFont),f=i.length,h=r.length,g=s.length,p=Bt(e.padding);let m=p.height,y=0,D=s.reduce((w,b)=>w+b.before.length+b.lines.length+b.after.length,0);if(D+=t.beforeBody.length+t.afterBody.length,f&&(m+=f*u.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),D){const w=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=g*w+(D-g)*l.lineHeight+(D-1)*e.bodySpacing}h&&(m+=e.footerMarginTop+h*d.lineHeight+(h-1)*e.footerSpacing);let v=0;const x=function(w){y=Math.max(y,n.measureText(w).width+v)};return n.save(),n.font=u.string,pe(t.title,x),n.font=l.string,pe(t.beforeBody.concat(t.afterBody),x),v=e.displayColors?o+2+e.boxPadding:0,pe(s,w=>{pe(w.before,x),pe(w.lines,x),pe(w.after,x)}),v=0,n.font=d.string,pe(t.footer,x),n.restore(),y+=p.width,{width:y,height:m}}function iE(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function oE(t,e,n,s){const{x:r,width:i}=s,o=n.caretSize+n.caretPadding;if(t==="left"&&r+i+o>e.width||t==="right"&&r-i-o<0)return!0}function aE(t,e,n,s){const{x:r,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let u="center";return s==="center"?u=r<=(a+l)/2?"left":"right":r<=i/2?u="left":r>=o-i/2&&(u="right"),oE(u,t,e,n)&&(u="center"),u}function Uh(t,e,n){const s=n.yAlign||e.yAlign||iE(t,n);return{xAlign:n.xAlign||e.xAlign||aE(t,e,n,s),yAlign:s}}function lE(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function uE(t,e,n){let{y:s,height:r}=t;return e==="top"?s+=n:e==="bottom"?s-=r+n:s-=r/2,s}function Hh(t,e,n,s){const{caretSize:r,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,u=r+i,{topLeft:d,topRight:f,bottomLeft:h,bottomRight:g}=Xr(o);let p=lE(e,a);const m=uE(e,l,u);return l==="center"?a==="left"?p+=u:a==="right"&&(p-=u):a==="left"?p-=Math.max(d,h)+r:a==="right"&&(p+=Math.max(f,g)+r),{x:St(p,0,s.width-e.width),y:St(m,0,s.height-e.height)}}function uo(t,e,n){const s=Bt(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function $h(t){return Kt([],on(t))}function cE(t,e,n){return ws(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Wh(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const U0={beforeTitle:sn,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:sn,beforeBody:sn,beforeLabel:sn,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return ve(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:sn,afterBody:sn,beforeFooter:sn,footer:sn,afterFooter:sn};function rt(t,e,n,s){const r=t[e].call(n,s);return typeof r>"u"?U0[e].call(n,s):r}class Uu extends yn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&n.options.animation&&s.animations,i=new _0(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=cE(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,r=rt(s,"beforeTitle",this,e),i=rt(s,"title",this,e),o=rt(s,"afterTitle",this,e);let a=[];return a=Kt(a,on(r)),a=Kt(a,on(i)),a=Kt(a,on(o)),a}getBeforeBody(e,n){return $h(rt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,r=[];return pe(e,i=>{const o={before:[],lines:[],after:[]},a=Wh(s,i);Kt(o.before,on(rt(a,"beforeLabel",this,i))),Kt(o.lines,rt(a,"label",this,i)),Kt(o.after,on(rt(a,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(e,n){return $h(rt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,r=rt(s,"beforeFooter",this,e),i=rt(s,"footer",this,e),o=rt(s,"afterFooter",this,e);let a=[];return a=Kt(a,on(r)),a=Kt(a,on(i)),a=Kt(a,on(o)),a}_createItems(e){const n=this._active,s=this.chart.data,r=[],i=[],o=[];let a=[],l,u;for(l=0,u=n.length;l<u;++l)a.push(rE(this.chart,n[l]));return e.filter&&(a=a.filter((d,f,h)=>e.filter(d,f,h,s))),e.itemSort&&(a=a.sort((d,f)=>e.itemSort(d,f,s))),pe(a,d=>{const f=Wh(e.callbacks,d);r.push(rt(f,"labelColor",this,d)),i.push(rt(f,"labelPointStyle",this,d)),o.push(rt(f,"labelTextColor",this,d))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const s=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const a=Lr[s.position].call(this,r,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=zh(this,s),u=Object.assign({},a,l),d=Uh(this.chart,s,u),f=Hh(s,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,i={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,r){const i=this.getCaretPosition(e,s,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,s){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:u,bottomLeft:d,bottomRight:f}=Xr(a),{x:h,y:g}=e,{width:p,height:m}=n;let y,D,v,x,w,b;return i==="center"?(w=g+m/2,r==="left"?(y=h,D=y-o,x=w+o,b=w-o):(y=h+p,D=y+o,x=w-o,b=w+o),v=y):(r==="left"?D=h+Math.max(l,d)+o:r==="right"?D=h+p-Math.max(u,f)-o:D=this.caretX,i==="top"?(x=g,w=x-o,y=D-o,v=D+o):(x=g+m,w=x+o,y=D+o,v=D-o),b=x),{x1:y,x2:D,x3:v,y1:x,y2:w,y3:b}}drawTitle(e,n,s){const r=this.title,i=r.length;let o,a,l;if(i){const u=$s(s.rtl,this.x,this.width);for(e.x=uo(this,s.titleAlign,s),n.textAlign=u.textAlign(s.titleAlign),n.textBaseline="middle",o=Ge(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(r[l],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=s.titleMarginBottom-a)}}_drawColorBox(e,n,s,r,i){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:u}=i,d=Ge(i.bodyFont),f=uo(this,"left",i),h=r.x(f),g=l<d.lineHeight?(d.lineHeight-l)/2:0,p=n.y+g;if(i.usePointStyle){const m={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},y=r.leftForLtr(h,u)+u/2,D=p+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Ou(e,m,y,D),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Ou(e,m,y,D)}else{e.lineWidth=fe(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const m=r.leftForLtr(h,u),y=r.leftForLtr(r.xPlus(h,1),u-2),D=Xr(o.borderRadius);Object.values(D).some(v=>v!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Mu(e,{x:m,y:p,w:u,h:l,radius:D}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Mu(e,{x:y,y:p+1,w:u-2,h:l-2,radius:D}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(m,p,u,l),e.strokeRect(m,p,u,l),e.fillStyle=o.backgroundColor,e.fillRect(y,p+1,u-2,l-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:d}=s,f=Ge(s.bodyFont);let h=f.lineHeight,g=0;const p=$s(s.rtl,this.x,this.width),m=function(C){n.fillText(C,p.x(e.x+g),e.y+h/2),e.y+=h+i},y=p.textAlign(o);let D,v,x,w,b,E,k;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,e.x=uo(this,y,s),n.fillStyle=s.bodyColor,pe(this.beforeBody,m),g=a&&y!=="right"?o==="center"?u/2+d:u+2+d:0,w=0,E=r.length;w<E;++w){for(D=r[w],v=this.labelTextColors[w],n.fillStyle=v,pe(D.before,m),x=D.lines,a&&x.length&&(this._drawColorBox(n,e,w,p,s),h=Math.max(f.lineHeight,l)),b=0,k=x.length;b<k;++b)m(x[b]),h=f.lineHeight;pe(D.after,m)}g=0,h=f.lineHeight,pe(this.afterBody,m),e.y-=i}drawFooter(e,n,s){const r=this.footer,i=r.length;let o,a;if(i){const l=$s(s.rtl,this.x,this.width);for(e.x=uo(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=Ge(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,n,s,r){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:u,height:d}=s,{topLeft:f,topRight:h,bottomLeft:g,bottomRight:p}=Xr(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+f,l),o==="top"&&this.drawCaret(e,n,s,r),n.lineTo(a+u-h,l),n.quadraticCurveTo(a+u,l,a+u,l+h),o==="center"&&i==="right"&&this.drawCaret(e,n,s,r),n.lineTo(a+u,l+d-p),n.quadraticCurveTo(a+u,l+d,a+u-p,l+d),o==="bottom"&&this.drawCaret(e,n,s,r),n.lineTo(a+g,l+d),n.quadraticCurveTo(a,l+d,a,l+d-g),o==="center"&&i==="left"&&this.drawCaret(e,n,s,r),n.lineTo(a,l+f),n.quadraticCurveTo(a,l,a+f,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const o=Lr[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=zh(this,e),l=Object.assign({},o,this._size),u=Uh(n,e,l),d=Hh(e,l,u,n);(r._to!==d.x||i._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=Bt(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=s,this.drawBackground(i,e,r,n),C0(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),E0(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,r=e.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),i=!oa(s,r),o=this._positionChanged(r,n);(i||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,s),a=this._positionChanged(o,e),l=n||!oa(o,i)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,s,r){const i=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:s,caretY:r,options:i}=this,o=Lr[i.position].call(this,e,n);return o!==!1&&(s!==o.x||r!==o.y)}}re(Uu,"positioners",Lr);var dE={id:"tooltip",_element:Uu,positioners:Lr,afterInit(t,e,n){n&&(t.tooltip=new Uu({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:U0},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const fE=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function hE(t,e,n,s){const r=t.indexOf(e);if(r===-1)return fE(t,e,n,s);const i=t.lastIndexOf(e);return r!==i?n:r}const pE=(t,e)=>t===null?null:St(Math.round(t),0,e);function Vh(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Hu extends ur{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:r,label:i}of n)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(ve(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:hE(s,e,ue(n,e),this._addedLabels),pE(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return Vh.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}re(Hu,"id","category"),re(Hu,"defaults",{ticks:{callback:Vh}});function mE(t,e){const n=[],{bounds:r,step:i,min:o,max:a,precision:l,count:u,maxTicks:d,maxDigits:f,includeBounds:h}=t,g=i||1,p=d-1,{min:m,max:y}=e,D=!ve(o),v=!ve(a),x=!ve(u),w=(y-m)/(f+1);let b=Qf((y-m)/p/g)*g,E,k,C,_;if(b<1e-14&&!D&&!v)return[{value:m},{value:y}];_=Math.ceil(y/b)-Math.floor(m/b),_>p&&(b=Qf(_*b/p/g)*g),ve(l)||(E=Math.pow(10,l),b=Math.ceil(b*E)/E),r==="ticks"?(k=Math.floor(m/b)*b,C=Math.ceil(y/b)*b):(k=m,C=y),D&&v&&i&&e2((a-o)/i,b/1e3)?(_=Math.round(Math.min((a-o)/b,d)),b=(a-o)/_,k=o,C=a):x?(k=D?o:k,C=v?a:C,_=u-1,b=(C-k)/_):(_=(C-k)/b,qr(_,Math.round(_),b/1e3)?_=Math.round(_):_=Math.ceil(_));const F=Math.max(Gf(b),Gf(k));E=Math.pow(10,ve(l)?F:l),k=Math.round(k*E)/E,C=Math.round(C*E)/E;let T=0;for(D&&(h&&k!==o?(n.push({value:o}),k<o&&T++,qr(Math.round((k+T*b)*E)/E,o,qh(o,w,t))&&T++):k<o&&T++);T<_;++T){const I=Math.round((k+T*b)*E)/E;if(v&&I>a)break;n.push({value:I})}return v&&h&&C!==a?n.length&&qr(n[n.length-1].value,a,qh(a,w,t))?n[n.length-1].value=a:n.push({value:a}):(!v||C===a)&&n.push({value:C}),n}function qh(t,e,{horizontal:n,minRotation:s}){const r=os(s),i=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class gE extends ur{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return ve(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const o=l=>r=n?r:l,a=l=>i=s?i:l;if(e){const l=er(r),u=er(i);l<0&&u<0?a(0):l>0&&u>0&&o(0)}if(r===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(r-l)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=mE(r,i);return e.bounds==="ticks"&&t2(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const r=(s-n)/Math.max(e.length-1,1)/2;n-=r,s+=r}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return p0(e,this.chart.options.locale,this.options.ticks.format)}}class $u extends gE{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Tt(e)?e:0,this.max=Tt(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=os(this.options.ticks.minRotation),r=(e?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}re($u,"id","linear"),re($u,"defaults",{ticks:{callback:m0.formatters.numeric}});const za={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ot=Object.keys(za);function Kh(t,e){return t-e}function Yh(t,e){if(ve(e))return null;const n=t._adapter,{parser:s,round:r,isoWeekday:i}=t._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),Tt(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(gi(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,r)),+o)}function Xh(t,e,n,s){const r=ot.length;for(let i=ot.indexOf(t);i<r-1;++i){const o=za[ot[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=s)return ot[i]}return ot[r-1]}function yE(t,e,n,s,r){for(let i=ot.length-1;i>=ot.indexOf(n);i--){const o=ot[i];if(za[o].common&&t._adapter.diff(r,s,o)>=e-1)return o}return ot[n?ot.indexOf(n):0]}function DE(t){for(let e=ot.indexOf(t)+1,n=ot.length;e<n;++e)if(za[ot[e]].common)return ot[e]}function Qh(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:r}=Qc(n,e),i=n[s]>=e?n[s]:n[r];t[i]=!0}}function xE(t,e,n,s){const r=t._adapter,i=+r.startOf(e[0].value,s),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+r.add(a,1,s))l=n[a],l>=0&&(e[l].major=!0);return e}function Gh(t,e,n){const s=[],r={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],r[a]=o,s.push({value:a,major:!1});return i===0||!n?s:xE(t,s,r,n)}class ha extends ur{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),r=this._adapter=new Tb._date(e.adapters.date);r.init(n),Vr(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Yh(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(u){!o&&!isNaN(u.min)&&(r=Math.min(r,u.min)),!a&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=Tt(r)&&!isNaN(r)?r:+n.startOf(Date.now(),s),i=Tt(i)&&!isNaN(i)?i:+n.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,a=a2(r,i,o);return this._unit=n.unit||(s.autoSkip?Xh(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):yE(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:DE(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),Gh(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,r,i;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?s=i:s=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=St(n,0,o),s=St(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,r=this.options,i=r.time,o=i.unit||Xh(i.minUnit,n,s,this._getLabelCapacity(n)),a=ue(r.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,u=gi(l)||l===!0,d={};let f=n,h,g;if(u&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,u?"day":o),e.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const p=r.ticks.source==="data"&&this.getDataTimestamps();for(h=f,g=0;h<s;h=+e.add(h,a,o),g++)Qh(d,h,p);return(h===s||r.bounds==="ticks"||g===1)&&Qh(d,h,p),Object.keys(d).sort(Kh).map(m=>+m)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,i=this._unit,o=n||r[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,s,r){const i=this.options,o=i.ticks.callback;if(o)return be(o,[e,n,s],this);const a=i.time.displayFormats,l=this._unit,u=this._majorUnit,d=l&&a[l],f=u&&a[u],h=s[n],g=u&&f&&h&&h.major;return this._adapter.format(e,r||(g?f:d))}generateTickLabels(e){let n,s,r;for(n=0,s=e.length;n<s;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,r=os(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:s*i+a*o,h:s*o+a*i}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,r=s[n.unit]||s.millisecond,i=this._tickFormatFunction(e,0,Gh(this,[e],this._majorUnit),r),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,s=r.length;n<s;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const r=this.getLabels();for(n=0,s=r.length;n<s;++n)e.push(Yh(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return u2(e.sort(Kh))}}re(ha,"id","time"),re(ha,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function co(t,e,n){let s=0,r=t.length-1,i,o,a,l;n?(e>=t[s].pos&&e<=t[r].pos&&({lo:s,hi:r}=as(t,"pos",e)),{pos:i,time:a}=t[s],{pos:o,time:l}=t[r]):(e>=t[s].time&&e<=t[r].time&&({lo:s,hi:r}=as(t,"time",e)),{time:i,pos:a}=t[s],{time:o,pos:l}=t[r]);const u=o-i;return u?a+(l-a)*(e-i)/u:a}class Jh extends ha{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=co(n,this.min),this._tableRange=co(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,r=[],i=[];let o,a,l,u,d;for(o=0,a=e.length;o<a;++o)u=e[o],u>=n&&u<=s&&r.push(u);if(r.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=r.length;o<a;++o)d=r[o+1],l=r[o-1],u=r[o],Math.round((d+l)/2)!==u&&i.push({time:u,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(co(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return co(this._table,s*this._tableRange+this._minPos,!0)}}re(Jh,"id","timeseries"),re(Jh,"defaults",ha.defaults);const H0="label";function Zh(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function vE(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function $0(t,e){t.labels=e}function W0(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:H0;const s=[];t.datasets=e.map(r=>{const i=t.datasets.find(o=>o[n]===r[n]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function wE(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:H0;const n={labels:[],datasets:[]};return $0(n,t.labels),W0(n,t.datasets,e),n}function bE(t,e){const{height:n=150,width:s=300,redraw:r=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:u=[],fallbackContent:d,updateMode:f,...h}=t,g=S.useRef(null),p=S.useRef(null),m=()=>{g.current&&(p.current=new Ia(g.current,{type:o,data:wE(a,i),options:l&&{...l},plugins:u}),Zh(e,p.current))},y=()=>{Zh(e,null),p.current&&(p.current.destroy(),p.current=null)};return S.useEffect(()=>{!r&&p.current&&l&&vE(p.current,l)},[r,l]),S.useEffect(()=>{!r&&p.current&&$0(p.current.config.data,a.labels)},[r,a.labels]),S.useEffect(()=>{!r&&p.current&&a.datasets&&W0(p.current.config.data,a.datasets,i)},[r,a.datasets]),S.useEffect(()=>{p.current&&(r?(y(),setTimeout(m)):p.current.update(f))},[r,l,a.labels,a.datasets,f]),S.useEffect(()=>{p.current&&(y(),setTimeout(m))},[o]),S.useEffect(()=>(m(),()=>y()),[]),yt.createElement("canvas",{ref:g,role:"img",height:n,width:s,...h},d)}const CE=S.forwardRef(bE);function EE(t,e){return Ia.register(e),S.forwardRef((n,s)=>yt.createElement(CE,{...n,ref:s,type:t}))}const kE=EE("line",Ao),bs=Fe.create({baseURL:Js});bs.interceptors.request.use(t=>{const e=localStorage.getItem("token");try{console.debug("adminApi request:",t.method,t.url,"token_present=",!!e,"token_preview=",e?String(e).slice(0,8)+"...":null,"headersBefore=",t.headers)}catch{}return e&&(t.headers.Authorization=`Bearer ${e}`),t});const _E=t=>bs.put("/admin/update",t),SE=t=>bs.put("/admin/change-password",t),FE=t=>bs.post("/admin/upload-avatar",t),NE=async t=>{try{return await bs.get("/admin/posts",{params:t})}catch(e){try{console.warn("fetchAdminPosts error",e&&e.response&&e.response.status,e&&e.response&&e.response.data)}catch{}const n=e&&e.response&&e.response.status;if(n===401||n===403)try{return await Fe.get(`${Js}/admin/posts/public`,{params:t})}catch(s){throw s}throw e}},jE=t=>bs.delete(`/admin/posts/${t}`),AE=t=>bs.post(`/admin/posts/${t}/hide`);function TE({onClose:t,admin:e}){const[n,s]=S.useState({displayName:(e==null?void 0:e.displayName)||(e==null?void 0:e.username)||""}),[r,i]=S.useState(null),[o,a]=S.useState(!1),[l,u]=S.useState(""),[d,f]=S.useState(""),{updateUserOnly:h}=st(),g=y=>{s({...n,[y.target.name]:y.target.value})},p=y=>{i(y.target.files[0])},m=async y=>{var D,v,x,w,b,E;y.preventDefault(),a(!0),u(""),f("");try{let k;if(r){const T=new FormData;T.append("avatar",r);const I=await FE(T);k=((D=I.data)==null?void 0:D.avatarUrl)||((x=(v=I.data)==null?void 0:v.user)==null?void 0:x.avatarUrl)}const C={displayName:n.displayName};k&&(C.avatarUrl=k);const _=await _E(C),F=((w=_.data)==null?void 0:w.user)||_.data;F&&h(F),f("Cp nht thnh cng!"),setTimeout(()=>t(),1500)}catch(k){u(((E=(b=k.response)==null?void 0:b.data)==null?void 0:E.error)||"Cp nht tht bi")}finally{a(!1)}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg w-full max-w-lg md:max-w-xl p-8 shadow-lg",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h2",{className:"text-2xl font-semibold",children:"Cp nht ti khon admin"}),c.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l&&c.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:l}),d&&c.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded",children:d}),c.jsxs("form",{onSubmit:m,className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"w-10 h-10 rounded-lg icon-no-bg flex items-center justify-center text-gray-600",children:c.jsx(s0,{className:"w-5 h-5"})})}),c.jsx("label",{htmlFor:"displayName",className:"w-20 md:w-24 text-sm font-medium text-gray-700",children:"Tn hin th"}),c.jsx("input",{id:"displayName",type:"text",name:"displayName",value:n.displayName,onChange:g,className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",required:!0})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"w-10 h-10 rounded-lg icon-no-bg flex items-center justify-center text-gray-600",children:c.jsx(n0,{className:"w-5 h-5"})})}),c.jsx("label",{htmlFor:"avatar",className:"w-20 md:w-24 text-sm font-medium text-gray-700",children:"nh i din"}),c.jsx("div",{className:"flex-1",children:c.jsx("input",{id:"avatar",type:"file",accept:"image/*",onChange:p,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})})]}),c.jsxs("div",{className:"flex gap-4 pt-6",children:[c.jsx("button",{type:"button",onClick:t,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Hy"}),c.jsx("button",{type:"submit",disabled:o,className:"flex-1 px-6 py-3 bg-black text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 transition-colors duration-200",children:o?"ang lu...":"Lu thay i"})]})]})]})})}function BE({onClose:t}){const[e,n]=S.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[s,r]=S.useState(!1),[i,o]=S.useState(""),[a,l]=S.useState(""),u=f=>{n({...e,[f.target.name]:f.target.value})},d=async f=>{var h,g;if(f.preventDefault(),r(!0),o(""),l(""),e.newPassword!==e.confirmPassword){o("Mt khu mi khng khp"),r(!1);return}if(e.newPassword.length<6){o("Mt khu mi phi c t nht 6 k t"),r(!1);return}try{await SE({currentPassword:e.currentPassword,newPassword:e.newPassword}),l("i mt khu thnh cng!"),setTimeout(()=>t(),1500)}catch(p){o(((g=(h=p.response)==null?void 0:h.data)==null?void 0:g.error)||"i mt khu tht bi")}finally{r(!1)}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-xl font-semibold",children:"i mt khu admin"}),c.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-full",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i&&c.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:i}),a&&c.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded",children:a}),c.jsxs("form",{onSubmit:d,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mt khu hin ti"}),c.jsx("input",{type:"password",name:"currentPassword",value:e.currentPassword,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mt khu mi"}),c.jsx("input",{type:"password",name:"newPassword",value:e.newPassword,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,minLength:6}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"t nht 6 k t"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Xc nhn mt khu mi"}),c.jsx("input",{type:"password",name:"confirmPassword",value:e.confirmPassword,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Hy"}),c.jsx("button",{type:"submit",disabled:s,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:s?"ang i...":"i mt khu"})]})]})]})})}function PE({logout:t,admin:e}){const[n,s]=S.useState(!1),[r,i]=S.useState(!1),[o,a]=S.useState(!1),l=S.useRef(null);return S.useEffect(()=>{function u(f){l.current&&(l.current.contains(f.target)||a(!1))}function d(f){f.key==="Escape"&&a(!1)}return document.addEventListener("mousedown",u),document.addEventListener("keydown",d),()=>{document.removeEventListener("mousedown",u),document.removeEventListener("keydown",d)}},[]),c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"relative",ref:l,children:[c.jsxs("button",{onClick:()=>a(u=>!u),className:"flex items-center gap-3 bg-white rounded-full px-2 py-1 shadow-sm","aria-haspopup":"menu",children:[c.jsx("img",{src:(()=>{const u=e==null?void 0:e.avatarUrl;if(!u)return"/default-avatar.png";try{return String(u).startsWith("http")?u+(u.includes("?")?"&":"?")+"cb="+Date.now():Js+u+(u.includes("?")?"&":"?")+"cb="+Date.now()}catch{return"/default-avatar.png"}})(),alt:"avatar",className:"w-8 h-8 rounded-full object-cover",onError:u=>{u.target.onerror=null,u.target.src="/default-avatar.png"}}),c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),o&&c.jsxs("div",{className:"absolute left-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-30 translate-x-4 md:translate-x-6",children:[c.jsx("button",{onClick:()=>{a(!1),s(!0)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Cp nht ti khon"}),c.jsx("button",{onClick:()=>{a(!1),i(!0)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"i mt khu"}),c.jsx("div",{className:"border-t my-1"}),c.jsx("button",{onClick:()=>{try{t()}catch{}a(!1),window.location.pathname="/"},className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"ng xut"})]})]}),n&&c.jsx(TE,{admin:e,onClose:()=>s(!1)}),r&&c.jsx(BE,{onClose:()=>i(!1)})]})}function LE(){var m;const[t,e]=S.useState(""),[n,s]=S.useState([]),[r,i]=S.useState(!1),[o,a]=S.useState(null),l=S.useRef(null),u=async()=>{i(!0),a(null);try{const y=await NE({q:t}),D=y&&y.data!==void 0?y.data:y;let v=[];Array.isArray(D)?v=D:Array.isArray(D.data)?v=D.data:Array.isArray(D.posts)?v=D.posts:v=[];const x=v.map(w=>{if(w&&w.post){const b={...w.post};return w.author&&(b.authorName=w.author.displayName||w.author.fullName||w.author.username,b.author=w.author),b}return w});s(x)}catch(y){const D=y&&y.response&&y.response.data&&y.response.data.error?y.response.data.error:y.message||"Khng th ti danh sch bi vit";a(D)}finally{i(!1)}};S.useEffect(()=>{u()},[]),S.useEffect(()=>{function y(b){return b&&b.detail||b||null}function D(b){const E=y(b);if(console.debug("AdminPosts: received app:post:created",E),!E)return;const k=E.post||E,C=E.author?{...k,author:E.author,authorName:E.author.displayName||E.author.fullName||E.author.username}:k,_=C&&(C.id||C.postId||C.post&&C.post.id);_&&(s(F=>{try{return F.some(T=>String(T.id)===String(_))?F:[C,...F]}catch{return F}}),setTimeout(()=>{try{u()}catch(F){console.warn("AdminPosts: load() failed in created fallback",F)}},600))}function v(b){const E=y(b);if(console.debug("AdminPosts: received app:post:updated",E),!E)return;const k=E.postId||E.id||E.post&&E.post.id,C=E.post||E;k&&s(_=>{let F=!1;const T=_.map(I=>{try{if(String(I.id)===String(k))return F=!0,{...I,...C}}catch{}return I});return F||u(),T})}function x(b){const E=y(b);if(console.debug("AdminPosts: received app:post:deleted",E),!E)return;const k=E.postId||E.id||E.post&&E.post.id;k&&s(C=>C.filter(_=>String(_.id)!==String(k)))}window.addEventListener("app:post:created",D),window.addEventListener("app:post:updated",v),window.addEventListener("app:post:deleted",x);function w(){console.debug("AdminPosts: received app:stats:update -> reloading list");try{u()}catch(b){console.warn("AdminPosts: load() failed on stats:update",b)}}return window.addEventListener("app:stats:update",w),()=>{window.removeEventListener("app:post:created",D),window.removeEventListener("app:post:updated",v),window.removeEventListener("app:post:deleted",x),window.removeEventListener("app:stats:update",w)}},[]),S.useEffect(()=>{let y=null,D=null;const v=w=>{try{const b=In(Ni,{auth:{token:w}});return D=b,l.current=b,b.on("connect",()=>{console.debug("AdminPosts: socket connected",b.id)}),b.on("post:created",E=>{try{try{window.dispatchEvent(new CustomEvent("app:post:created",{detail:E}))}catch{}handleCreated(E)}catch(k){console.warn("AdminPosts: handleCreated failed on socket event",k)}}),b.on("post:updated",E=>{try{try{window.dispatchEvent(new CustomEvent("app:post:updated",{detail:E}))}catch{}handleUpdated(E)}catch(k){console.warn("AdminPosts: handleUpdated failed on socket event",k)}}),b.on("post:deleted",E=>{try{try{window.dispatchEvent(new CustomEvent("app:post:deleted",{detail:E}))}catch{}handleDeleted(E)}catch(k){console.warn("AdminPosts: handleDeleted failed on socket event",k)}}),b.on("stats:update",()=>{try{try{window.dispatchEvent(new CustomEvent("app:stats:update"))}catch{}console.debug("AdminPosts: socket stats:update received -> load()"),u()}catch(E){console.warn("AdminPosts: load() failed on socket stats:update",E)}}),b.on("connect_error",E=>{console.error("AdminPosts socket connect_error:",E&&(E.message||E))}),b}catch(b){return console.warn("AdminPosts: socket init failed",b),null}},x=localStorage.getItem("token");if(x)v(x);else{let w=0;y=setInterval(()=>{const b=localStorage.getItem("token");if(b){v(b),clearInterval(y),y=null;return}w+=200,w>=3e3&&(console.warn("AdminPosts: no token found after waiting, socket not initialized"),clearInterval(y),y=null)},200)}return()=>{try{y&&clearInterval(y)}catch{}try{D&&D.disconnect()}catch{}l.current=null}},[]);const d=async y=>{y&&y.preventDefault&&y.preventDefault(),await u()},f=async y=>{if(!confirm("Xc nhn xa bi vit ny?"))return;if(!localStorage.getItem("token")){alert(`Khng tm thy token ng nhp. Vui lng ng nhp li (admin).
Missing token`);return}try{await jE(y),s(v=>v.filter(x=>x.id!==y))}catch(v){const x=v&&v.response&&v.response.data&&v.response.data.error?v.response.data.error:v&&v.message||"Xa tht bi";alert(x)}},h=async y=>{if(!confirm("n/hin toggling bi vit?"))return;if(!localStorage.getItem("token")){alert(`Khng tm thy token ng nhp. Vui lng ng nhp li (admin).
Missing token`);return}try{await AE(y),await u()}catch(v){const x=v&&v.response&&v.response.data&&v.response.data.error?v.response.data.error:v&&v.message||"Thao tc tht bi";alert(x)}},[g,p]=S.useState(null);return c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Qun l bi vit"}),c.jsxs("form",{onSubmit:d,className:"mb-4 flex gap-2",children:[c.jsx("input",{value:t,onChange:y=>e(y.target.value),placeholder:"Tm theo tiu  hoc ni dung",className:"flex-1 px-4 py-2 border rounded-lg"}),c.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Tm"}),c.jsx("button",{type:"button",onClick:()=>{e(""),u()},className:"px-4 py-2 bg-gray-200 rounded-lg",children:"Clear"})]}),r&&c.jsx("div",{children:"ang ti..."}),o&&c.jsx("div",{className:"text-red-600",children:o}),c.jsx("div",{className:"overflow-x-auto bg-white rounded shadow",children:c.jsxs("table",{className:"min-w-full text-left table-fixed",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b",children:[c.jsx("th",{className:"px-4 py-3 w-1/6",children:"ID"}),c.jsx("th",{className:"px-4 py-3 w-28",children:"nh"}),c.jsx("th",{className:"px-4 py-3 w-2/5",children:"Ni dung"}),c.jsx("th",{className:"px-4 py-3 w-1/5",children:"Tc gi"}),c.jsx("th",{className:"px-4 py-3",children:"Trng thi"}),c.jsx("th",{className:"px-4 py-3",children:"Hnh ng"})]})}),c.jsx("tbody",{children:n.map(y=>{var D,v;return c.jsxs("tr",{className:`border-b hover:bg-gray-50 ${y.hidden?"opacity-70 bg-gray-50":""}`,children:[c.jsx("td",{className:"px-4 py-3 align-middle",children:c.jsx("div",{className:"max-w-[200px] overflow-hidden whitespace-nowrap truncate flex items-center",children:y.id})}),c.jsx("td",{className:"px-4 py-3 align-middle",children:c.jsx("div",{className:"flex items-center",children:y.imageUrl?c.jsx("img",{src:y.imageUrl.startsWith("/")?Js.replace(/\/$/,"")+y.imageUrl:y.imageUrl,alt:y.title||"thumbnail",className:"w-16 h-10 object-cover rounded",onError:x=>{x.currentTarget.style.display="none"}}):c.jsx("div",{className:"w-16 h-10 bg-gray-100 rounded flex items-center justify-center text-xs text-gray-400",children:"No img"})})}),c.jsx("td",{className:"px-4 py-3 align-middle",children:c.jsx("div",{className:"max-w-[420px] overflow-hidden whitespace-nowrap truncate flex items-center",children:y.title||((D=y.content)==null?void 0:D.slice(0,120))})}),c.jsx("td",{className:"px-4 py-3 align-middle",children:c.jsx("div",{className:"max-w-[160px] overflow-hidden whitespace-nowrap truncate flex items-center",children:y.authorName||((v=y.author)==null?void 0:v.displayName)})}),c.jsx("td",{className:"px-4 py-3 align-middle",title:y.hidden?"Bi vit  b n  s khng xut hin vi ngi dng cng khai.":"Bi vit ang c hin th",children:y.hidden?c.jsx("span",{className:"text-gray-600 italic",children:"n  khng hin th cng khai"}):"Hin th"}),c.jsx("td",{className:"px-4 py-3 align-middle",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{title:"Xem chi tit",onClick:()=>p(y),className:"px-2 py-1 bg-gray-100 rounded text-sm",children:""}),c.jsx("button",{onClick:()=>h(y.id),className:"flex-1 min-w-[72px] px-3 py-1 bg-yellow-400 rounded text-sm",children:y.hidden?"B n":"n"}),c.jsx("button",{onClick:()=>f(y.id),className:"flex-1 min-w-[72px] px-3 py-1 bg-red-500 rounded text-sm text-white",children:"Xa"})]})})]},y.id)})})]})}),g&&c.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[c.jsx("div",{className:"fixed inset-0 bg-black/40",onClick:()=>p(null)}),c.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-6xl w-full z-50 p-12 max-h-[85vh] overflow-y-auto transform translate-x-20",children:[c.jsx("div",{className:"flex justify-between items-start mb-6",children:c.jsx("h3",{className:"text-xl font-semibold",children:"Chi tit bi vit"})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 items-start",children:[c.jsx("div",{className:"col-span-1 md:flex-shrink-0 md:w-80 lg:w-96 flex flex-col items-center justify-start pr-6 md:pr-6",children:g.imageUrl?c.jsx("img",{src:g.imageUrl&&g.imageUrl.startsWith("/")?Js.replace(/\/$/,"")+g.imageUrl:g.imageUrl,alt:g.title||"thumbnail",className:"w-full h-80 md:h-96 object-cover rounded-lg shadow",onError:y=>{y.currentTarget.style.display="none"}}):c.jsx("div",{className:"w-full h-80 md:h-96 bg-gray-100 rounded-lg flex items-center justify-center text-sm text-gray-400",children:"No image"})}),c.jsx("div",{className:"col-span-2 flex flex-col pl-2 md:pl-6",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx("div",{className:"flex flex-col justify-between",children:c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-gray-500",children:"Trng thi"}),c.jsx("div",{className:"font-medium mt-1",children:g.hidden?" n":"Hin th"})]})}),c.jsx("div",{className:"flex flex-col justify-between",children:c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-gray-500",children:"Tc gi"}),c.jsx("div",{className:"font-medium mt-1",children:g.authorName||((m=g.author)==null?void 0:m.displayName)})]})}),c.jsx("div",{className:"flex flex-col justify-between",children:c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-gray-500",children:"ID"}),c.jsx("div",{className:"text-xs text-gray-500 break-all mt-1",children:g.id})]})}),c.jsxs("div",{className:"col-span-1 md:col-span-3",children:[c.jsx("div",{className:"text-sm text-gray-500",children:"Ni dung"}),c.jsx("div",{className:"whitespace-pre-wrap text-base mt-2 max-h-56 overflow-y-auto leading-relaxed",children:g.content})]})]})})]}),c.jsx("div",{className:"mt-10 flex items-center justify-end",children:c.jsx("button",{onClick:()=>p(null),className:"px-8 py-4 bg-black text-white rounded-lg text-lg hover:opacity-95",children:"ng"})})]})]})]})}function OE(){const t=[],n=()=>{},s=()=>{};return c.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Qun l Tin Nhn / Bo co"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:n,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm",children:"nh du  c"}),c.jsx("button",{onClick:s,className:"px-3 py-1 bg-gray-200 text-gray-800 rounded text-sm",children:"Xa tt c"})]})]}),c.jsxs("div",{className:"mb-3 text-sm text-gray-600",children:["Cha c: ",0]}),t.length===0?c.jsx("div",{className:"text-sm text-gray-500",children:"Cha c bo co no"}):c.jsx("div",{className:"space-y-3",children:t.map(r=>c.jsxs("div",{className:"p-3 border rounded",children:[c.jsxs("div",{className:"text-sm font-medium",children:["Bi: ",r.postId]}),c.jsxs("div",{className:"text-xs text-gray-600",children:["Ngi bo co: ",r.reporterId]}),c.jsxs("div",{className:"mt-2 text-sm",children:["L do: ",r.reason||"(khng c)"]}),c.jsx("div",{className:"mt-2 text-xs text-gray-400",children:r.createdAt})]},r.id||Math.random()))})]})}Ia.register(Hu,$u,Po,Pr,sE,dE,tE);const kr=({colorClass:t,title:e,value:n,icon:s})=>c.jsx("div",{className:`p-6 rounded-lg ${t} text-white shadow-sm w-full`,children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-3xl font-bold leading-tight",children:n}),c.jsx("div",{className:"text-sm opacity-90 mt-1",children:e})]}),c.jsx("div",{className:"text-4xl opacity-90",children:s})]})}),ME=({avatar:t,name:e,followers:n})=>c.jsxs("div",{className:"flex items-center gap-4 py-3",children:[c.jsx("img",{src:t,alt:e,className:"w-12 h-12 rounded-full object-cover",onError:s=>s.target.style.display="none"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-lg font-semibold text-gray-900",children:e}),c.jsxs("div",{className:"text-sm text-gray-500",children:[n," followers"]})]}),c.jsx("div",{className:"text-base font-bold text-gray-900",children:n})]}),RE=({author:t,title:e,interactions:n,onClick:s})=>c.jsxs("div",{className:"flex items-center justify-between py-3 cursor-pointer",onClick:s,role:"button",tabIndex:0,onKeyDown:r=>{r.key==="Enter"&&s&&s()},children:[c.jsx("div",{className:"flex-1 min-w-0 text-base text-gray-800",children:c.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[t&&c.jsx("span",{className:"font-semibold flex-shrink-0",style:{marginRight:8},children:t}),c.jsx("span",{className:"truncate",title:e,children:e})]})}),c.jsx("div",{className:"ml-4 w-12 flex-shrink-0 text-right text-lg font-semibold text-gray-900",children:n})]});function IE(){const t=async()=>{try{const m=await fetch("http://localhost:5000/stats");if(!m.ok){console.error("API /stats tr v li:",m.status,m.statusText);return}const y=await m.json();r(y)}catch(m){console.error("Li khi gi API /stats:",m)}};yt.useEffect(()=>{t()},[]),yt.useEffect(()=>{const m=localStorage.getItem("token");if(!m){console.warn("AdminDashboard: no token found, skipping socket initialization");return}const y=In(Ni,{auth:{token:m}});return a.current=y,y.on("connect",()=>{}),y.on("connect_error",D=>{console.error("[AdminDashboard] socket connect_error:",D&&(D.message||D))}),y.on("stats:update",()=>{t()}),()=>{try{y.disconnect()}catch{}a.current=null}},[]);const{logout:e,user:n}=st(),[s,r]=S.useState({users:0,posts:0,comments:0,likes:0,messages:0}),[i,o]=S.useState(null),a=S.useRef(null),l=(s.topUsers||[]).map(m=>({id:m.id,name:m.displayName||m.username||"-",avatar:m.avatarUrl&&m.avatarUrl.startsWith("/")?`${window.location.origin}${m.avatarUrl}`:m.avatarUrl||"/default-avatar.png",followers:typeof m.followers=="number"?m.followers:Number(m.followers)||0})),u=(s.topPosts||[]).map(m=>({id:m.id,title:m.title||"Untitled",author:m.authorName||"-",interactions:typeof m.interactions=="number"?m.interactions:Number(m.interactions)||0})),[d,f]=S.useState(null);S.useEffect(()=>{(async()=>{try{const w=await fetch("http://localhost:5000/stats/trends?type=users&days=7");if(w.ok){const b=await w.json();f(b);return}}catch{}const y=new Date,D=7,v=h(s.users)||0,x=[];for(let w=D-1;w>=0;w--){const b=new Date(y);b.setDate(y.getDate()-w);const E=b.toISOString().slice(0,10),k=Math.max(0,Math.round(v-(D-1-w)*Math.max(1,v/D)));x.push({date:E,users:k})}x.length>0&&(x[x.length-1].users=v),f(x)})()},[s.users]);function h(m){return m&&typeof m=="object"&&typeof m.toNumber=="function"?m.toNumber():typeof m=="object"&&typeof m.low=="number"?m.low:typeof m=="number"?m:0}const g=typeof window<"u"?window.location.pathname:"";return c.jsx("div",{className:"min-h-screen bg-gray-50",children:c.jsxs("div",{className:"flex",children:[c.jsx("aside",{className:"hidden md:flex md:fixed md:top-0 md:left-0 md:h-screen w-96 bg-gradient-to-b from-blue-900 to-blue-800 text-white shadow-inner z-20",children:c.jsxs("div",{className:"px-6 py-8 flex-1 flex flex-col justify-between",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[c.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center overflow-hidden",children:c.jsx("img",{src:"/logo.png",alt:"Admin logo",className:"w-10 h-10 object-contain",onError:m=>{try{m.target.onerror=null,m.target.src="/admin-logo.svg"}catch{}}})}),c.jsx("div",{className:"text-lg font-semibold",children:"Mng x hi Mini Big data"})]}),c.jsx("nav",{className:"mt-6",children:c.jsxs("ul",{className:"mt-2 space-y-4",children:[c.jsxs("li",{onClick:()=>window.location.pathname="/admin",className:"flex items-center gap-4 px-4 py-3 rounded-xl cursor-pointer "+(g==="/admin"||g==="/admin/"?"bg-blue-600":"hover:bg-blue-700/60"),children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 opacity-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 7h18M3 12h18M3 17h18"})}),c.jsx("span",{className:"text-sm font-medium",children:"Bng iu khin"})]}),c.jsxs("li",{onClick:()=>window.location.pathname="/admin/posts",className:"flex items-center gap-4 px-4 py-3 rounded-lg cursor-pointer "+(g==="/admin/posts"?"bg-blue-600":"hover:bg-blue-700/60"),children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 opacity-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 8h10M7 12h6m-6 4h10M5 6h14a1 1 0 011 1v10a1 1 0 01-1 1H5a1 1 0 01-1-1V7a1 1 0 011-1z"})}),c.jsx("span",{className:"text-sm",children:"Qun L Bi Vit"})]}),c.jsxs("li",{onClick:()=>window.location.pathname="/admin/messages",className:"flex items-center gap-4 px-4 py-3 rounded-lg hover:bg-blue-700/60 cursor-pointer",children:[c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 opacity-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5.121 17.804A9 9 0 1118.879 6.196 9 9 0 015.12 17.804z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),c.jsx("span",{className:"text-sm",children:"Qun L Ngi Dng"})]}),c.jsxs("li",{onClick:()=>window.location.pathname="/admin/messages",className:"flex items-center gap-4 px-4 py-3 rounded-lg cursor-pointer "+(g==="/admin/messages"?"bg-blue-600":"hover:bg-blue-700/60"),children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 opacity-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),c.jsx("span",{className:"text-sm",children:"Qun L Tin Nhn"}),0>0]}),c.jsxs("li",{className:"flex items-center gap-4 px-4 py-3 rounded-lg hover:bg-blue-700/60",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 opacity-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),c.jsx("span",{className:"text-sm",children:"Qun l phn hi"})]}),c.jsxs("li",{className:"flex items-center gap-4 px-4 py-3 rounded-lg hover:bg-blue-700/60",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 opacity-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11.049 2.927c.3-1.14 1.603-1.14 1.902 0a1.724 1.724 0 002.573 1.02c.952-.66 2.273.3 1.903 1.44-.3 1.14-.3 2.338 0 3.478.37 1.14-.951 2.1-1.902 1.44a1.724 1.724 0 00-2.573 1.02c-.299 1.14-1.602 1.14-1.902 0a1.724 1.724 0 00-2.573-1.02c-.951.66-2.273-.3-1.903-1.44.3-1.14.3-2.338 0-3.478-.37-1.14.951-2.1 1.902-1.44.86.6 1.974.06 2.573-1.02z"})}),c.jsx("span",{className:"text-sm",children:"Ci t Cu Hnh"})]})]})})]}),c.jsx("div",{className:"text-sm opacity-80 px-4",children:"v1.0"})]})}),c.jsx("main",{className:"flex-1 p-6 md:ml-96",children:c.jsx("div",{className:"max-w-7xl ml-8",children:typeof window<"u"&&window.location.pathname==="/admin/posts"?c.jsx(LE,{}):typeof window<"u"&&window.location.pathname==="/admin/messages"?c.jsx(OE,{}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"BNG IU KHIN"}),c.jsx("div",{className:"relative",children:c.jsx(PE,{logout:e,admin:n})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-8 md:ml-auto md:mr-8",children:[c.jsx(kr,{colorClass:"bg-blue-600",title:"Ngi Dng",value:h(s.users),icon:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5.121 17.804A9 9 0 1118.879 6.196 9 9 0 015.12 17.804z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),c.jsx(kr,{colorClass:"bg-red-500",title:"Bi Vit",value:h(s.posts),icon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 8h10M7 12h6m-6 4h10M5 6h14a1 1 0 011 1v10a1 1 0 01-1 1H5a1 1 0 01-1-1V7a1 1 0 011-1z"})})}),c.jsx(kr,{colorClass:"bg-green-600",title:"Bnh Lun",value:h(s.comments),icon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 10h.01M12 10h.01M16 10h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4-.8L3 20l1.2-3.8A7.963 7.963 0 013 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),c.jsx(kr,{colorClass:"bg-orange-500",title:"Lt Thch",value:h(s.likes),icon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4.318 6.318a4.5 4.5 0 016.364 0L12 7.636l1.318-1.318a4.5 4.5 0 116.364 6.364L12 21.364 4.318 12.682a4.5 4.5 0 010-6.364z"})})}),c.jsx(kr,{colorClass:"bg-indigo-600",title:"Tin Nhn",value:h(s.messages),icon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 8h10M7 12h6m-6 4h10M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4-.8L3 20l1.2-3.8A7.963 7.963 0 013 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl p-6 shadow-sm min-h-[500px]",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Tng trng ngi dng"}),c.jsx("div",{className:"h-[460px] rounded-lg bg-gray-50 border border-gray-100 flex items-center justify-center text-gray-400",children:d?c.jsx(kE,{options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}}},data:{labels:d.map(m=>m.date),datasets:[{label:"Users",data:d.map(m=>m.users),borderColor:"#2563eb",backgroundColor:"rgba(37,99,235,0.1)",tension:.3}]}}):"Chart placeholder"})]}),c.jsxs("div",{className:"flex flex-col gap-6",children:[c.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Hot ng hng u"}),c.jsx("div",{className:"space-y-2",children:l.map(m=>c.jsx(ME,{avatar:m.avatar,name:m.name,followers:m.followers},m.id))})]}),c.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Bi vit tng tc nhiu"}),c.jsx("div",{className:"space-y-2",children:u.map(m=>c.jsx(RE,{author:m.author,title:m.title,interactions:m.interactions,onClick:()=>o(m)},m.id))})]})]})]})]})})}),i&&c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white p-6 rounded-lg w-11/12 max-w-2xl",children:[c.jsx("h4",{className:"text-lg font-semibold mb-2",children:i.author||"Ngi dng"}),c.jsx("div",{className:"text-sm text-gray-700 whitespace-pre-wrap break-words",children:i.title}),c.jsx("div",{className:"mt-4 text-right",children:c.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:()=>o(null),children:"ng"})})]})})]})})}class ep extends yt.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Uncaught error captured by ErrorBoundary:",e,n)}render(){return this.state.hasError?c.jsx("div",{className:"min-h-screen flex items-center justify-center p-6 bg-gray-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-xl w-full text-center",children:[c.jsx("h2",{className:"text-2xl font-semibold mb-4",children:" xy ra li"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"ng dng gp vn  khi hin th. Bn c th th ti li trang."}),c.jsx("div",{className:"flex justify-center gap-4",children:c.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-md",children:"Ti li"})}),c.jsxs("details",{className:"mt-4 text-left text-xs text-gray-500",children:[c.jsx("summary",{children:"Chi tit li (debug)"}),c.jsx("pre",{className:"whitespace-pre-wrap mt-2",children:String(this.state.error)})]})]})}):this.props.children}}function zE(){const{user:t,isLoading:e}=st(),n=t&&(t.role==="admin"||String(t.username)==="admin"),s=typeof window<"u"&&window.location.pathname.startsWith("/admin");if(!e&&n){if(!s)try{window.location.pathname="/admin"}catch{}return c.jsx(ep,{children:c.jsx("div",{className:"min-h-screen",children:c.jsx(IE,{})})})}if(!e&&!n&&s){try{window.location.pathname="/"}catch{}return null}return c.jsx(ep,{children:c.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[c.jsx(l1,{}),c.jsx("div",{className:"pt-20 mt-[30px] pb-12 flex justify-center px-8",children:c.jsxs("div",{className:"flex max-w-7xl w-full gap-10",children:[c.jsx("div",{className:"flex-1 max-w-3xl",children:c.jsx(D1,{})}),c.jsx("div",{className:"w-96 flex-shrink-0",children:c.jsx(v1,{})})]})})]})})}let fo=null;function UE(){const[t,e]=S.useState([]);return S.useEffect(()=>(window.appToast=(n,s={})=>{const r=Date.now()+Math.random().toString(36).slice(2,8);if(e(i=>[...i,{id:r,message:n,...s}]),s.duration!==0){const i=s.duration||3e3;setTimeout(()=>{e(o=>o.filter(a=>a.id!==r))},i)}},()=>{try{delete window.appToast}catch{}}),[]),c.jsxs("div",{className:"fixed top-6 right-6 z-50 flex flex-col gap-3 items-end pointer-events-none",children:[t.map(n=>c.jsx("div",{className:"pointer-events-auto bg-blue-600 text-white px-4 py-3 rounded-lg shadow-2xl max-w-md w-full border border-blue-700/40 ring-1 ring-blue-700/10 transform transition-all duration-200",style:{animation:"toast-in 220ms ease-out"},children:c.jsx("div",{className:"text-sm font-medium",children:n.message})},n.id)),c.jsx("style",{children:`
        @keyframes toast-in {
          from { opacity: 0; transform: translateY(-6px) scale(0.98); }
          to { opacity: 1; transform: translateY(0) scale(1); }
        }
      `})]})}function HE(){if(fo)return;fo=document.createElement("div"),document.body.appendChild(fo),mg(fo).render(c.jsx(UE,{}))}HE();Nl.createRoot(document.getElementById("root")).render(c.jsx(Hw,{children:c.jsx(zE,{})}));
